var Le=Object.defineProperty;var Me=(e,t,n)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var M=(e,t,n)=>Me(e,typeof t!="symbol"?t+"":t,n);import{g as De,u as Ie,d as xe,i as Ce,j as Y,k as x}from"./index-DrStG47M.js";import{x as ye,y as ge,a1 as ke,a2 as _,a3 as pe,a4 as ne,K as C,H as Oe,N as Pe,W as Ne,U as Ve,a5 as U,E as z,a0 as oe,Q as ve,a6 as _e,a7 as Re}from"./index-Dn2xiQBh.js";import{g as L,a as Be,ax as se,as as c,aQ as Ue,W as k,c as ze,n as He,p as We,k as P,m as me,o as $e,ar as Se,aR as je,f as O,aq as Ye}from"./index-CONonrmZ.js";function qe(e,t,n,o){return e.addEventListener(t,n,o),Ue(e.removeEventListener.bind(e,t,n,o))}function Xe(e,t,n,o){const s=()=>{se(c(e)).forEach(i=>{i&&se(c(t)).forEach(h=>qe(i,h,n,o))})};typeof e=="function"?L(s):Be(s)}var Ke=He();function Ge(){return We(Ke)}function Ze(){const e=Ge();if(e===void 0)throw new Error("[kobalte]: `useDomCollectionContext` must be used within a `DomCollectionProvider` component");return e}function be(e,t){return!!(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING)}function Je(e,t){var s;const n=t.ref();if(!n)return-1;let o=e.length;if(!o)return-1;for(;o--;){const i=(s=e[o])==null?void 0:s.ref();if(i&&be(i,n))return o+1}return 0}function Qe(e){const t=e.map((o,s)=>[s,o]);let n=!1;return t.sort(([o,s],[i,h])=>{const g=s.ref(),l=h.ref();return g===l||!g||!l?0:be(g,l)?(o>i&&(n=!0),-1):(o<i&&(n=!0),1)}),n?t.map(([o,s])=>s):e}function we(e,t){const n=Qe(e);e!==n&&t(n)}function et(e){var s,i;const t=e[0],n=(s=e[e.length-1])==null?void 0:s.ref();let o=(i=t==null?void 0:t.ref())==null?void 0:i.parentElement;for(;o;){if(n&&o.contains(n))return o;o=o.parentElement}return ge(o).body}function tt(e,t){L(()=>{const n=setTimeout(()=>{we(e(),t)});k(()=>clearTimeout(n))})}function nt(e,t){if(typeof IntersectionObserver!="function"){tt(e,t);return}let n=[];L(()=>{const o=()=>{const h=!!n.length;n=e(),h&&we(e(),t)},s=et(e()),i=new IntersectionObserver(o,{root:s});for(const h of e()){const g=h.ref();g&&i.observe(g)}k(()=>i.disconnect())})}function Dt(e={}){const[t,n]=De({value:()=>c(e.items),onChange:i=>{var h;return(h=e.onItemsChange)==null?void 0:h.call(e,i)}});nt(t,n);const o=i=>(n(h=>{const g=Je(h,i);return ke(h,i,g)}),()=>{n(h=>{const g=h.filter(l=>l.ref()!==i.ref());return h.length===g.length?h:g})});return{DomCollectionProvider:i=>ze(Ke.Provider,{value:{registerItem:o},get children(){return i.children}})}}function It(e){const t=Ze(),n=ye({shouldRegisterItem:!0},e);L(()=>{if(!n.shouldRegisterItem)return;const o=t.registerItem(n.getItem());k(o)})}function Ee(e){let t=e.startIndex??0;const n=e.startLevel??0,o=[],s=l=>{if(l==null)return"";const r=e.getKey??"key",f=_(r)?l[r]:r(l);return f!=null?String(f):""},i=l=>{if(l==null)return"";const r=e.getTextValue??"textValue",f=_(r)?l[r]:r(l);return f!=null?String(f):""},h=l=>{if(l==null)return!1;const r=e.getDisabled??"disabled";return(_(r)?l[r]:r(l))??!1},g=l=>{var r;if(l!=null)return _(e.getSectionChildren)?l[e.getSectionChildren]:(r=e.getSectionChildren)==null?void 0:r.call(e,l)};for(const l of e.dataSource){if(_(l)||pe(l)){o.push({type:"item",rawValue:l,key:String(l),textValue:String(l),disabled:h(l),level:n,index:t}),t++;continue}if(g(l)!=null){o.push({type:"section",rawValue:l,key:"",textValue:"",disabled:!1,level:n,index:t}),t++;const r=g(l)??[];if(r.length>0){const f=Ee({dataSource:r,getKey:e.getKey,getTextValue:e.getTextValue,getDisabled:e.getDisabled,getSectionChildren:e.getSectionChildren,startIndex:t,startLevel:n+1});o.push(...f),t+=f.length}}else o.push({type:"item",rawValue:l,key:s(l),textValue:i(l),disabled:h(l),level:n,index:t}),t++}return o}function ot(e,t=[]){return P(()=>{const n=Ee({dataSource:c(e.dataSource),getKey:c(e.getKey),getTextValue:c(e.getTextValue),getDisabled:c(e.getDisabled),getSectionChildren:c(e.getSectionChildren)});for(let o=0;o<t.length;o++)t[o]();return e.factory(n)})}var p=class Te extends Set{constructor(n,o,s){super(n);M(this,"anchorKey");M(this,"currentKey");n instanceof Te?(this.anchorKey=o||n.anchorKey,this.currentKey=s||n.currentKey):(this.anchorKey=o,this.currentKey=s)}};function st(e){const[t,n]=xe(e);return[()=>t()??new p,n]}function Fe(e){return Ne()?e.altKey:e.ctrlKey}function V(e){return Ve()?e.metaKey:e.ctrlKey}function ie(e){return new p(e)}function it(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function lt(e){const t=ye({selectionMode:"none",selectionBehavior:"toggle"},e),[n,o]=O(!1),[s,i]=O(),h=P(()=>{const v=c(t.selectedKeys);return v!=null?ie(v):v}),g=P(()=>{const v=c(t.defaultSelectedKeys);return v!=null?ie(v):new p}),[l,r]=st({value:h,defaultValue:g,onChange:v=>{var a;return(a=t.onSelectionChange)==null?void 0:a.call(t,v)}}),[f,b]=O(c(t.selectionBehavior)),S=()=>c(t.selectionMode),T=()=>c(t.disallowEmptySelection)??!1,d=v=>{(c(t.allowDuplicateSelectionEvents)||!it(v,l()))&&r(v)};return L(()=>{const v=l();c(t.selectionBehavior)==="replace"&&f()==="toggle"&&typeof v=="object"&&v.size===0&&b("replace")}),L(()=>{b(c(t.selectionBehavior)??"toggle")}),{selectionMode:S,disallowEmptySelection:T,selectionBehavior:f,setSelectionBehavior:b,isFocused:n,setFocused:o,focusedKey:s,setFocusedKey:i,selectedKeys:l,setSelectedKeys:d}}function rt(e){const[t,n]=O(""),[o,s]=O(-1);return{typeSelectHandlers:{onKeyDown:h=>{var S;if(c(e.isDisabled))return;const g=c(e.keyboardDelegate),l=c(e.selectionManager);if(!g.getKeyForSearch)return;const r=ct(h.key);if(!r||h.ctrlKey||h.metaKey)return;r===" "&&t().trim().length>0&&(h.preventDefault(),h.stopPropagation());let f=n(T=>T+r),b=g.getKeyForSearch(f,l.focusedKey())??g.getKeyForSearch(f);b==null&&at(f)&&(f=f[0],b=g.getKeyForSearch(f,l.focusedKey())??g.getKeyForSearch(f)),b!=null&&(l.setFocusedKey(b),(S=e.onTypeSelect)==null||S.call(e,b)),clearTimeout(o()),s(window.setTimeout(()=>n(""),500))}}}}function ct(e){return e.length===1||!/^[A-Z]/i.test(e)?e:""}function at(e){return e.split("").every(t=>t===e[0])}function ut(e,t,n){const s=me({selectOnFocus:()=>c(e.selectionManager).selectionBehavior()==="replace"},e),i=()=>(n==null?void 0:n())??t(),{direction:h}=Ie();let g={top:0,left:0};Xe(()=>c(s.isVirtualized)?void 0:i(),"scroll",()=>{const a=i();a&&(g={top:a.scrollTop,left:a.scrollLeft})});const{typeSelectHandlers:l}=rt({isDisabled:()=>c(s.disallowTypeAhead),keyboardDelegate:()=>c(s.keyboardDelegate),selectionManager:()=>c(s.selectionManager)}),r=()=>c(s.orientation)??"vertical",f=a=>{var N,X,G,Z,J,Q,ee,te;Oe(a,l.onKeyDown),a.altKey&&a.key==="Tab"&&a.preventDefault();const m=t();if(!(m!=null&&m.contains(a.target)))return;const u=c(s.selectionManager),w=c(s.selectOnFocus),F=K=>{K!=null&&(u.setFocusedKey(K),a.shiftKey&&u.selectionMode()==="multiple"?u.extendSelection(K):w&&!Fe(a)&&u.replaceSelection(K))},y=c(s.keyboardDelegate),A=c(s.shouldFocusWrap),E=u.focusedKey();switch(a.key){case(r()==="vertical"?"ArrowDown":"ArrowRight"):{if(y.getKeyBelow){a.preventDefault();let K;E!=null?K=y.getKeyBelow(E):K=(N=y.getFirstKey)==null?void 0:N.call(y),K==null&&A&&(K=(X=y.getFirstKey)==null?void 0:X.call(y,E)),F(K)}break}case(r()==="vertical"?"ArrowUp":"ArrowLeft"):{if(y.getKeyAbove){a.preventDefault();let K;E!=null?K=y.getKeyAbove(E):K=(G=y.getLastKey)==null?void 0:G.call(y),K==null&&A&&(K=(Z=y.getLastKey)==null?void 0:Z.call(y,E)),F(K)}break}case(r()==="vertical"?"ArrowLeft":"ArrowUp"):{if(y.getKeyLeftOf){a.preventDefault();const K=h()==="rtl";let D;E!=null?D=y.getKeyLeftOf(E):D=K?(J=y.getFirstKey)==null?void 0:J.call(y):(Q=y.getLastKey)==null?void 0:Q.call(y),F(D)}break}case(r()==="vertical"?"ArrowRight":"ArrowDown"):{if(y.getKeyRightOf){a.preventDefault();const K=h()==="rtl";let D;E!=null?D=y.getKeyRightOf(E):D=K?(ee=y.getLastKey)==null?void 0:ee.call(y):(te=y.getFirstKey)==null?void 0:te.call(y),F(D)}break}case"Home":if(y.getFirstKey){a.preventDefault();const K=y.getFirstKey(E,V(a));K!=null&&(u.setFocusedKey(K),V(a)&&a.shiftKey&&u.selectionMode()==="multiple"?u.extendSelection(K):w&&u.replaceSelection(K))}break;case"End":if(y.getLastKey){a.preventDefault();const K=y.getLastKey(E,V(a));K!=null&&(u.setFocusedKey(K),V(a)&&a.shiftKey&&u.selectionMode()==="multiple"?u.extendSelection(K):w&&u.replaceSelection(K))}break;case"PageDown":if(y.getKeyPageBelow&&E!=null){a.preventDefault();const K=y.getKeyPageBelow(E);F(K)}break;case"PageUp":if(y.getKeyPageAbove&&E!=null){a.preventDefault();const K=y.getKeyPageAbove(E);F(K)}break;case"a":V(a)&&u.selectionMode()==="multiple"&&c(s.disallowSelectAll)!==!0&&(a.preventDefault(),u.selectAll());break;case"Escape":a.defaultPrevented||(a.preventDefault(),c(s.disallowEmptySelection)||u.clearSelection());break;case"Tab":if(!c(s.allowsTabNavigation)){if(a.shiftKey)m.focus();else{const K=Pe(m,{tabbable:!0});let D,B;do B=K.lastChild(),B&&(D=B);while(B);D&&!D.contains(document.activeElement)&&C(D)}break}}},b=a=>{var F,y;const m=c(s.selectionManager),u=c(s.keyboardDelegate),w=c(s.selectOnFocus);if(m.isFocused()){a.currentTarget.contains(a.target)||m.setFocused(!1);return}if(a.currentTarget.contains(a.target)){if(m.setFocused(!0),m.focusedKey()==null){const A=N=>{N!=null&&(m.setFocusedKey(N),w&&m.replaceSelection(N))},E=a.relatedTarget;E&&a.currentTarget.compareDocumentPosition(E)&Node.DOCUMENT_POSITION_FOLLOWING?A(m.lastSelectedKey()??((F=u.getLastKey)==null?void 0:F.call(u))):A(m.firstSelectedKey()??((y=u.getFirstKey)==null?void 0:y.call(u)))}else if(!c(s.isVirtualized)){const A=i();if(A){A.scrollTop=g.top,A.scrollLeft=g.left;const E=A.querySelector(`[data-key="${m.focusedKey()}"]`);E&&(C(E),ne(A,E))}}}},S=a=>{const m=c(s.selectionManager);a.currentTarget.contains(a.relatedTarget)||m.setFocused(!1)},T=a=>{i()===a.target&&a.preventDefault()},d=()=>{var A,E;const a=c(s.autoFocus);if(!a)return;const m=c(s.selectionManager),u=c(s.keyboardDelegate);let w;a==="first"&&(w=(A=u.getFirstKey)==null?void 0:A.call(u)),a==="last"&&(w=(E=u.getLastKey)==null?void 0:E.call(u));const F=m.selectedKeys();F.size&&(w=F.values().next().value),m.setFocused(!0),m.setFocusedKey(w);const y=t();y&&w==null&&!c(s.shouldUseVirtualFocus)&&C(y)};return $e(()=>{s.deferAutoFocus?setTimeout(d,0):d()}),L(Se([i,()=>c(s.isVirtualized),()=>c(s.selectionManager).focusedKey()],a=>{var F;const[m,u,w]=a;if(u)w&&((F=s.scrollToKey)==null||F.call(s,w));else if(w&&m){const y=m.querySelector(`[data-key="${w}"]`);y&&ne(m,y)}})),{tabIndex:P(()=>{if(!c(s.shouldUseVirtualFocus))return c(s.selectionManager).focusedKey()==null?0:-1}),onKeyDown:f,onMouseDown:T,onFocusIn:b,onFocusOut:S}}function xt(e,t){const n=()=>c(e.selectionManager),o=()=>c(e.key),s=()=>c(e.shouldUseVirtualFocus),i=u=>{n().selectionMode()!=="none"&&(n().selectionMode()==="single"?n().isSelected(o())&&!n().disallowEmptySelection()?n().toggleSelection(o()):n().replaceSelection(o()):u!=null&&u.shiftKey?n().extendSelection(o()):n().selectionBehavior()==="toggle"||V(u)||"pointerType"in u&&u.pointerType==="touch"?n().toggleSelection(o()):n().replaceSelection(o()))},h=()=>n().isSelected(o()),g=()=>c(e.disabled)||n().isDisabled(o()),l=()=>!g()&&n().canSelectItem(o());let r=null;const f=u=>{l()&&(r=u.pointerType,u.pointerType==="mouse"&&u.button===0&&!c(e.shouldSelectOnPressUp)&&i(u))},b=u=>{l()&&u.pointerType==="mouse"&&u.button===0&&c(e.shouldSelectOnPressUp)&&c(e.allowsDifferentPressOrigin)&&i(u)},S=u=>{l()&&(c(e.shouldSelectOnPressUp)&&!c(e.allowsDifferentPressOrigin)||r!=="mouse")&&i(u)},T=u=>{!l()||!["Enter"," "].includes(u.key)||(Fe(u)?n().toggleSelection(o()):i(u))},d=u=>{g()&&u.preventDefault()},v=u=>{const w=t();s()||g()||!w||u.target===w&&n().setFocusedKey(o())},a=P(()=>{if(!(s()||g()))return o()===n().focusedKey()?0:-1}),m=P(()=>c(e.virtualized)?void 0:o());return L(Se([t,o,s,()=>n().focusedKey(),()=>n().isFocused()],([u,w,F,y,A])=>{u&&w===y&&A&&!F&&document.activeElement!==u&&(e.focus?e.focus():C(u))})),{isSelected:h,isDisabled:g,allowsSelection:l,tabIndex:a,dataKey:m,onPointerDown:f,onPointerUp:b,onClick:S,onKeyDown:T,onMouseDown:d,onFocus:v}}var ft=class{constructor(e,t){M(this,"collection");M(this,"state");this.collection=e,this.state=t}selectionMode(){return this.state.selectionMode()}disallowEmptySelection(){return this.state.disallowEmptySelection()}selectionBehavior(){return this.state.selectionBehavior()}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}isFocused(){return this.state.isFocused()}setFocused(e){this.state.setFocused(e)}focusedKey(){return this.state.focusedKey()}setFocusedKey(e){(e==null||this.collection().getItem(e))&&this.state.setFocusedKey(e)}selectedKeys(){return this.state.selectedKeys()}isSelected(e){if(this.state.selectionMode()==="none")return!1;const t=this.getKey(e);return t==null?!1:this.state.selectedKeys().has(t)}isEmpty(){return this.state.selectedKeys().size===0}isSelectAll(){if(this.isEmpty())return!1;const e=this.state.selectedKeys();return this.getAllSelectableKeys().every(t=>e.has(t))}firstSelectedKey(){let e;for(const t of this.state.selectedKeys()){const n=this.collection().getItem(t),o=(n==null?void 0:n.index)!=null&&(e==null?void 0:e.index)!=null&&n.index<e.index;(!e||o)&&(e=n)}return e==null?void 0:e.key}lastSelectedKey(){let e;for(const t of this.state.selectedKeys()){const n=this.collection().getItem(t),o=(n==null?void 0:n.index)!=null&&(e==null?void 0:e.index)!=null&&n.index>e.index;(!e||o)&&(e=n)}return e==null?void 0:e.key}extendSelection(e){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"){this.replaceSelection(e);return}const t=this.getKey(e);if(t==null)return;const n=this.state.selectedKeys(),o=n.anchorKey||t,s=new p(n,o,t);for(const i of this.getKeyRange(o,n.currentKey||t))s.delete(i);for(const i of this.getKeyRange(t,o))this.canSelectItem(i)&&s.add(i);this.state.setSelectedKeys(s)}getKeyRange(e,t){const n=this.collection().getItem(e),o=this.collection().getItem(t);return n&&o?n.index!=null&&o.index!=null&&n.index<=o.index?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){const n=[];let o=e;for(;o!=null;){const s=this.collection().getItem(o);if(s&&s.type==="item"&&n.push(o),o===t)return n;o=this.collection().getKeyAfter(o)}return[]}getKey(e){const t=this.collection().getItem(e);return t?!t||t.type!=="item"?null:t.key:e}toggleSelection(e){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}const t=this.getKey(e);if(t==null)return;const n=new p(this.state.selectedKeys());n.has(t)?n.delete(t):this.canSelectItem(t)&&(n.add(t),n.anchorKey=t,n.currentKey=t),!(this.disallowEmptySelection()&&n.size===0)&&this.state.setSelectedKeys(n)}replaceSelection(e){if(this.selectionMode()==="none")return;const t=this.getKey(e);if(t==null)return;const n=this.canSelectItem(t)?new p([t],t,t):new p;this.state.setSelectedKeys(n)}setSelectedKeys(e){if(this.selectionMode()==="none")return;const t=new p;for(const n of e){const o=this.getKey(n);if(o!=null&&(t.add(o),this.selectionMode()==="single"))break}this.state.setSelectedKeys(t)}selectAll(){this.selectionMode()==="multiple"&&this.state.setSelectedKeys(new Set(this.getAllSelectableKeys()))}clearSelection(){const e=this.state.selectedKeys();!this.disallowEmptySelection()&&e.size>0&&this.state.setSelectedKeys(new p)}toggleSelectAll(){this.isSelectAll()?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode()!=="none"&&(this.selectionMode()==="single"?this.isSelected(e)&&!this.disallowEmptySelection()?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior()==="toggle"||t&&t.pointerType==="touch"?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys())return!0;const t=this.selectedKeys();if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;for(const n of t)if(!e.has(n))return!1;return!0}canSelectItem(e){if(this.state.selectionMode()==="none")return!1;const t=this.collection().getItem(e);return t!=null&&!t.disabled}isDisabled(e){const t=this.collection().getItem(e);return!t||t.disabled}getAllSelectableKeys(){const e=[];return(n=>{for(;n!=null;){if(this.canSelectItem(n)){const o=this.collection().getItem(n);if(!o)continue;o.type==="item"&&e.push(n)}n=this.collection().getKeyAfter(n)}})(this.collection().getFirstKey()),e}},le=class{constructor(e){M(this,"keyMap",new Map);M(this,"iterable");M(this,"firstKey");M(this,"lastKey");this.iterable=e;for(const o of e)this.keyMap.set(o.key,o);if(this.keyMap.size===0)return;let t,n=0;for(const[o,s]of this.keyMap)t?(t.nextKey=o,s.prevKey=t.key):(this.firstKey=o,s.prevKey=void 0),s.type==="item"&&(s.index=n++),t=s,t.nextKey=void 0;this.lastKey=t.key}*[Symbol.iterator](){yield*this.iterable}getSize(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){var t;return(t=this.keyMap.get(e))==null?void 0:t.prevKey}getKeyAfter(e){var t;return(t=this.keyMap.get(e))==null?void 0:t.nextKey}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)}at(e){const t=[...this.getKeys()];return this.getItem(t[e])}};function Ct(e){const t=lt(e),o=ot({dataSource:()=>c(e.dataSource),getKey:()=>c(e.getKey),getTextValue:()=>c(e.getTextValue),getDisabled:()=>c(e.getDisabled),getSectionChildren:()=>c(e.getSectionChildren),factory:i=>e.filter?new le(e.filter(i)):new le(i)},[()=>e.filter]),s=new ft(o,t);return je(()=>{const i=t.focusedKey();i!=null&&!o().getItem(i)&&t.setFocusedKey(void 0)}),{collection:o,selectionManager:()=>s}}var dt=class{constructor(e,t,n){M(this,"collection");M(this,"ref");M(this,"collator");this.collection=e,this.ref=t,this.collator=n}getKeyBelow(e){let t=this.collection().getKeyAfter(e);for(;t!=null;){const n=this.collection().getItem(t);if(n&&n.type==="item"&&!n.disabled)return t;t=this.collection().getKeyAfter(t)}}getKeyAbove(e){let t=this.collection().getKeyBefore(e);for(;t!=null;){const n=this.collection().getItem(t);if(n&&n.type==="item"&&!n.disabled)return t;t=this.collection().getKeyBefore(t)}}getFirstKey(){let e=this.collection().getFirstKey();for(;e!=null;){const t=this.collection().getItem(e);if(t&&t.type==="item"&&!t.disabled)return e;e=this.collection().getKeyAfter(e)}}getLastKey(){let e=this.collection().getLastKey();for(;e!=null;){const t=this.collection().getItem(e);if(t&&t.type==="item"&&!t.disabled)return e;e=this.collection().getKeyBefore(e)}}getItem(e){var t,n;return((n=(t=this.ref)==null?void 0:t.call(this))==null?void 0:n.querySelector(`[data-key="${e}"]`))??null}getKeyPageAbove(e){var i;const t=(i=this.ref)==null?void 0:i.call(this);let n=this.getItem(e);if(!t||!n)return;const o=Math.max(0,n.offsetTop+n.offsetHeight-t.offsetHeight);let s=e;for(;s&&n&&n.offsetTop>o;)s=this.getKeyAbove(s),n=s!=null?this.getItem(s):null;return s}getKeyPageBelow(e){var i;const t=(i=this.ref)==null?void 0:i.call(this);let n=this.getItem(e);if(!t||!n)return;const o=Math.min(t.scrollHeight,n.offsetTop-n.offsetHeight+t.offsetHeight);let s=e;for(;s&&n&&n.offsetTop<o;)s=this.getKeyBelow(s),n=s!=null?this.getItem(s):null;return s}getKeyForSearch(e,t){var s;const n=(s=this.collator)==null?void 0:s.call(this);if(!n)return;let o=t!=null?this.getKeyBelow(t):this.getFirstKey();for(;o!=null;){const i=this.collection().getItem(o);if(i){const h=i.textValue.slice(0,e.length);if(i.textValue&&n.compare(h,e)===0)return o}o=this.getKeyBelow(o)}}};function kt(e,t,n){const o=Ce({usage:"search",sensitivity:"base"}),s=P(()=>{const i=c(e.keyboardDelegate);return i||new dt(e.collection,t,o)});return ut({selectionManager:()=>c(e.selectionManager),keyboardDelegate:s,autoFocus:()=>c(e.autoFocus),deferAutoFocus:()=>c(e.deferAutoFocus),shouldFocusWrap:()=>c(e.shouldFocusWrap),disallowEmptySelection:()=>c(e.disallowEmptySelection),selectOnFocus:()=>c(e.selectOnFocus),disallowTypeAhead:()=>c(e.disallowTypeAhead),shouldUseVirtualFocus:()=>c(e.shouldUseVirtualFocus),allowsTabNavigation:()=>c(e.allowsTabNavigation),isVirtualized:()=>c(e.isVirtualized),scrollToKey:i=>{var h;return(h=c(e.scrollToKey))==null?void 0:h(i)},orientation:()=>c(e.orientation)},t,n)}var W="focusScope.autoFocusOnMount",$="focusScope.autoFocusOnUnmount",re={bubbles:!1,cancelable:!0},ce={stack:[],active(){return this.stack[0]},add(e){var t;e!==this.active()&&((t=this.active())==null||t.pause()),this.stack=oe(this.stack,e),this.stack.unshift(e)},remove(e){var t;this.stack=oe(this.stack,e),(t=this.active())==null||t.resume()}};function pt(e,t){const[n,o]=O(!1),s={pause(){o(!0)},resume(){o(!1)}};let i=null;const h=d=>{var v;return(v=e.onMountAutoFocus)==null?void 0:v.call(e,d)},g=d=>{var v;return(v=e.onUnmountAutoFocus)==null?void 0:v.call(e,d)},l=()=>ge(t()),r=()=>{const d=l().createElement("span");return d.setAttribute("data-focus-trap",""),d.tabIndex=0,Object.assign(d.style,ve),d},f=()=>{const d=t();return d?Re(d,!0).filter(v=>!v.hasAttribute("data-focus-trap")):[]},b=()=>{const d=f();return d.length>0?d[0]:null},S=()=>{const d=f();return d.length>0?d[d.length-1]:null},T=()=>{const d=t();if(!d)return!1;const v=U(d);return!v||z(d,v)?!1:_e(v)};L(()=>{const d=t();if(!d)return;ce.add(s);const v=U(d);if(!z(d,v)){const m=new CustomEvent(W,re);d.addEventListener(W,h),d.dispatchEvent(m),m.defaultPrevented||setTimeout(()=>{C(b()),U(d)===v&&C(d)},0)}k(()=>{d.removeEventListener(W,h),setTimeout(()=>{const m=new CustomEvent($,re);T()&&m.preventDefault(),d.addEventListener($,g),d.dispatchEvent(m),m.defaultPrevented||C(v??l().body),d.removeEventListener($,g),ce.remove(s)},0)})}),L(()=>{const d=t();if(!d||!c(e.trapFocus)||n())return;const v=m=>{const u=m.target;u!=null&&u.closest(`[${Y}]`)||(z(d,u)?i=u:C(i))},a=m=>{const w=m.relatedTarget??U(d);w!=null&&w.closest(`[${Y}]`)||z(d,w)||C(i)};l().addEventListener("focusin",v),l().addEventListener("focusout",a),k(()=>{l().removeEventListener("focusin",v),l().removeEventListener("focusout",a)})}),L(()=>{const d=t();if(!d||!c(e.trapFocus)||n())return;const v=r();d.insertAdjacentElement("afterbegin",v);const a=r();d.insertAdjacentElement("beforeend",a);function m(w){const F=b(),y=S();w.relatedTarget===F?C(y):C(F)}v.addEventListener("focusin",m),a.addEventListener("focusin",m);const u=new MutationObserver(w=>{for(const F of w)F.previousSibling===a&&(a.remove(),d.insertAdjacentElement("beforeend",a)),F.nextSibling===v&&(v.remove(),d.insertAdjacentElement("afterbegin",v))});u.observe(d,{childList:!0,subtree:!1}),k(()=>{v.removeEventListener("focusin",m),a.removeEventListener("focusin",m),v.remove(),a.remove(),u.disconnect()})})}var Ae=7e3,j=null,ht="data-live-announcer";function Ot(e,t="assertive",n=Ae){j||(j=new yt),j.announce(e,t,n)}var yt=class{constructor(){M(this,"node");M(this,"assertiveLog");M(this,"politeLog");this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,ve),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node)}createLog(e){const t=document.createElement("div");return t.setAttribute("role","log"),t.setAttribute("aria-live",e),t.setAttribute("aria-relevant","additions"),t}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(e,t="assertive",n=Ae){if(!this.node)return;const o=document.createElement("div");o.textContent=e,t==="assertive"?this.assertiveLog.appendChild(o):this.politeLog.appendChild(o),e!==""&&setTimeout(()=>{o.remove()},n)}clear(e){this.node&&((!e||e==="assertive")&&(this.assertiveLog.innerHTML=""),(!e||e==="polite")&&(this.politeLog.innerHTML=""))}};function Pt(e){L(()=>{c(e.isDisabled)||k(gt(c(e.targets),c(e.root)))})}var R=new WeakMap,I=[];function gt(e,t=document.body){const n=new Set(e),o=new Set,s=l=>{for(const S of l.querySelectorAll(`[${ht}], [${Y}]`))n.add(S);const r=S=>{if(n.has(S)||S.parentElement&&o.has(S.parentElement)&&S.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(const T of n)if(S.contains(T))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},f=document.createTreeWalker(l,NodeFilter.SHOW_ELEMENT,{acceptNode:r}),b=r(l);if(b===NodeFilter.FILTER_ACCEPT&&i(l),b!==NodeFilter.FILTER_REJECT){let S=f.nextNode();for(;S!=null;)i(S),S=f.nextNode()}},i=l=>{const r=R.get(l)??0;l.getAttribute("aria-hidden")==="true"&&r===0||(r===0&&l.setAttribute("aria-hidden","true"),o.add(l),R.set(l,r+1))};I.length&&I[I.length-1].disconnect(),s(t);const h=new MutationObserver(l=>{for(const r of l)if(!(r.type!=="childList"||r.addedNodes.length===0)&&![...n,...o].some(f=>f.contains(r.target))){for(const f of r.removedNodes)f instanceof Element&&(n.delete(f),o.delete(f));for(const f of r.addedNodes)(f instanceof HTMLElement||f instanceof SVGElement)&&(f.dataset.liveAnnouncer==="true"||f.dataset.reactAriaTopLayer==="true")?n.add(f):f instanceof Element&&s(f)}});h.observe(t,{childList:!0,subtree:!0});const g={observe(){h.observe(t,{childList:!0,subtree:!0})},disconnect(){h.disconnect()}};return I.push(g),()=>{h.disconnect();for(const l of o){const r=R.get(l);if(r==null)return;r===1?(l.removeAttribute("aria-hidden"),R.delete(l)):R.set(l,r-1)}g===I[I.length-1]?(I.pop(),I.length&&I[I.length-1].observe()):I.splice(I.indexOf(g),1)}}var q=(e,t)=>{if(e.contains(t))return!0;let n=t;for(;n;){if(n===e)return!0;n=n._$host??n.parentElement}return!1},H=new Map,vt=e=>{L(()=>{const t=x(e.style)??{},n=x(e.properties)??[],o={};for(const i in t)o[i]=e.element.style[i];const s=H.get(e.key);s?s.activeCount++:H.set(e.key,{activeCount:1,originalStyles:o,properties:n.map(i=>i.key)}),Object.assign(e.element.style,e.style);for(const i of n)e.element.style.setProperty(i.key,i.value);k(()=>{var h;const i=H.get(e.key);if(i){if(i.activeCount!==1){i.activeCount--;return}H.delete(e.key);for(const[g,l]of Object.entries(i.originalStyles))e.element.style[g]=l;for(const g of i.properties)e.element.style.removeProperty(g);e.element.style.length===0&&e.element.removeAttribute("style"),(h=e.cleanup)==null||h.call(e)}})})},ae=vt,mt=(e,t)=>{switch(t){case"x":return[e.clientWidth,e.scrollLeft,e.scrollWidth];case"y":return[e.clientHeight,e.scrollTop,e.scrollHeight]}},St=(e,t)=>{const n=getComputedStyle(e),o=t==="x"?n.overflowX:n.overflowY;return o==="auto"||o==="scroll"||e.tagName==="HTML"&&o==="visible"},Kt=(e,t,n)=>{const o=t==="x"&&window.getComputedStyle(e).direction==="rtl"?-1:1;let s=e,i=0,h=0,g=!1;do{const[l,r,f]=mt(s,t),b=f-l-o*r;(r!==0||b!==0)&&St(s,t)&&(i+=b,h+=r),s===(n??document.documentElement)?g=!0:s=s._$host??s.parentElement}while(s&&!g);return[i,h]},[ue,fe]=O([]),bt=e=>ue().indexOf(e)===ue().length-1,wt=e=>{const t=me({element:null,enabled:!0,hideScrollbar:!0,preventScrollbarShift:!0,preventScrollbarShiftMode:"padding",restoreScrollPosition:!0,allowPinchZoom:!1},e),n=Ye();let o=[0,0],s=null,i=null;L(()=>{x(t.enabled)&&(fe(r=>[...r,n]),k(()=>{fe(r=>r.filter(f=>f!==n))}))}),L(()=>{if(!x(t.enabled)||!x(t.hideScrollbar))return;const{body:r}=document,f=window.innerWidth-r.offsetWidth;if(x(t.preventScrollbarShift)){const b={overflow:"hidden"},S=[];f>0&&(x(t.preventScrollbarShiftMode)==="padding"?b.paddingRight=`calc(${window.getComputedStyle(r).paddingRight} + ${f}px)`:b.marginRight=`calc(${window.getComputedStyle(r).marginRight} + ${f}px)`,S.push({key:"--scrollbar-width",value:`${f}px`}));const T=window.scrollY,d=window.scrollX;ae({key:"prevent-scroll",element:r,style:b,properties:S,cleanup:()=>{x(t.restoreScrollPosition)&&f>0&&window.scrollTo(d,T)}})}else ae({key:"prevent-scroll",element:r,style:{overflow:"hidden"}})}),L(()=>{!bt(n)||!x(t.enabled)||(document.addEventListener("wheel",g,{passive:!1}),document.addEventListener("touchstart",h,{passive:!1}),document.addEventListener("touchmove",l,{passive:!1}),k(()=>{document.removeEventListener("wheel",g),document.removeEventListener("touchstart",h),document.removeEventListener("touchmove",l)}))});const h=r=>{o=de(r),s=null,i=null},g=r=>{const f=r.target,b=x(t.element),S=Et(r),T=Math.abs(S[0])>Math.abs(S[1])?"x":"y",d=T==="x"?S[0]:S[1],v=he(f,T,d,b);let a;b&&q(b,f)?a=!v:a=!0,a&&r.cancelable&&r.preventDefault()},l=r=>{const f=x(t.element),b=r.target;let S;if(r.touches.length===2)S=!x(t.allowPinchZoom);else{if(s==null||i===null){const T=de(r).map((v,a)=>o[a]-v),d=Math.abs(T[0])>Math.abs(T[1])?"x":"y";s=d,i=d==="x"?T[0]:T[1]}if(b.type==="range")S=!1;else{const T=he(b,s,i,f);f&&q(f,b)?S=!T:S=!0}}S&&r.cancelable&&r.preventDefault()}},Et=e=>[e.deltaX,e.deltaY],de=e=>e.changedTouches[0]?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0],he=(e,t,n,o)=>{const s=o!==null&&q(o,e),[i,h]=Kt(e,t,s?o:void 0);return!(n>0&&Math.abs(i)<=1||n<0&&Math.abs(h)<1)},Tt=wt,Nt=Tt;export{dt as L,p as S,Dt as a,It as b,ut as c,xt as d,Ct as e,Pt as f,pt as g,kt as h,it as i,Ot as j,Nt as s,Ge as u};
