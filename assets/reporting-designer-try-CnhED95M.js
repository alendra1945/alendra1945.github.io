const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/recursive-element-Bs2End0v.js","assets/index-CMTG8_9X.js","assets/index-BlOe3NaJ.css","assets/dynamic-06kB98jf.js","assets/index-Vcq4gwWv.js","assets/index-MDrvsZSi.js","assets/T4C3DMHT-D8OhLsJw.js","assets/index-sX09ViXM.js","assets/index-BXRGDR3V.js","assets/dropdown-menu-lVhqYRWv.js","assets/button-DQGJtAlF.js","assets/use-local-storage-Cd7b_o2y.js","assets/base-data-dummy-Bgz3IE-A.js","assets/toolbar-h4yvglv0.js","assets/hint-BmH4jAdq.js","assets/layer-panel-C1gib3EI.js","assets/context-menu-bIrEluwG.js","assets/panel-resizer-Da6JWkAw.js","assets/index-D4opl7EG.js","assets/setting-panel-JtRKRLrb.js","assets/use-supported-ByWhr63Z.js"])))=>i.map(i=>d[i]);
var Ot=Object.defineProperty;var At=(a,r,o)=>r in a?Ot(a,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[r]=o;var oe=(a,r,o)=>At(a,typeof r!="symbol"?r+"":r,o);import{m as ie,e as ge,f as re,g as ee,L as C,l as T,o as me,c as h,p as Ft,n as Bt,W as Ne,X as $t,h as xe,b as K,i as N,t as te,N as Se,O as we,u as de,S as Z,a as pe,Y as je,j as rt,F as Ht,Z as zt,$ as it,a0 as Xt,a1 as jt,a2 as Wt,d as ue,k as Ut,a3 as Yt,q as Gt}from"./index-CMTG8_9X.js";import{l as D,e as We,f as Kt,q as Re,t as se,u as Ue}from"./index-MDrvsZSi.js";import{B as ve}from"./button-DQGJtAlF.js";import{u as lt}from"./use-local-storage-Cd7b_o2y.js";import{d as Ye,a as Vt,b as Ge}from"./base-data-dummy-Bgz3IE-A.js";class Pe{constructor(r){oe(this,"x");oe(this,"y");oe(this,"width");oe(this,"height");this.x=Math.floor(r.x),this.y=Math.floor(r.y),this.width=Math.floor(r.width),this.height=Math.floor(r.height)}get rect(){return{x:this.x,y:this.y,width:this.width,height:this.height}}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get center(){return{x:this.x+this.width*.5,y:this.y+this.height*.5}}get corners(){return{topLeft:{x:this.left,y:this.top},topRight:{x:this.right,y:this.top},bottomRight:{x:this.left,y:this.bottom},bottomLeft:{x:this.right,y:this.bottom}}}}const ae=a=>{let r=new Pe(a.getBoundingClientRect());const{transform:o}=getComputedStyle(a);return o&&(r=qt(r,o)),r},qt=(a,r)=>{let o,n;if(r.startsWith("matrix3d(")){const e=r.slice(9,-1).split(/, /);o=+e[12],n=+e[13]}else if(r.startsWith("matrix(")){const e=r.slice(7,-1).split(/, /);o=+e[4],n=+e[5]}else o=0,n=0;return new Pe({...a,x:a.x-o,y:a.y-n})},Zt=()=>({x:0,y:0}),Na=(a,r)=>a.x===r.x&&a.y===r.y,Jt=(a,r)=>new Pe({...a,x:a.x+r.x,y:a.y+r.y}),Qt=(a,r)=>{const o=Math.max(a.top,r.top),n=Math.max(a.left,r.left),e=Math.min(a.right,r.right),l=Math.min(a.bottom,r.bottom),d=e-n,f=l-o;if(n<e&&o<l){const w=a.width*a.height,v=r.width*r.height,g=d*f;return g/(w+v-g)}return 0},Ke=(a,r)=>a.x===r.x&&a.y===r.y&&a.width===r.width&&a.height===r.height;function ea(a){return/<[a-z][\s\S]*>/i.test(a)}function Pa(a){if(!a||!ea(a))return a||"";const r=document.createElement("div");r.innerHTML=a||"";const o=r.textContent||r.innerText||"";return r.remove(),o}function ce(a){return a.ctrlKey||a.metaKey}const ta=(a,r="px")=>{if(typeof a=="number")return{value:a,unit:r};if(typeof a!="string")return;const o=parseFloat(a.match(/[+-]?([0-9]*[.])?[0-9]+/g)),n=[/px/,/mm/,/cm/,/in/],e=[];return n.forEach(l=>l.test(a)&&e.indexOf(l.exec(a)[0])==-1&&e.push(l.exec(a)[0])),{value:o,unit:e.length==1?e[0]:r}};function aa(a){const[r,o,n]=a.replace("rgb(","").replace(")","").split(",").map(e=>parseInt(e));return`#${[r,o,n].map(e=>e.toString(16).padStart(2,"0")).join("")}`}function Oa(a){return a?a!=null&&a.startsWith("rgb")?aa(a):!a.startsWith("#")&&a.match(/\b[a-fA-F0-9]{3,6}\b/g)?`#${a}`:a:null}function Aa(a){var g;const[r,o,n]=((g=a.replace("#","").match(/.{1,2}/g))==null?void 0:g.map(L=>parseInt(L,16)))||[0,0,0],e=Math.max(r,o,n),l=Math.min(r,o,n),d=e/255,f=e-l,w=e===0?0:f/e;return{h:(e===l?0:e===r?(o-n)/f+(o<n?6:0):e===o?(n-r)/f+2:(r-o)/f+4)*60,s:w,v:d}}function Fa(a,r,o){r/=100,o/=100,a/=360;let n=0,e=0,l=0,d=Math.floor(a*6),f=a*6-d,w=o*(1-r),v=o*(1-f*r),g=o*(1-(1-f)*r);switch(d%6){case 0:n=o,e=g,l=w;break;case 1:n=v,e=o,l=w;break;case 2:n=w,e=o,l=g;break;case 3:n=w,e=v,l=o;break;case 4:n=g,e=w,l=o;break;case 5:n=o,e=w,l=v;break}return n=Math.round(n*255),e=Math.round(e*255),l=Math.round(l*255),`#${[n,e,l].map(L=>L.toString(16).padStart(2,"0")).join("")}`}const Ba=(a,r,o)=>Math.min(o,Math.max(r,a));function $a(a){if(!a)return 0;if(typeof a=="number")return a;const r=Number(a.replace("px",""));return isNaN(r)?0:r}function X(a,r=!0){return a=r?Math.round(a):a,`${a}px`}const Ha=a=>({transform:`translate3d(${a.x}px, ${a.y}px, 0)`}),Ve=(a,r,o)=>{const n=a.slice();return n.splice(o,0,...n.splice(r,1)),n},za=(a,r,o,n=1)=>{const e=a.slice();return e.splice(o,0,...e.splice(r,n+1)),e};function Xa(a,r){const o=Object.assign({},a);return r.split(".").reduce((n,e)=>n?n[e]:null,o)}function _e({inputString:a,defaultInputUnit:r="px",convertionUnit:o="px"}){const n=ta(a,r),e=Object.freeze({px:1,mm:3.7795275591,cm:37.795275591,in:96}),l=Object.freeze({from_px:{to_px:1,to_mm:e.px/e.mm,to_cm:e.px/e.cm,to_in:e.px/e.in},from_mm:{to_mm:1,to_px:e.mm/e.px,to_cm:e.mm/e.cm,to_in:e.mm/e.in},from_cm:{to_cm:1,to_px:e.cm/e.px,to_mm:e.cm/e.mm,to_in:e.cm/e.in},from_in:{to_in:1,to_px:e.in/e.px,to_mm:e.in/e.mm,to_cm:e.in/e.cm}});return{value:n.value*l[`from_${n.unit}`][`to_${o}`],unit:o,error:[NaN,null,void 0].includes(n.value)}}var na=(a=>(a.Top="top",a.Right="right",a.Bottom="bottom",a.Left="left",a))(na||{}),M=(a=>(a.EDITING="editing",a.HEADER="header",a.FOOTER="footer",a.WATERMARK="watermark",a.PREVIEW="preview",a.PRINT="print",a))(M||{}),b=(a=>(a.SECTION="__body",a.TEXT="text",a.CONTAINER="container",a.TWO_COLUMN="2Col",a.IMAGE="image",a.TABLE="table",a.CHART="chart",a))(b||{});const ra="repeating-linear-gradient(45deg, rgba(180, 180, 180, 0.8) 0px, rgba(180, 180, 180, 0.8) 1px, rgba(255, 255, 255, 0.2) 0px, rgba(255, 255, 255, 0.2) 50%) 0% 0% / 16px 16px",qe={solid:"[&>div>table>thead>tr>th]:border-b [&>div>table>thead>tr>th]:border-[#888888] [&>div>table>tbody>tr>td]:border-b [&>div>table>tbody>tr>td]:border-[#dddddd] [&>div>table>tbody>tr:last-child>td]:border-[#aaaaaa]",dashed:"[&>div>table>thead>tr>th]:border-b [&>div>table>thead>tr>th]:border-[#888888] [&>div>table>tbody>tr>td]:border-b [&>div>table>tbody>tr>td]:border-[#dddddd] [&>div>table>tbody>tr:last-child>td]:border-[#aaaaaa] [&>div>table>thead>tr>th]:border-dashed [&>div>table>tbody>tr>td]:border-dashed","striped-row":"[&>div>table>tbody>tr:nth-child(2n-1)>td]:bg-[#f5f5f5]"};function P(a){switch(a){case b.TEXT:return{content:[],name:"Text",originalElement:"p",styles:{"font-size":"16px",height:"fit-content","min-width":"10px",width:"fit-content","max-width":"unset",display:"inline-block"},attributes:{},innerHTML:"Type Text",type:b.TEXT};case b.TABLE:return{content:[{id:D(),...P("simple-table-child"),name:"Table Head",originalElement:"thead",content:[{id:D(),...P("simple-table-child"),name:"Table Row",originalElement:"tr",content:[{id:D(),...P("simple-table-child"),name:"Table Cell",originalElement:"th",styles:{"text-align":"center","vertical-align":"top","padding-top":"10px","padding-bottom":"10px",color:"#333333","font-weight":"medium","font-size":"inherit"},content:[{id:D(),...P(b.TEXT),innerHTML:"No",styles:{"font-size":"11px",height:"fit-content","min-width":"10px",width:"fit-content","max-width":"unset",display:"inline-block"}}]},{id:D(),...P("simple-table-child"),name:"Table Cell",originalElement:"th",styles:{"text-align":"center","vertical-align":"top","padding-top":"10px","padding-bottom":"10px",color:"#333333","font-weight":"medium","font-size":"inherit"},content:[{id:D(),...P(b.TEXT),innerHTML:"Title Heading",styles:{"font-size":"11px",height:"fit-content","min-width":"10px",width:"fit-content","max-width":"unset",display:"inline-block"}}]}]}]},{id:D(),...P("simple-table-child"),name:"Table Body",originalElement:"tbody",content:[{id:D(),...P("simple-table-child"),name:"Table Row",originalElement:"tr",content:[{id:D(),...P("simple-table-child"),name:"Table Cell",originalElement:"td",styles:{"text-align":"center","vertical-align":"top","padding-top":"10px","padding-bottom":"10px",color:"#333333","font-weight":"normal","font-size":"inherit"},content:[{id:D(),...P(b.TEXT),innerHTML:"1",styles:{"font-size":"11px",height:"fit-content","min-width":"10px",width:"fit-content","max-width":"unset",display:"inline-block"}}]},{id:D(),...P("simple-table-child"),name:"Table Cell",originalElement:"td",styles:{"text-align":"center","vertical-align":"top","padding-top":"10px","padding-bottom":"10px",color:"#333333","font-weight":"normal","font-size":"inherit"},content:[{id:D(),...P(b.TEXT),innerHTML:"Text Cell",styles:{"font-size":"11px",height:"fit-content","min-width":"10px",width:"fit-content","max-width":"unset",display:"inline-block"}}]}]}]}],name:"Table",originalElement:"div",styles:{"font-size":"inherit",height:"fit-content","line-height":"14px","min-width":"10px",width:"100%"},attributes:{"data-table-style":"solid","data-table-strip":"1"},classes:`${qe.solid} ${qe["striped-row"]}`,type:b.TABLE};case b.CHART:return{content:[],name:"Chart",originalElement:"div",styles:{"font-size":"inherit",height:"200px","line-height":"14px","min-width":"10px",width:"100%"},attributes:{},type:b.CHART};case b.IMAGE:return{content:[],name:"Image",originalElement:"img",styles:{width:"100%",height:"200px","object-fit":"cover","flex-shrink":0,background:ra},attributes:{draggable:"false"},type:b.IMAGE};case b.CONTAINER:return{content:[],name:"Container",styles:{display:"flex","flex-direction":"column",width:"100%",height:"200px","flex-shrink":0,overflow:"hidden",background:"#ededed"},originalElement:"div",attributes:{},type:b.CONTAINER};case b.SECTION:return{content:[],name:"Section",originalElement:"div",styles:{display:"flex","flex-direction":"column",width:"100%",height:"100%","font-family":"Inter"},attributes:{"data-page-break":"1","data-page-header":"1","data-page-footer":"1","data-page-watermark":"1"},type:b.SECTION};case"container-header-footer":return{content:[],name:"Section",originalElement:"div",styles:{display:"flex","flex-direction":"column",width:"100%",height:"100%","font-family":"Inter"},attributes:{},type:b.SECTION};case"repeater":return{name:"Repeater",content:[],originalElement:"div",styles:{display:"flex","flex-direction":"column",width:"100%","flex-shrink":0,"min-height":"300px",overflow:"hidden"},attributes:{},isRepeaterElement:!0,type:b.CONTAINER};case"watermark":return{name:"Watermark",content:[{id:D(),...P(b.IMAGE),styles:{width:"11%",height:"77px","object-fit":"contain","flex-shrink":0,background:"","margin-bottom":"0px"},attributes:{draggable:"false"},dataKey:{key:"school_logo",type:"attribute",property:"src"}}],originalElement:"div",styles:{display:"flex","flex-direction":"column",width:"100%",height:"100%","font-family":"Inter",position:"absolute",top:0,bottom:0,left:0,right:0,"justify-content":"center","align-items":"center",opacity:.2},attributes:{},isRepeaterElement:!1,type:b.SECTION};case"simple-table-child":return{content:[],name:"Container",styles:{width:"fit-content",height:"fit-content","font-size":"inherit"},originalElement:"div",attributes:{"data-table-component":"true"},type:b.CONTAINER};default:return null}}const Ze=(a,r,o)=>{const n=a.transformed,e={ratio:0,droppable:null};for(const l of r){const d=Qt(n,l.layout);d>e.ratio?(e.ratio=d,e.droppable=l):d>0&&d===e.ratio&&l.id===o.activeDroppableId&&(e.droppable=l)}return e.droppable},ot={items:[{family:"Inter",variants:["100","100italic","200","200italic","300","300italic","400","400italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Roboto",variants:["regular","italic","500","500italic","700","700italic"]},{family:"Open Sans",variants:["regular","italic","300","300italic","600","600italic","700","700italic","800","800italic"]},{family:"Bebas Neue",variants:[]},{family:"DM Sans",variants:["regular","italic","300","300italic","600","600italic","700","700italic","800","800italic"]},{family:"Kalam",variants:["regular","italic","300","300italic","600","600italic","700","700italic","800","800italic"]},{family:"Oregano",variants:["regular","italic","300","300italic","600","600italic","700","700italic","800","800italic"]},{family:"Tangerine",variants:["regular","italic","300","300italic","600","600italic","700","700italic","800","800italic"]},{family:"Lato",variants:["regular","italic","100","100italic","300","300italic","700","700italic","900","900italic"]},{family:"Montserrat",variants:["regular","italic","100","100italic","200","200italic","300","300italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Hanken Grotesk",variants:["regular","italic","100","100italic","200","200italic","300","300italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Raleway",variants:["regular","italic","100","100italic","200","200italic","300","300italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Source Sans Pro",variants:["regular","italic","200","200italic","300","300italic","600","600italic","700","700italic","900","900italic"]},{family:"Oswald",variants:["regular","200","300","500","600","700"]},{family:"Poppins",variants:["regular","italic","200","200italic","300","300italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Ubuntu",variants:["regular","italic","300","300italic","500","500italic","700","700italic"]},{family:"Playfair Display",variants:["regular","italic","700","700italic","900","900italic"]},{family:"Noto Sans",variants:["regular","italic","700","700italic"]},{family:"Quicksand",variants:["regular","italic","300","300italic","500","500italic","700","700italic"]},{family:"Merriweather",variants:["regular","italic","700","700italic","900","900italic"]},{family:"Lora",variants:["regular","italic","500","500italic","600","600italic","700","700italic"]},{family:"Pacifico",variants:["regular"]},{family:"Comfortaa",variants:["regular"]},{family:"Dosis",variants:["regular","200","300","500","600","700","800"]},{family:"Montserrat Alternates",variants:["regular","italic","500","500italic","600","600italic","700","700italic","800","800italic"]},{family:"Work Sans",variants:["regular","italic","100","100italic","200","200italic","300","300italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Roboto Condensed",variants:["regular","italic","300","300italic","700","700italic"]},{family:"Josefin Sans",variants:["regular","italic","100","100italic","300","300italic","600","600italic","700","700italic"]},{family:"Indie Flower",variants:["regular"]},{family:"Dancing Script",variants:["regular","700"]},{family:"Archivo",variants:["regular","italic","500","500italic","600","600italic","700","700italic"]},{family:"Titillium Web",variants:["regular","italic","200","200italic","300","300italic","600","600italic","700","700italic","900","900italic"]},{family:"Exo",variants:["regular","italic","100","100italic","200","200italic","300","300italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Cabin",variants:["regular","italic","500","500italic","600","600italic","700","700italic"]},{family:"Yanone Kaffeesatz",variants:["regular","200","300","700"]},{family:"Lobster",variants:["regular"]},{family:"Arvo",variants:["regular","italic","700","700italic"]},{family:"PT Sans",variants:["regular","italic","700","700italic"]},{family:"Fira Sans",variants:["regular","italic","300","300italic","500","500italic","700","700italic"]},{family:"Bitter",variants:["regular","italic","700"]},{family:"Lobster Two",variants:["regular","italic","700","700italic"]},{family:"Merriweather Sans",variants:["regular","italic","300","300italic","700","700italic","800","800italic"]},{family:"Cabin Condensed",variants:["regular","500","600","700"]},{family:"Lato Latin",variants:["100","100italic","300","300italic","regular","italic","700","700italic","900","900italic"]},{family:"Source Code Pro",variants:["regular","200","300","500","600","700","900"]},{family:"Inconsolata",variants:["regular","700"]},{family:"Nunito",variants:["regular","italic","200","200italic","300","300italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"PT Serif",variants:["regular","italic","700","700italic"]},{family:"Cabin Sketch",variants:["regular","700"]},{family:"Righteous",variants:["regular"]},{family:"Amatic SC",variants:["regular","700"]},{family:"Droid Sans",variants:["regular","700"]},{family:"Fira Mono",variants:["regular","500","700"]},{family:"Quattrocento",variants:["regular","700"]},{family:"Archivo Black",variants:["regular"]},{family:"PT Sans Narrow",variants:["regular","700"]},{family:"Pacifico Latin",variants:["regular"]}]},ja=ot.items.filter(a=>a.variants.length>=3).map(a=>a.family),Oe=new Set,ia=a=>Oe.has(a),la=a=>{Oe.add(a)},oa=(a,r)=>new Promise(o=>{var n;if(!a||(typeof r!="string"&&(r=null),r=r||"400",r&&["100","200","300","400","500","600","700","800","900"].includes(r)&&(a=`${a}:${r}`),ia(a)))return o(a);la(a),(n=window.WebFont)==null||n.load({google:{families:[a],crossOrigin:"anonymous"},active:o(a)})}),Wa=a=>{const r=[{value:"400",label:"Regular"}];if(!a)return r;const o=ot.items.find(n=>n.family===a);return o?o.variants.filter(n=>!n.includes("italic")).map(n=>{switch(n){case"regular":return{value:"400",label:"Regular"};case"100":return{value:"100",label:"Thin"};case"200":return{value:"200",label:"Extra Light"};case"300":return{value:"300",label:"Light"};case"400":return{value:"400",label:"Regular"};case"500":return{value:"500",label:"Medium"};case"600":return{value:"600",label:"Semi Bold"};case"700":return{value:"700",label:"Bold"};case"800":return{value:"800",label:"Extra Bold"};case"900":return{value:"900",label:"Black"};default:return{value:n,label:n}}}):r};function Ua(a){var o;const r=(o=a.match(/font-family: ([^;"]+)["|;]/g))==null?void 0:o.map(n=>n.replace(/font-family: ([^;"]+)["|;]/,"$1"));r&&r.forEach(n=>{oa(n,null)})}const Je={developerMode:!0,activeControl:"mouse-pointer",textControlType:"dynamic",mode:M.EDITING,sensors:{},activeSensor:null,blockNodeElement:{},layerElement:{},activeMovingElement:{draggableElementId:null,droppableElementId:null},activeMovingLayer:{draggableLayerId:null,droppableLayerId:null},visiblePages:[],cursor:"url('/images/mouse-pointer.svg'), default !important",isWebFontActive:!1,isDrawing:!1,doctype:null,currentDoc:null,isPDFSetupMode:!1,isHeaderFooterAuto:!0,isPreviewMode:!1,currentFonts:["Inter"],printHeaderFonts:null,printBodyFonts:null,printFooterFonts:null,rawMeta:null,metaFields:[],docData:{},dynamicData:[],imageDocFields:[],snapPoints:[],snapEdges:[],propertiesContainer:new Object,openDynamicModal:null,datacontrols:{documentControl:null,tableControl:null},isMoveStart:!1,isDropped:!1,isAltKey:!1,isShiftKey:!1,lastCloned:null,currentDrawListener:null,isMoved:!1,isHiddenFieldsVisible:!1,lastCreatedElement:null,screenStyleSheet:null,printStyleSheet:null,toolbarWidth:44,printDesignName:"",isLayerPanelEnabled:!1,extendComponent:{},page:{currentPageSize:"A4",height:1122.519685,width:793.7007874,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,headerHeight:0,footerHeight:0,headerHeightWithMargin:0,footerHeightWithMargin:0,UOM:"px",pdfPrintDPI:96,fonts:{}},pageData:{},globalData:{},controls:{Text:{icon:"textTool",control:b.TEXT,aria_label:"Text (T)",id:"text",cursor:"url('/assets/print_designer/images/add-text.svg') 10 10, text",isDisabled:!1,draggable:!0},Rectangle:{icon:"rectangleTool",control:b.CONTAINER,aria_label:"Rectangle (R)",id:"rectangle",cursor:"url('/assets/print_designer/images/add-rectangle.svg') 6 6, crosshair",isDisabled:!1,draggable:!0},Image:{icon:"imageTool",control:b.IMAGE,aria_label:"Image (I)",id:"image",cursor:"url('/assets/print_designer/images/add-image.svg') 6 6, crosshair",isDisabled:!1,draggable:!0},Table:{icon:"tableTool",control:b.TABLE,aria_label:"Table (A)",id:"table",cursor:"url('/assets/print_designer/images/add-table.svg') 6 6, crosshair",isDisabled:!1,draggable:!0}},editableElementId:null,selectedElementIds:[],selectedElements:[],hoveredElementId:null,canvasBuilder:{scale:1,translateX:0,translateY:0,scaling:!1,panning:!1,moving:!1,nodeContainer:null,containerLayout:null,nodeCanvas:null,nodeCanvasLayout:null,nodeOverlay:null}},sa={elements:[{id:D(),...P(b.SECTION)}],headers:{id:D(),...P("container-header-footer"),name:"Headers",showToAllSection:!0,sectionIndex:[]},footers:{id:D(),...P("container-header-footer"),name:"Footers",showToAllSection:!0,sectionIndex:[]},watermark:{id:D(),...P("watermark"),usingWatermark:!0,previewWatermark:!1,showToAllSection:!0,sectionIndex:[]}},Qe={data:sa},st=Bt(),ca=a=>{const r=ie({developerMode:!1,pageData:{},globalData:{},extendComponent:{},pageSettings:Je.page,elementsData:Qe.data},a),[o,n]=ge(r,["developerMode","globalData","pageData","extendComponent","pageSettings","elementsData"]),[e,l]=We({...Je,get selectedElements(){return this.selectedElementIds.map(t=>I(t)).filter(t=>!!t)}}),[d,f]=We(Qe),[w,v]=re(!1),g=Kt([()=>{if(w()){se(e.page);const t=structuredClone(Ue(e.page));return()=>l("page",Re(t))}},()=>{if(w()){se(d.data);const t=structuredClone(Ue(d.data));return()=>{f("data",Re(t)),U([],t.elements),U([0],t.footers.content),U([0],t.headers.content),U([0],t.watermark.content)}}}]),L=(t,i=1)=>{let s=_e({inputString:t,defaultInputUnit:"px",convertionUnit:e.page.UOM});if(!s.error)return parseFloat(s.value.toFixed(i))},$=(t,i=e.page.UOM,s=1)=>{let c=_e({inputString:t,defaultInputUnit:i,convertionUnit:"px"});if(!c.error)return parseFloat(c.value.toFixed(s))},H=(t,i=e.page.UOM,s=1)=>{const c=_e({inputString:t,defaultInputUnit:"px",convertionUnit:i});return(c.value?c.value.toFixed(s):0)+` ${c.unit}`},A=(t,i=e.page.UOM,s=!1,c,u=1)=>s||c?`${t||0} ${c?" "+c:""}`:H(t||0,i,u),R=t=>{l("mode",t)},y=()=>{switch(e.mode){case M.HEADER:return Y();case M.FOOTER:return V();case M.EDITING:return O();default:return{}}},O=()=>(e.mode,{height:L(e.page.height-(e.page.marginTop+e.page.marginBottom))+e.page.UOM,width:L(e.page.width-(e.page.marginLeft+e.page.marginRight))+e.page.UOM}),Y=()=>({height:L(e.page.headerHeight)+e.page.UOM,width:L(e.page.width-e.page.marginLeft-e.page.marginRight)+e.page.UOM}),V=()=>({height:L(e.page.footerHeight)+e.page.UOM,width:L(e.page.width-e.page.marginLeft-e.page.marginRight)+e.page.UOM}),W=()=>{f("data","elements",t=>[...t,{id:D(),...P(b.SECTION)}])},k=t=>{l("canvasBuilder",{...e.canvasBuilder,...t})},G=(t,i)=>{l("canvasBuilder",t,i)},I=(t,i)=>e.blockNodeElement[t]||null,j=(t=[])=>{switch(e.mode){case M.HEADER:return["data","headers",...t.length>0?t.slice(1):t];case M.FOOTER:return["data","footers",...t.length>0?t.slice(1):t];case M.WATERMARK:return["data","watermark",...t.length>0?t.slice(1):t];case M.EDITING:return["data","elements",...t];default:return[]}},q=(t,i)=>{f(...j(t),"styles",s=>({...s,...i}))},_=(t,i)=>{const s=e.blockNodeElement[t];s&&q(s.data.path,i)},F=(t,i,s)=>{f(...j(t),i,s)},Ie=({id:t,node:i,layout:s,data:c,isRoot:u,isContainer:m,isText:p,isImage:E,isTable:S,isRepeater:x,isChart:z,getStyle:B,getIcon:J,getAttribute:Nt,getClasses:Pt,getDataKey:ze})=>{const Xe={id:t,node:i,layout:s,data:c,isRoot:u,isContainer:m,isText:p,isImage:E,isRepeater:x,isTable:S,isChart:z,getStyle:B,getIcon:J,getAttribute:Nt,getClasses:Pt,getDataKey:ze,_pendingCleanup:!1};e.blockNodeElement[t]||Object.defineProperties(Xe,{setStyle:{enumerable:!0,configurable:!0,get:()=>(Q,le)=>{_(t,{[Q]:le})}},updateStyles:{enumerable:!0,configurable:!0,get:()=>Q=>{_(t,Q)}},setAttribute:{enumerable:!0,configurable:!0,get:()=>(Q,le)=>{F([...c.path,"attributes"],Q,le)}},setClasses:{enumerable:!0,configurable:!0,get:()=>Q=>{F(c.path,"classes",Q)}},setDataKey:{enumerable:!0,configurable:!0,get:()=>(Q,le)=>{C(()=>{ze("type")||F(c.path,"dataKey",{key:"",type:E?"attribute":"key",property:E?"src":"innerHTML"}),F([...c.path,"dataKey"],Q,le)})}}}),C(()=>{l("blockNodeElement",t,Xe)})},fe=t=>{T(()=>e.blockNodeElement[t])&&(l("blockNodeElement",t,"_pendingCleanup",!0),queueMicrotask(()=>Ce(t)))},Ce=t=>{if(e.blockNodeElement[t]&&e.blockNodeElement[t]._pendingCleanup){const i=e.selectedElementIds.includes(t);C(()=>{i&&l("selectedElementIds",s=>s.filter(c=>c!=t)),l("blockNodeElement",t,void 0)})}},he=t=>{fe(t.id),Fe(t.id),t.content.length&&t.content.forEach(i=>{he(i)})},Te=t=>{v(!1);const i=e.blockNodeElement[t];if(i){let s=null;if(i.isRoot)i.isRoot&&e.mode===M.EDITING&&d.data.elements.length>1&&f("data","elements",c=>{const u=c.filter(m=>m.id===i.id?(s=m,!1):!0);return U([],u),u});else{const c=i.data.path.slice(0,i.data.path.length-2);C(()=>{i.isRoot||F(c,"content",u=>{const m=u.filter(p=>p.id===i.id?(s=p,!1):!0);return U(c,m),m})})}s&&he(s)}v(!0)},Ae=(t,i=!1)=>{i?l("selectedElementIds",s=>[...s,t]):l("selectedElementIds",[t])},dt=t=>e.selectedElementIds.includes(t),ut=t=>{dt(t)?l("selectedElementIds",i=>[...i.splice(i.indexOf(t),1)]):Ae(t,!0)},gt=()=>{C(()=>{l("selectedElementIds",[]),l("editableElementId",null)})},mt=(t,i)=>{i&&i.shiftKey?ut(t):Ae(t)},pt=(t,i)=>{l("hoveredElementId",t),i==null||i.stopPropagation()},ft=t=>{l("hoveredElementId",null),t==null||t.stopPropagation()},ht=({id:t,node:i,layout:s,data:c})=>{const u=e.layerElement[t],m={id:t,node:i,layout:s,data:c,_pendingCleanup:!1};let p;if(!u)Object.defineProperties(m,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:p||{}},transform:{enumerable:!0,configurable:!0,get:()=>{const E=Object.values(e.layerElement[t].transformers);return E.sort((S,x)=>S.order-x.order),E.reduce((S,x)=>x.callback(S),Zt())}},transformed:{enumerable:!0,configurable:!0,get:()=>Jt(e.layerElement[t].layout,e.layerElement[t].transform)}});else if(e.activeMovingLayer.draggableLayerId===t){const E="addDraggable-existing-offset",S={x:u.layout.x-s.x,y:u.layout.y-s.y},x=u.transformers[E],z=x?x.callback(S):S;p={id:E,order:100,callback:B=>({x:B.x+z.x,y:B.y+z.y})},Me(()=>ke("layer",t,E))}C(()=>{l("layerElement",t,m),p&&Le("layer",t,p)}),e.activeMovingLayer.draggableLayerId&&ye()},Fe=t=>{T(()=>e.layerElement[t])&&(l("layerElement",t,"_pendingCleanup",!0),queueMicrotask(()=>yt(t)))},yt=t=>{var i;if((i=e.layerElement[t])!=null&&i._pendingCleanup){const s=e.activeMovingLayer.draggableLayerId===t||e.activeMovingLayer.droppableLayerId===t;C(()=>{s&&(l("activeMovingLayer","draggableLayerId",null),l("activeMovingLayer","droppableLayerId",null)),l("layerElement",t,void 0)})}},vt=({id:t,activators:i})=>{l("sensors",t,{id:t,activators:i,coordinates:{origin:{x:0,y:0},current:{x:0,y:0},get delta(){return{x:e.sensors[t].coordinates.current.x-e.sensors[t].coordinates.origin.x,y:e.sensors[t].coordinates.current.y-e.sensors[t].coordinates.origin.y}}}})},bt=t=>{if(!T(()=>e.sensors[t])){console.warn(`Cannot remove nonexistent sensor with id: ${t}`);return}const i=e.activeSensor===t;C(()=>{i&&l("activeSensor",null),l("sensors",t,void 0)})},Et=(t,i)=>{C(()=>{l("sensors",t,"coordinates",{origin:{...i},current:{...i}}),l("activeSensor",t)})},xt=t=>{const i=e.activeSensor;if(!i){console.warn("Cannot move sensor when no sensor active.");return}l("sensors",i,"coordinates","current",{...t})},St=()=>{l("activeSensor",null)},wt=(t,i,s)=>{const c={};for(const m of Object.values(e.sensors))if(m)for(const[p,E]of Object.entries(m.activators))c[p]??(c[p]=[]),c[p].push({sensor:m,activator:E});const u={};for(const m in c){let p=m;s&&(p=`on${m}`),u[p]=E=>{for(const{activator:S}of c[m]){if(e.activeSensor)break;S(E,t,i)}}}return u},U=(t,i)=>{C(()=>{const s=new WeakMap;i.forEach((c,u)=>{var p;const m=e.blockNodeElement[c.id];if(m){let E=[];t.length?E=[...t,"content",u]:E=[u],l("blockNodeElement",c.id,"data","index",u),l("blockNodeElement",c.id,"data","path",E);const S=m.layout;s.has(m.node)||s.set(m.node,ae(m.node));const x=s.get(m.node);Ke(S,x)||l("blockNodeElement",m.id,"layout",x),(p=c.content)!=null&&p.length&&U(E,c.content)}})})},Be=(t,i)=>{let s=!1;const c=t.layout;if(i){i.has(t.node)||i.set(t.node,ae(t.node));const u=i.get(t.node);Ke(c,u)||(l("layerElement",t.id,"layout",u),s=!0)}else l("layerElement",t.id,"layout",ae(t.node));return s},ye=()=>{let t=!1;const i=Object.values(e.layerElement);return C(()=>{const s=new WeakMap;for(const c of i)c&&(t=Be(c,s))}),t},De=t=>{const i=e.activeMovingLayer.draggableLayerId||"",s=e.layerElement[i];if(s){let c=T(()=>Object.values(e.layerElement));if(s&&!s.data.parentId&&(c=c.filter(u=>!u.data.parentId)),c=c.filter(u=>e.activeMovingLayer.draggableLayerId!==u.id&&!u.data.parentIds.includes(i)),t==="layer"&&e.activeMovingLayer.draggableLayerId&&s){let u=Ze(e.layerElement[e.activeMovingLayer.draggableLayerId],c.filter(p=>[b.CONTAINER,b.SECTION].includes(p.data.type)),{activeDroppableId:e.activeMovingLayer.droppableLayerId});if(u!=null&&u.id){const p=Ze(e.layerElement[e.activeMovingLayer.draggableLayerId],c.filter(E=>E.data.parentIds.includes(u.id)),{activeDroppableId:e.activeMovingLayer.droppableLayerId});if(p){if(s.data.parentId==p.data.parentId)u=p;else if(e.layerElement[u.id].data.childrenIds.indexOf(p.id)===e.layerElement[u.id].data.childrenIds.length-1){const S=s.transformed.center.y>p.transformed.center.y,x=p.transformed.x-s.transformed.x;if(!S||x<12)u=p;else{const z=p.data.parentIds.length-Math.min(Math.floor(x/12),p.data.parentIds.length),B=p.data.parentIds[z],J=e.layerElement[B];parent&&(u=J)}}}}let m=u?u.id:null;e.activeMovingLayer.droppableLayerId!==m&&l("activeMovingLayer","droppableLayerId",m)}}},Le=(t,i,s)=>{if(t==="layer"){if(!T(()=>e.layerElement[i])){console.warn(`Cannot add transformer to nonexistent ${t} with id: ${i}`);return}l("layerElement",i,"transformers",s.id,s)}},ke=(t,i,s)=>{if(t==="layer"){if(!T(()=>e.layerElement[i]))return;if(!T(()=>e.layerElement[i].transformers[s])){console.warn(`Cannot remove from ${t} with id ${i}, nonexistent transformer with id: ${s}`);return}l("layerElement",i,"transformers",s,void 0)}},It=(t,i)=>{var s,c;if(v(!1),t&&i){const u=(s=t==null?void 0:t.data)==null?void 0:s.parentId,m=u&&i.data.type==b.SECTION?i.id:(c=i==null?void 0:i.data)==null?void 0:c.parentId;let p=[],E=[];if(u&&(p=e.blockNodeElement[u].data.path),m&&(E=e.blockNodeElement[m].data.path),!u&&!m){const S=e.blockNodeElement[t.id].data.index,x=e.blockNodeElement[i.id].data.index;C(()=>{f(...j([]),z=>{const B=Ve(z,S,x);return U([],B),B})})}else if(u===m){const S=e.blockNodeElement[t.id].data.index,x=e.blockNodeElement[i.id].data.index;C(()=>{F(p,"content",z=>{const B=Ve(z,S,x);return U(p,B),B})})}else{let S=0;u&&i.data.type!==b.SECTION&&(S=e.blockNodeElement[i.id].data.index),C(()=>{let x=null;F(p,"content",z=>{const B=z.filter(J=>J.id===t.id?(x=J,!1):!0);return U(p,B),B}),x&&m&&(E=e.blockNodeElement[m].data.path,F(E,"content",B=>{const J=[...B.slice(0,S),x,...B.slice(S)];return U(E,J),J}))})}}v(!0)},Ct=(t,i)=>{const s={id:"sensorMove",order:0,callback:c=>{const u=e.activeSensor;if(u){const m=T(()=>e.sensors[u]);return{x:c.x+m.coordinates.delta.x,y:c.y+m.coordinates.delta.y}}return c}};i==="layer"&&(C(()=>{G("moving",!0),l("activeMovingLayer","draggableLayerId",t),Le(i,t,s)}),ye()),De(i)},Tt=t=>{const i=T(()=>e.activeMovingLayer.draggableLayerId);t=="layer"&&(C(()=>{i!==null&&ke("layer",i,"sensorMove"),l("activeMovingLayer",["draggableLayerId","droppableLayerId"],null),G("moving",!1)}),ye())},Dt=t=>{ee(()=>{const i=e.activeMovingLayer.draggableLayerId||"",s=T(()=>e.layerElement[i]);s&&t&&T(()=>t({draggable:s}))})},$e=t=>{ee(()=>{const i=e.activeMovingLayer.draggableLayerId||"",s=T(()=>e.layerElement[i]);s&&t&&(Object.values(s.transform),T(()=>t({draggable:s})))})},Lt=t=>{ee(()=>{const i=e.activeMovingLayer.draggableLayerId||"",s=e.activeMovingLayer.droppableLayerId||"",c=T(()=>e.layerElement[i]),u=T(()=>e.layerElement[s]||null);c&&t&&T(()=>t({draggable:c,droppable:u}))})},Me=t=>{ee(({previousDraggable:i,previousDroppable:s})=>{const c=e.activeMovingLayer.draggableLayerId||"",u=e.activeMovingLayer.droppableLayerId||"",m=T(()=>e.layerElement[c]),p=T(()=>e.layerElement[u]||null);return!m&&i&&t&&T(()=>t({draggable:i,droppable:s})),{previousDraggable:m,previousDroppable:p}},{previousDraggable:null,previousDroppable:null})};$e(()=>De("layer")),Me(({draggable:t,droppable:i})=>It(t,i)),ee(()=>{C(()=>{l("developerMode",o.developerMode),l("globalData",t=>({...t,...o.globalData})),l("pageData",t=>({...t,...o.pageData})),l("extendComponent",t=>({...t,...o.extendComponent}))})}),ee(()=>{v(!1),C(()=>{l("page",t=>({...t,...o.pageSettings})),["elements","headers","footers","watermark"].forEach(t=>{o.elementsData[t]&&f("data",t,Re(o.elementsData[t]))})}),v(!0)});const kt=(t,i)=>{v(!1);const s=e.blockNodeElement[t];if(s&&s.data.path.length>6){const c=s.data.path.slice(0,s.data.path.length-2),u=c[c.length-1],m=s.data.path.slice(0,s.data.path.length-6);C(()=>{s.isRoot||F(m,"content",p=>{let E=structuredClone(p);return E=E.map(S=>(S.originalElement=="thead"?S.content=S.content.map((x,z)=>{if(z===u){const B=i==="left"?s.data.index:s.data.index+1;x.content=[...x.content.slice(0,B),{id:D(),...P("simple-table-child"),name:"Table Cell",originalElement:"th",styles:{"text-align":"center","vertical-align":"top","padding-top":"10px","padding-bottom":"10px",color:"#333333","font-weight":"medium","font-size":"inherit"},content:[{id:D(),...P(b.TEXT),innerHTML:"New",styles:{"font-size":"11px",height:"fit-content","min-width":"10px",width:"fit-content","max-width":"unset",display:"inline-block"}}]},...x.content.slice(B)]}return x}):S.originalElement=="tbody"&&(S.content=S.content.map(x=>{const z=i==="left"?s.data.index:s.data.index+1;return x.content=[...x.content.slice(0,z),{id:D(),...P("simple-table-child"),name:"Table Cell",originalElement:"td",styles:{"text-align":"center","vertical-align":"top","padding-top":"10px","padding-bottom":"10px",color:"#333333","font-weight":"normal","font-size":"inherit"},content:[{id:D(),...P(b.TEXT),innerHTML:"New",styles:{"font-size":"11px",height:"fit-content","min-width":"10px",width:"fit-content","max-width":"unset",display:"inline-block"}}]},...x.content.slice(z)],x})),S)),U(m,E),E})})}v(!0)},He=t=>{const i=structuredClone(t);return i.id=D(),i.content&&(i.content=i.content.map(s=>He(s))),i},Mt=t=>{v(!1);const i=e.blockNodeElement[t];if(i&&!i.isRoot){const s=i.data.path.slice(0,i.data.path.length-2);C(()=>{F(s,"content",c=>{let u=structuredClone(c);return u=u.reduce((m,p)=>{const E=[p];return p.id===i.id&&E.push(He(p)),[...m,...E]},[]),U(s,u),u})})}v(!0)};ee(()=>{se(e.page),se(e.pageData),se(d.data);const t={pageSettings:{...T(()=>e.page),fonts:Array.from(Oe).reduce((i,s)=>{var u;const c=s.split(":");return{...i,[c[0]]:{weight:[...((u=i[c[0]])==null?void 0:u.weight)||[],c[1]].sort(),italic:[]}}},{})},elementsData:T(()=>d.data),pageData:T(()=>e.pageData)};T(()=>r.onUpdate)&&T(()=>r.onUpdate)(t)});const Rt={setDocumentState:l,setElementState:f,getPageStyle:y,getPageSettings:O,updateSectionMode:R,convertToPageUOM:L,uomFormattedValue:H,styleFormattedValue:A,convertToPX:$,createNewSection:W,addCanvasBuilder:k,setCanvasProps:G,addNodeElement:Ie,removeNodeElement:fe,deleteElement:Te,addSelectedElement:mt,clearSelectionElement:gt,updateElementPropertyByPath:F,addHoveredElement:pt,removeHoveredElement:ft,addLayer:ht,removeLayer:Fe,addSensor:vt,removeSensor:bt,sensorStart:Et,sensorMove:xt,sensorEnd:St,dragStart:Ct,dragEnd:Tt,recomputeLayers:ye,recomputedLayer:Be,detectCollisions:De,draggableActivators:wt,addTransformer:Le,removeTransformer:ke,onDragStart:Dt,onDragMove:$e,onDragEnd:Me,onDragOver:Lt,addColumnToTable:kt,duplicateElement:Mt,openImageGallery:r.onOpenImageGalery,history:{canUndo:g.canUndo,canRedo:g.canRedo,undo:g.undo,redo:g.redo,pause:()=>{T(()=>v(!1))},resume:()=>{T(()=>v(!0))}}},_t=[{documentState:e,elementState:d},Rt];return me(()=>{window.WebFont||function(t){var i=t.createElement("script"),s=t.scripts[0];i.src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js",i.async=!0,s.parentNode.insertBefore(i,s),i.onload=()=>l("isWebFontActive",!0)}(document)}),h(st.Provider,{value:_t,get children(){return n.children}})},ne=()=>{const a=Ft(st);if(!a)throw new Error("Cannot ReportTemplateDesign outside provider");return a},da=(a,r,o={})=>{const[n,{setElementState:e,clearSelectionElement:l,updateElementPropertyByPath:d}]=ne(),[f,w]=re(!1),[v,g]=re(null);function L(y){w(!1),y.preventDefault()}function $(y){w(!0),y.preventDefault()}function H(y){var O,Y,V;try{w(!1),y.stopPropagation();let W=(O=y.dataTransfer)==null?void 0:O.getData("componentType"),k=P(W);const G=(Y=y.dataTransfer)==null?void 0:Y.getData("extendedComponent");G&&(W="extendedComponent",k=JSON.parse(G));let I=document.elementFromPoint(y.x,y.y),j=[];const q=((V=I.dataset)==null?void 0:V.blockId)||"",_=n.documentState.blockNodeElement[q];W&&k&&_&&(_.isContainer||_.isRoot)&&_.data.path&&(j=_.data.path,_.isContainer&&W===b.CONTAINER&&(k.styles={...k.styles,background:$t(Math.ceil(Math.random()*100)),width:`${_.layout.width/((_.node.children.length||0)+2)}px`},_.setStyle("flex-direction","row")),n.documentState.mode===M.HEADER?e("data","headers",...j.slice(1),"content",F=>[...F,{...k,id:D()}]):n.documentState.mode===M.FOOTER?e("data","footers",...j.slice(1),"content",F=>[...F,{...k,id:D()}]):n.documentState.mode===M.WATERMARK?e("data","watermark",...j.slice(1),"content",F=>[...F,{...k,id:D()}]):e("data","elements",...j,"content",F=>[...F,{...k,id:D()}]))}catch(W){console.log("something went wrong",W)}}const A=y=>{const O=document.elementFromPoint(y.clientX,y.clientY);O!=null&&O.classList.contains("canvas-page")&&l()};return me(()=>{const y=v();y&&(y.addEventListener("dragleave",L),y.addEventListener("dragover",$),y.addEventListener("drop",H),y.addEventListener("click",A))}),Ne(()=>{const y=v();y&&(y.removeEventListener("dragleave",L),y.removeEventListener("dragover",$),y.removeEventListener("drop",H),y.removeEventListener("click",A))}),Object.defineProperties(y=>{g(y)},{ref:{enumerable:!0,value:g},isOverDropZone:{enumerable:!0,get:f}})},ct=()=>{const[a,{clearSelectionElement:r,history:o}]=ne(),n={clearSelection:()=>{r()},getSelectedElements:()=>a.documentState.selectedElements||[],getFirstSelectedElement:()=>a.documentState.selectedElements[0],getStyle:e=>{let l;return a.documentState.selectedElements.forEach(d=>{l=d.getStyle(e)}),l||""},setStyle:(e,l)=>{o.pause(),C(()=>{a.documentState.selectedElements.forEach(d=>{d.setStyle(e,l)})}),o.resume()},getAttribute:e=>{let l="__initial__";return a.documentState.selectedElements.forEach(d=>{l==="__initial__"?l=d.getAttribute(e):l!==d.getAttribute(e)&&(l="Mixed")}),l},setAttribute:(e,l)=>{o.pause(),a.documentState.selectedElements.forEach(d=>{d.setAttribute(e,l)}),o.resume()},isElementSelected:()=>(a.documentState.selectedElements.length||0)>0,multipleBlocksSelected:()=>n.isElementSelected()&&a.documentState.selectedElements.length>1,isText:()=>n.isElementSelected()&&n.getFirstSelectedElement().isText,isContainer:()=>n.isElementSelected()&&n.getFirstSelectedElement().isContainer,isImage:()=>n.isElementSelected()&&n.getFirstSelectedElement().isImage,isRoot(){return n.isElementSelected()&&n.getFirstSelectedElement().isRoot},isTable(){return n.isElementSelected()&&(n.getFirstSelectedElement().isTable||n.getFirstSelectedElement().getAttribute("data-table-component"))},setClasses:e=>{o.pause(),a.documentState.selectedElements.forEach(l=>{l.setClasses(e)}),o.resume()},setDataKey:(e,l)=>{a.documentState.selectedElements.forEach(d=>{d.setDataKey(e,l)})},getDataKey:e=>n.isElementSelected()&&n.getFirstSelectedElement().getDataKey(e),isRepeater(){return n.isElementSelected()&&n.getFirstSelectedElement().isRepeater()}};return n};var ua=te('<div><div class="select-none group absolute flex justify-center hover:opacity-80 items-center bg-transparent hover:bg-gray-100 z-[100] top-0 bottom-0 left-0 right-0 transition"><p class="hidden group-hover:block text-gray-900 transition text-base font-medium">');const et=a=>{const[r,o]=ge(a,["class","children","type"]);return(()=>{var n=ua(),e=n.firstChild,l=e.firstChild;return xe(n,ie({get class(){return K("relative cursor-pointer overflow-hidden",r.class)}},o),!1,!0),N(l,()=>`Double Click to edit ${r.type}`),N(n,()=>r.children,null),n})()};var ga=te('<div class="pointer-events-none absolute bottom-0 left-0 right-0 top-0 z-50 bg-cyan-200 opacity-20 shadow-sm">'),ma=te('<div><div class="canvas-page relative bg-white h-full"><div>');const be=Se(()=>we(()=>import("./recursive-element-Bs2End0v.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),Ee=a=>{const[r,o]=ge(a,["class","details","index"]),[n,{getPageStyle:e,updateSectionMode:l}]=ne(),d=()=>n.elementState.data.headers,f=()=>n.elementState.data.footers,w=()=>n.elementState.data.watermark,v=()=>n.documentState.pageData;if(r.details.type!==b.SECTION)return!1;const g=da(r.index,r.details.id,r.details),L=ct(),$=()=>n.documentState.mode=="header"?{height:X(n.documentState.page.headerHeight+n.documentState.page.marginTop),width:X(n.documentState.page.width),"padding-top":X(n.documentState.page.marginTop),"padding-left":X(n.documentState.page.marginLeft)}:n.documentState.mode=="footer"?{height:X(n.documentState.page.footerHeight+n.documentState.page.marginBottom),width:X(n.documentState.page.width),"padding-bottom":X(n.documentState.page.marginBottom),"padding-left":X(n.documentState.page.marginLeft)}:{height:X(n.documentState.page.height),width:X(n.documentState.page.width),"padding-top":X(n.documentState.page.marginTop),"padding-left":X(n.documentState.page.marginLeft)},H=()=>n.documentState.mode=="header"?{height:X(n.documentState.page.headerHeight+n.documentState.page.marginTop)}:n.documentState.mode=="footer"?{height:X(n.documentState.page.footerHeight)}:{height:`calc(100% - ${X((r.details.attributes["data-page-footer"]?n.documentState.page.footerHeight:0)+(r.details.attributes["data-page-header"]?n.documentState.page.headerHeight:0))})`};return(()=>{var A=ma(),R=A.firstChild,y=R.firstChild;return de(g,A,()=>g),xe(A,ie({get class(){return K("canvas-page my-[50px] relative shadow-lg  font-inter",r.class,L.isElementSelected()||[M.PREVIEW,M.PRINT].includes(n.documentState.mode)?"bg-white":"bg-yellow-50")}},o,{get style(){return{"pointer-events":"auto",...$()}}}),!1,!0),N(A,h(Z,{get when(){return g.isOverDropZone},get children(){return ga()}}),R),N(R,h(Z,{get when(){return n.documentState.page.headerHeight>0&&n.documentState.mode===M.EDITING&&r.details.attributes["data-page-header"]},get children(){return h(et,{type:"Header",get style(){return{height:X(n.documentState.page.headerHeight)}},onDblClick:()=>l(M.HEADER),get children(){return h(be,{get details(){return d()},index:0,parentPath:[],preview:!0,get pageData(){return v()}})}})}}),y),N(y,h(be,{get details(){return r.details},get index(){return r.index},parentPath:[],get pageData(){return v()}})),N(R,h(Z,{get when(){return n.documentState.page.footerHeight>0&&n.documentState.mode===M.EDITING&&r.details.attributes["data-page-footer"]},get children(){return h(et,{type:"Footer",get style(){return{height:X(n.documentState.page.footerHeight)}},onDblClick:()=>l(M.FOOTER),get children(){return h(be,{get details(){return f()},index:0,parentPath:[],preview:!0,get pageData(){return v()}})}})}}),null),N(R,h(Z,{get when(){return w().usingWatermark&&w().previewWatermark&&n.documentState.mode===M.EDITING&&r.details.attributes["data-page-watermark"]},get children(){return h(be,{get details(){return w()},index:0,parentPath:[],preview:!0,get pageData(){return v()}})}}),null),pe(O=>{var Y=e(),V=H();return O.e=je(R,Y,O.e),O.t=je(y,V,O.t),O},{e:void 0,t:void 0}),A})()},tt={min:.1,max:10},pa=()=>{const[a,{setCanvasProps:r,addCanvasBuilder:o,clearSelectionElement:n}]=ne(),[e,l]=re(null),[d,f]=re(null),[w,v]=re(null),g=()=>a.documentState.canvasBuilder,L=()=>{r("nodeCanvasLayout",ae(e()))},$=()=>{r("containerLayout",ae(d()))},H=I=>{const j=document.elementFromPoint(I.clientX,I.clientY);j!=null&&j.classList.contains("canvas-section")&&n()};me(()=>{var I;d()&&e()&&(o({nodeContainer:d(),nodeCanvas:e(),containerLayout:ae(d()),nodeCanvasLayout:ae(e()),nodeOverlay:w()}),W(),(I=d())==null||I.addEventListener("click",H))}),Ne(()=>{var I;(I=d())==null||I.removeEventListener("click",H)});let A,R=0,y=0,O=0,Y=0;const V=I=>{if(A&&clearTimeout(A),ce(I)){C(()=>{r("scaling",!0),L()});const j=g().nodeCanvasLayout.left+g().nodeCanvasLayout.width/2,q=g().nodeCanvasLayout.top+g().nodeCanvasLayout.height/2;R=(I.clientX-j)/g().scale,y=(I.clientY-q)/g().scale,O=I.clientX,Y=I.clientY;let _=g().scale-I.deltaY*8e-4*g().scale;_=Math.min(Math.max(_,tt.min),tt.max),C(()=>{r("scale",_),L()}),C(()=>{const F=g().nodeCanvasLayout.left+g().nodeCanvasLayout.width/2,Ie=g().nodeCanvasLayout.top+g().nodeCanvasLayout.height/2,fe=F+R*_,Ce=Ie+y*_,he=O-fe,Te=Y-Ce;r("translateX",g().translateX+he/_),r("translateY",g().translateY+Te/_)})}else C(()=>{r("panning",!0),r("translateX",g().translateX-I.deltaX/g().scale),r("translateY",g().translateY-I.deltaY/g().scale)});A=setTimeout(()=>{C(()=>{r("scaling",!1),r("panning",!1)})},200)},W=()=>{g().nodeContainer.addEventListener("wheel",I=>{I.preventDefault(),requestAnimationFrame(()=>V(I))},{passive:!1})},k=async()=>{C(()=>{L(),$();const q=g().containerLayout.width,_=g().nodeCanvasLayout.width/g().scale;r("scale",q/(_+550*2)),r("translateX",0),r("translateY",0)}),C(()=>{const q=g().scale;L();const _=g().containerLayout.top-g().nodeCanvasLayout.top+30*q;_!==0&&r("translateY",_/q)})};return Object.defineProperties(I=>{f(I)},{ref:{enumerable:!0,value:f},canvasRef:{enumerable:!0,value:l},overlayRef:{enumerable:!0,value:v},setScaleAndTranslate:{enumerable:!0,value:()=>k()},canvasProps:{enumerable:!0,value:g()}})};var at=te('<div class="select-none flex gap-3 justify-center items-center">'),fa=te('<div><div class="overlay absolute"id=overlay></div><div></div><div class="absolute bottom-[50px] left-[50%] z-50 flex gap-x-2 -translate-x-[50%] cursor-default items-center justify-center gap-1 rounded-md bg-slate-800 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm dark:bg-zinc-900 dark:text-zinc-400"><div class="cursor-pointer ml-1">');const ha=a=>{const[r,o]=ge(a,["class"]),n=pa(),[e,{updateSectionMode:l,createNewSection:d,history:f}]=ne(),w=()=>e.elementState.data,v=()=>e.elementState.data.headers,g=()=>e.elementState.data.footers,L=()=>e.elementState.data.watermark,$=()=>Math.round(n.canvasProps.scale*100)+"%";return ee(()=>{e.documentState.mode,setTimeout(()=>{T(n.setScaleAndTranslate)},200)}),(()=>{var H=fa(),A=H.firstChild,R=A.nextSibling,y=R.nextSibling,O=y.firstChild,Y=n.ref;typeof Y=="function"?de(Y,H):n.ref=H,xe(H,ie(o,{get class(){return K("canvas-section relative",r.class)}}),!1,!0);var V=n.overlayRef;typeof V=="function"?de(V,A):n.overlayRef=A;var W=n.canvasRef;return typeof W=="function"?de(W,R):n.canvasRef=R,R.style.setProperty("transform-origin","top-center"),N(R,h(Z,{get when(){return e.documentState.mode===M.EDITING},get children(){return[h(Ht,{get each(){return w().elements},children:(k,G)=>h(Ee,{details:k,get index(){return G()}})}),(()=>{var k=at();return N(k,h(ve,{variant:"buttonToolbar",class:"shadow-lg hover:bg-slate-50",onClick:d,get children(){return[h(zt,{class:"h-5 w-5"})," Add Section"]}})),k})()]}}),null),N(R,h(Z,{get when(){return e.documentState.mode===M.HEADER},get children(){return h(Ee,{get details(){return v()},index:0})}}),null),N(R,h(Z,{get when(){return e.documentState.mode===M.FOOTER},get children(){return h(Ee,{get details(){return g()},index:0})}}),null),N(R,h(Z,{get when(){return e.documentState.mode===M.WATERMARK},get children(){return h(Ee,{get details(){return L()},index:0})}}),null),N(R,h(Z,{get when(){return e.documentState.mode!==M.EDITING},get children(){var k=at();return N(k,h(ve,{variant:"buttonToolbar",onClick:()=>l(M.EDITING),class:"shadow-lg hover:bg-slate-50",get children(){return[h(it,{class:"h-5 w-5"})," Close"]}})),k}}),null),N(y,$,O),O.$$click=()=>n.setScaleAndTranslate(),N(O,h(Xt,{class:"size-6"})),N(y,h(ve,{get disabled(){return!f.canUndo()},variant:"buttonToolbar",onClick:()=>f.undo(),size:"icon",class:"rounded-md size-6 ml-4 hover:bg-slate-400",get children(){return h(jt,{class:"size-5"})}}),null),N(y,h(ve,{get disabled(){return!f.canRedo()},variant:"buttonToolbar",onClick:()=>f.redo(),size:"icon",class:"rounded-md size-6 hover:bg-slate-400",get children(){return h(Wt,{class:"size-5"})}}),null),pe(k=>{var G=K("canvas-section z-0 absolute flex-1"),I=`scale(${n==null?void 0:n.canvasProps.scale}) translate(${n.canvasProps.translateX}px, ${n.canvasProps.translateY}px)`;return G!==k.e&&ue(R,k.e=G),I!==k.t&&((k.t=I)!=null?R.style.setProperty("transform",I):R.style.removeProperty("transform")),k},{e:void 0,t:void 0}),H})()};rt(["click"]);const ya=()=>{const[,{deleteElement:a,clearSelectionElement:r,history:o}]=ne(),n=ct();function e(d){const f=d.target,w=f.isContentEditable,v=f.tagName==="INPUT"||f.tagName==="TEXTAREA";return w||v}const l=d=>{if(!(d.key==="s"&&ce(d))&&!(d.key==="p"&&ce(d))&&!e(d)){if(d.key==="z"&&ce(d)&&!d.shiftKey&&o.canUndo()){o.undo(),d.preventDefault();return}if(d.key==="z"&&d.shiftKey&&ce(d)&&o.canRedo()){o.redo(),d.preventDefault();return}if((d.key==="Backspace"||d.key==="Delete")&&n.isElementSelected()){C(()=>{for(const f of n.getSelectedElements())a(f.id)}),r(),d.stopPropagation();return}if(d.key==="Escape"){r();return}}};me(()=>{document.addEventListener("keydown",l)}),Ne(()=>document.removeEventListener("keydown",l))};var va=te('<div><div></div><div><button class="enabled:hover:bg-slate-200 bg-white rounded-full enabled:hover:text-black text-slate-700 disabled:text-slate-300 p-1 h-6 w-6 border border-gray-100 transition-all flex justify-center items-center">');const nt=a=>{let r;const o=ie({sideExpandButton:"right"},a),[n,e]=ge(o,["children","class","containerClass","sideExpandButton","panelId","closePannelClass"]),[l,d]=lt({key:n.panelId,defaultValue:!0});return(()=>{var f=va(),w=f.firstChild,v=w.nextSibling,g=v.firstChild,L=r;return typeof L=="function"?de(L,f):r=f,xe(f,ie({get class(){return K("absolute top-0  bg-white  border border-gray-200 rounded-sm",n.containerClass)}},e),!1,!0),N(w,()=>n.children),g.$$click=()=>d($=>!$),N(g,(()=>{var $=Ut(()=>!!l());return()=>$()?h(it,{class:"w-3 h3"}):h(Yt,{get class(){return K("w-3 h-3","left-0 right-0 h-[20px]",{"rotate-180":n.sideExpandButton==="top","rotate-90":n.sideExpandButton==="left","-rotate-90":n.sideExpandButton==="right"})}})})()),pe($=>{var H=K("h-[calc(100vh-50px)] transition overflow-hidden",n.class,!l()&&n.closePannelClass),A=K("absolute z-20 flex justify-center items-center",{"top-0 h-full w-[20px] hover:cursor-ew-resize":n.sideExpandButton==="left"||n.sideExpandButton==="right","left-0 right-0 h-[20px] hover:cursor-ns-resize":n.sideExpandButton==="top"||n.sideExpandButton==="bottom","-left-[10px]":n.sideExpandButton==="left","-right-[10px]":n.sideExpandButton==="right","-top-[10px]":n.sideExpandButton==="top","-bottom-[10px]":n.sideExpandButton==="bottom"});return H!==$.e&&ue(w,$.e=H),A!==$.t&&ue(v,$.t=A),$},{e:void 0,t:void 0}),f})()};rt(["click"]);var ba=te("<div id=main-reporting-design-layout>");const Ea=Se(()=>we(()=>import("./toolbar-h4yvglv0.js"),__vite__mapDeps([13,1,2,10,5,14,7,11,12]))),xa=Se(()=>we(()=>import("./layer-panel-C1gib3EI.js"),__vite__mapDeps([15,1,2,3,5,16,6,7,8,17,18,10,11,12]))),Sa=Se(()=>we(()=>import("./setting-panel-JtRKRLrb.js"),__vite__mapDeps([19,1,2,10,5,7,8,20,3,17,11,12])));function wa(a){const[,{setDocumentState:r}]=ne();return me(()=>{const o=document.createElement("style");o.title="print-designer-stylesheet",o.setAttribute("rel","stylesheet"),document.head.appendChild(o);for(let n=document.styleSheets.length-1;n>=0;n--)document.styleSheets[n].title=="print-designer-stylesheet"?r(["screenStyleSheet"],document.styleSheets[n]):document.styleSheets[n].title=="page-print-designer-stylesheet"&&r(["printStyleSheet"],document.styleSheets[n])}),ya(),(()=>{var o=ba();return N(o,h(ha,{get class(){return K("flex-1 p-0 mt-0","overflow-hidden flex relative justify-center bg-gray-100 h-full")}}),null),N(o,h(nt,{panelId:"element-section",sideExpandButton:"right",containerClass:"top-3 left-3",class:"flex flex-nowrap",closePannelClass:"w-[44px]",get children(){return[h(Ea,{get class(){return K("z-1 w-[44px]","flex-1 h-full p-0 mt-0 bg-white shadow-md")}}),h(xa,{})]}}),null),N(o,h(nt,{panelId:"properties-section",sideExpandButton:"bottom",class:"h-[calc(100vh-80px)]",containerClass:"top-3 right-3",closePannelClass:"h-[30px] [&>div>div.setting-pannel]:overflow-hidden [&>div>div.setting-pannel>p]:!block [&>div>div.setting-pannel>div]:!hidden [&>div>.button-section]:!hidden",get children(){return h(Sa,{})}}),null),pe(()=>ue(o,K("report-design-main-layout relative h-screen flex justify-content m-0 font-inter",a.class))),o})()}var Ia=te("<div>");function Ca(){const a=Gt(),[r,o]=lt({key:a.sessionId,defaultValue:{globalData:Ye,pageData:Vt,pageSettings:Ge.pageSettings,elementsData:Ge.elementsData}});return h(Z,{when:!0,get children(){var n=Ia();return N(n,h(ca,{get globalData(){return r().globalData},get pageData(){return r().pageData},get pageSettings(){return r().pageSettings},get elementsData(){return r().elementsData},onUpdate:({pageSettings:e,elementsData:l,pageData:d})=>{localStorage.setItem(a.sessionId,JSON.stringify({globalData:Ye,pageData:d,pageSettings:e,elementsData:l}))},get children(){return h(wa,{class:"h-full w-full rounded"})}})),pe(()=>ue(n,K("relative overflow-y-hidden p-5 bg-gray-50 h-[calc(100vh-10px)] smoth-scroll"))),n}})}const Ya=Object.freeze(Object.defineProperty({__proto__:null,default:Ca},Symbol.toStringTag,{value:"Module"}));export{b as E,Fa as H,na as P,M as S,Ha as a,X as b,Oa as c,Ba as d,ae as e,Aa as f,Pa as g,ct as h,ja as i,Wa as j,ra as k,qe as l,za as m,Zt as n,_e as o,Xa as p,Ua as q,$a as r,oa as s,Na as t,ne as u,Ya as v};
