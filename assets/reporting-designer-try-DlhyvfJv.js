const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/recursive-element-Bp8HnL5h.js","assets/index-JAmVxnob.js","assets/index-DdrvFGbf.css","assets/dynamic-DHjkHrbk.js","assets/index-AxBFuKLQ.js","assets/T4C3DMHT-D76ZL_ho.js","assets/index-Cspn8q05.js","assets/index-vFhn2TLg.js","assets/dropdown-menu-BE69NfRZ.js","assets/button-Czybck0e.js","assets/use-local-storage-Dn1wHuvy.js","assets/toolbar-Bfz8Pb69.js","assets/layer-panel-CcW3Nyjs.js","assets/context-menu-DefCyAsD.js","assets/panel-resizer-D9VDx1CS.js","assets/index-BKcg2Qs7.js","assets/setting-panel-CuZnH76l.js","assets/use-supported-DfFQDpaB.js"])))=>i.map(i=>d[i]);
var kt=Object.defineProperty;var Mt=(a,r,o)=>r in a?kt(a,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[r]=o;var oe=(a,r,o)=>Mt(a,typeof r!="symbol"?r+"":r,o);import{m as ve,e as be,f as re,g as Q,L as I,l as k,o as ce,c as v,p as Rt,n as Nt,W as Me,X as _t,h as Re,b as te,i as O,t as ae,N as Ee,O as xe,u as ye,S as V,a as Se,Y as Xe,j as Pt,F as Ot,Z as At,$ as Ft,a0 as $t,a1 as Ht,a2 as Bt,d as Ne,q as zt}from"./index-JAmVxnob.js";import{l as L,e as je,f as Xt,q as De,t as ge,u as We}from"./index-AxBFuKLQ.js";import{B as pe}from"./button-Czybck0e.js";import{u as jt}from"./use-local-storage-Dn1wHuvy.js";class _e{constructor(r){oe(this,"x");oe(this,"y");oe(this,"width");oe(this,"height");this.x=Math.floor(r.x),this.y=Math.floor(r.y),this.width=Math.floor(r.width),this.height=Math.floor(r.height)}get rect(){return{x:this.x,y:this.y,width:this.width,height:this.height}}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get center(){return{x:this.x+this.width*.5,y:this.y+this.height*.5}}get corners(){return{topLeft:{x:this.left,y:this.top},topRight:{x:this.right,y:this.top},bottomRight:{x:this.left,y:this.bottom},bottomLeft:{x:this.right,y:this.bottom}}}}const ee=a=>{let r=new _e(a.getBoundingClientRect());const{transform:o}=getComputedStyle(a);return o&&(r=Wt(r,o)),r},Wt=(a,r)=>{let o,n;if(r.startsWith("matrix3d(")){const e=r.slice(9,-1).split(/, /);o=+e[12],n=+e[13]}else if(r.startsWith("matrix(")){const e=r.slice(7,-1).split(/, /);o=+e[4],n=+e[5]}else o=0,n=0;return new _e({...a,x:a.x-o,y:a.y-n})},Ut=()=>({x:0,y:0}),Ta=(a,r)=>a.x===r.x&&a.y===r.y,Yt=(a,r)=>new _e({...a,x:a.x+r.x,y:a.y+r.y}),Kt=(a,r)=>{const o=Math.max(a.top,r.top),n=Math.max(a.left,r.left),e=Math.min(a.right,r.right),l=Math.min(a.bottom,r.bottom),d=e-n,h=l-o;if(n<e&&o<l){const C=a.width*a.height,E=r.width*r.height,m=d*h;return m/(C+E-m)}return 0},Ue=(a,r)=>a.x===r.x&&a.y===r.y&&a.width===r.width&&a.height===r.height;function Gt(a){return/<[a-z][\s\S]*>/i.test(a)}function Ia(a){if(!a||!Gt(a))return a||"";const r=document.createElement("div");r.innerHTML=a||"";const o=r.textContent||r.innerText||"";return r.remove(),o}function se(a){return a.ctrlKey||a.metaKey}const Vt=(a,r="px")=>{if(typeof a=="number")return{value:a,unit:r};if(typeof a!="string")return;const o=parseFloat(a.match(/[+-]?([0-9]*[.])?[0-9]+/g)),n=[/px/,/mm/,/cm/,/in/],e=[];return n.forEach(l=>l.test(a)&&e.indexOf(l.exec(a)[0])==-1&&e.push(l.exec(a)[0])),{value:o,unit:e.length==1?e[0]:r}};function qt(a){const[r,o,n]=a.replace("rgb(","").replace(")","").split(",").map(e=>parseInt(e));return`#${[r,o,n].map(e=>e.toString(16).padStart(2,"0")).join("")}`}function Ca(a){return a?a!=null&&a.startsWith("rgb")?qt(a):!a.startsWith("#")&&a.match(/\b[a-fA-F0-9]{3,6}\b/g)?`#${a}`:a:null}function La(a){var m;const[r,o,n]=((m=a.replace("#","").match(/.{1,2}/g))==null?void 0:m.map(N=>parseInt(N,16)))||[0,0,0],e=Math.max(r,o,n),l=Math.min(r,o,n),d=e/255,h=e-l,C=e===0?0:h/e;return{h:(e===l?0:e===r?(o-n)/h+(o<n?6:0):e===o?(n-r)/h+2:(r-o)/h+4)*60,s:C,v:d}}function Da(a,r,o){r/=100,o/=100,a/=360;let n=0,e=0,l=0,d=Math.floor(a*6),h=a*6-d,C=o*(1-r),E=o*(1-h*r),m=o*(1-(1-h)*r);switch(d%6){case 0:n=o,e=m,l=C;break;case 1:n=E,e=o,l=C;break;case 2:n=C,e=o,l=m;break;case 3:n=C,e=E,l=o;break;case 4:n=m,e=C,l=o;break;case 5:n=o,e=C,l=E;break}return n=Math.round(n*255),e=Math.round(e*255),l=Math.round(l*255),`#${[n,e,l].map(N=>N.toString(16).padStart(2,"0")).join("")}`}const ka=(a,r,o)=>Math.min(o,Math.max(r,a));function Ma(a){if(!a)return 0;if(typeof a=="number")return a;const r=Number(a.replace("px",""));return isNaN(r)?0:r}function B(a,r=!0){return a=r?Math.round(a):a,`${a}px`}const Ra=a=>({transform:`translate3d(${a.x}px, ${a.y}px, 0)`}),Ye=(a,r,o)=>{const n=a.slice();return n.splice(o,0,...n.splice(r,1)),n},Na=(a,r,o,n=1)=>{const e=a.slice();return e.splice(o,0,...e.splice(r,n+1)),e};function _a(a,r){const o=Object.assign({},a);return r.split(".").reduce((n,e)=>n?n[e]:null,o)}function ke({inputString:a,defaultInputUnit:r="px",convertionUnit:o="px"}){const n=Vt(a,r),e=Object.freeze({px:1,mm:3.7795275591,cm:37.795275591,in:96}),l=Object.freeze({from_px:{to_px:1,to_mm:e.px/e.mm,to_cm:e.px/e.cm,to_in:e.px/e.in},from_mm:{to_mm:1,to_px:e.mm/e.px,to_cm:e.mm/e.cm,to_in:e.mm/e.in},from_cm:{to_cm:1,to_px:e.cm/e.px,to_mm:e.cm/e.mm,to_in:e.cm/e.in},from_in:{to_in:1,to_px:e.in/e.px,to_mm:e.in/e.mm,to_cm:e.in/e.cm}});return{value:n.value*l[`from_${n.unit}`][`to_${o}`],unit:o,error:[NaN,null,void 0].includes(n.value)}}var Zt=(a=>(a.Top="top",a.Right="right",a.Bottom="bottom",a.Left="left",a))(Zt||{}),M=(a=>(a.EDITING="editing",a.HEADER="header",a.FOOTER="footer",a.WATERMARK="watermark",a.PREVIEW="preview",a.PRINT="print",a))(M||{}),y=(a=>(a.SECTION="__body",a.TEXT="text",a.CONTAINER="container",a.TWO_COLUMN="2Col",a.IMAGE="image",a.TABLE="table",a.CHART="chart",a))(y||{});const Jt="repeating-linear-gradient(45deg, rgba(180, 180, 180, 0.8) 0px, rgba(180, 180, 180, 0.8) 1px, rgba(255, 255, 255, 0.2) 0px, rgba(255, 255, 255, 0.2) 50%) 0% 0% / 16px 16px",Ke={solid:"[&>div>table>thead>tr>th]:border-b [&>div>table>thead>tr>th]:border-[#888888] [&>div>table>tbody>tr>td]:border-b [&>div>table>tbody>tr>td]:border-[#dddddd] [&>div>table>tbody>tr:last-child>td]:border-[#aaaaaa]",dashed:"[&>div>table>thead>tr>th]:border-b [&>div>table>thead>tr>th]:border-[#888888] [&>div>table>tbody>tr>td]:border-b [&>div>table>tbody>tr>td]:border-[#dddddd] [&>div>table>tbody>tr:last-child>td]:border-[#aaaaaa] [&>div>table>thead>tr>th]:border-dashed [&>div>table>tbody>tr>td]:border-dashed","striped-row":"[&>div>table>tbody>tr:nth-child(2n-1)>td]:bg-[#f5f5f5]"};function _(a){switch(a){case y.TEXT:return{content:[],name:"Text",originalElement:"p",styles:{"font-size":"16px",height:"fit-content","min-width":"10px",width:"fit-content","max-width":"unset",display:"inline-block"},attributes:{},innerHTML:"Type Text",type:y.TEXT};case y.TABLE:return{content:[{id:L(),..._("simple-table-child"),name:"Table Head",originalElement:"thead",content:[{id:L(),..._("simple-table-child"),name:"Table Row",originalElement:"tr",content:[{id:L(),..._("simple-table-child"),name:"Table Cell",originalElement:"th",styles:{"text-align":"center","vertical-align":"top","padding-top":"10px","padding-bottom":"10px",color:"#333333","font-weight":"medium","font-size":"inherit"},content:[{id:L(),..._(y.TEXT),innerHTML:"No",styles:{"font-size":"11px",height:"fit-content","min-width":"10px",width:"fit-content","max-width":"unset",display:"inline-block"}}]},{id:L(),..._("simple-table-child"),name:"Table Cell",originalElement:"th",styles:{"text-align":"center","vertical-align":"top","padding-top":"10px","padding-bottom":"10px",color:"#333333","font-weight":"medium","font-size":"inherit"},content:[{id:L(),..._(y.TEXT),innerHTML:"Mata Pelajaran",styles:{"font-size":"11px",height:"fit-content","min-width":"10px",width:"fit-content","max-width":"unset",display:"inline-block"}}]}]}]},{id:L(),..._("simple-table-child"),name:"Table Body",originalElement:"tbody",content:[{id:L(),..._("simple-table-child"),name:"Table Row",originalElement:"tr",content:[{id:L(),..._("simple-table-child"),name:"Table Cell",originalElement:"td",styles:{"text-align":"center","vertical-align":"top","padding-top":"10px","padding-bottom":"10px",color:"#333333","font-weight":"normal","font-size":"inherit"},content:[{id:L(),..._(y.TEXT),innerHTML:"1",styles:{"font-size":"11px",height:"fit-content","min-width":"10px",width:"fit-content","max-width":"unset",display:"inline-block"}}]},{id:L(),..._("simple-table-child"),name:"Table Cell",originalElement:"td",styles:{"text-align":"center","vertical-align":"top","padding-top":"10px","padding-bottom":"10px",color:"#333333","font-weight":"normal","font-size":"inherit"},content:[{id:L(),..._(y.TEXT),innerHTML:"Matematika",styles:{"font-size":"11px",height:"fit-content","min-width":"10px",width:"fit-content","max-width":"unset",display:"inline-block"}}]}]}]}],name:"Table",originalElement:"div",styles:{"font-size":"inherit",height:"fit-content","line-height":"14px","min-width":"10px",width:"100%"},attributes:{"data-table-style":"solid","data-table-strip":"1"},classes:`${Ke.solid} ${Ke["striped-row"]}`,type:y.TABLE};case y.CHART:return{content:[],name:"Chart",originalElement:"div",styles:{"font-size":"inherit",height:"200px","line-height":"14px","min-width":"10px",width:"100%"},attributes:{},type:y.CHART};case y.IMAGE:return{content:[],name:"Image",originalElement:"img",styles:{width:"100%",height:"200px","object-fit":"cover","flex-shrink":0,background:Jt},attributes:{draggable:"false"},type:y.IMAGE};case y.CONTAINER:return{content:[],name:"Container",styles:{display:"flex","flex-direction":"column",width:"100%",height:"200px","flex-shrink":0,overflow:"hidden",background:"#ededed"},originalElement:"div",attributes:{},type:y.CONTAINER};case y.SECTION:return{content:[],name:"Section",originalElement:"div",styles:{display:"flex","flex-direction":"column",width:"100%",height:"100%","font-family":"Inter"},attributes:{"data-page-break":"1","data-page-header":"1","data-page-footer":"1","data-page-watermark":"1"},type:y.SECTION};case"container-header-footer":return{content:[],name:"Section",originalElement:"div",styles:{display:"flex","flex-direction":"column",width:"100%",height:"100%","font-family":"Inter"},attributes:{},type:y.SECTION};case"repeater":return{name:"Repeater",content:[],originalElement:"div",styles:{display:"flex","flex-direction":"column",width:"100%","flex-shrink":0,"min-height":"300px",overflow:"hidden"},attributes:{},isRepeaterElement:!0,type:y.CONTAINER};case"watermark":return{name:"Watermark",content:[{id:L(),..._(y.IMAGE),styles:{width:"11%",height:"77px","object-fit":"contain","flex-shrink":0,background:"","margin-bottom":"0px"},attributes:{draggable:"false"},dataKey:{key:"school_logo",type:"attribute",property:"src"}}],originalElement:"div",styles:{display:"flex","flex-direction":"column",width:"100%",height:"100%","font-family":"Inter",position:"absolute",top:0,bottom:0,left:0,right:0,"justify-content":"center","align-items":"center",opacity:.2},attributes:{},isRepeaterElement:!1,type:y.SECTION};case"simple-table-child":return{content:[],name:"Container",styles:{width:"fit-content",height:"fit-content","font-size":"inherit"},originalElement:"div",attributes:{"data-table-component":"true"},type:y.CONTAINER};default:return null}}const Ge=(a,r,o)=>{const n=a.transformed,e={ratio:0,droppable:null};for(const l of r){const d=Kt(n,l.layout);d>e.ratio?(e.ratio=d,e.droppable=l):d>0&&d===e.ratio&&l.id===o.activeDroppableId&&(e.droppable=l)}return e.droppable},et={items:[{family:"Inter",variants:["100","100italic","200","200italic","300","300italic","400","400italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Roboto",variants:["regular","italic","500","500italic","700","700italic"]},{family:"Open Sans",variants:["regular","italic","300","300italic","600","600italic","700","700italic","800","800italic"]},{family:"Bebas Neue",variants:[]},{family:"DM Sans",variants:["regular","italic","300","300italic","600","600italic","700","700italic","800","800italic"]},{family:"Kalam",variants:["regular","italic","300","300italic","600","600italic","700","700italic","800","800italic"]},{family:"Oregano",variants:["regular","italic","300","300italic","600","600italic","700","700italic","800","800italic"]},{family:"Tangerine",variants:["regular","italic","300","300italic","600","600italic","700","700italic","800","800italic"]},{family:"Lato",variants:["regular","italic","100","100italic","300","300italic","700","700italic","900","900italic"]},{family:"Montserrat",variants:["regular","italic","100","100italic","200","200italic","300","300italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Raleway",variants:["regular","italic","100","100italic","200","200italic","300","300italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Source Sans Pro",variants:["regular","italic","200","200italic","300","300italic","600","600italic","700","700italic","900","900italic"]},{family:"Oswald",variants:["regular","200","300","500","600","700"]},{family:"Poppins",variants:["regular","italic","200","200italic","300","300italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Ubuntu",variants:["regular","italic","300","300italic","500","500italic","700","700italic"]},{family:"Playfair Display",variants:["regular","italic","700","700italic","900","900italic"]},{family:"Noto Sans",variants:["regular","italic","700","700italic"]},{family:"Quicksand",variants:["regular","italic","300","300italic","500","500italic","700","700italic"]},{family:"Merriweather",variants:["regular","italic","700","700italic","900","900italic"]},{family:"Lora",variants:["regular","italic","500","500italic","600","600italic","700","700italic"]},{family:"Pacifico",variants:["regular"]},{family:"Comfortaa",variants:["regular"]},{family:"Dosis",variants:["regular","200","300","500","600","700","800"]},{family:"Montserrat Alternates",variants:["regular","italic","500","500italic","600","600italic","700","700italic","800","800italic"]},{family:"Work Sans",variants:["regular","italic","100","100italic","200","200italic","300","300italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Roboto Condensed",variants:["regular","italic","300","300italic","700","700italic"]},{family:"Josefin Sans",variants:["regular","italic","100","100italic","300","300italic","600","600italic","700","700italic"]},{family:"Indie Flower",variants:["regular"]},{family:"Dancing Script",variants:["regular","700"]},{family:"Archivo",variants:["regular","italic","500","500italic","600","600italic","700","700italic"]},{family:"Titillium Web",variants:["regular","italic","200","200italic","300","300italic","600","600italic","700","700italic","900","900italic"]},{family:"Exo",variants:["regular","italic","100","100italic","200","200italic","300","300italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Cabin",variants:["regular","italic","500","500italic","600","600italic","700","700italic"]},{family:"Yanone Kaffeesatz",variants:["regular","200","300","700"]},{family:"Lobster",variants:["regular"]},{family:"Arvo",variants:["regular","italic","700","700italic"]},{family:"PT Sans",variants:["regular","italic","700","700italic"]},{family:"Fira Sans",variants:["regular","italic","300","300italic","500","500italic","700","700italic"]},{family:"Bitter",variants:["regular","italic","700"]},{family:"Lobster Two",variants:["regular","italic","700","700italic"]},{family:"Merriweather Sans",variants:["regular","italic","300","300italic","700","700italic","800","800italic"]},{family:"Cabin Condensed",variants:["regular","500","600","700"]},{family:"Lato Latin",variants:["100","100italic","300","300italic","regular","italic","700","700italic","900","900italic"]},{family:"Source Code Pro",variants:["regular","200","300","500","600","700","900"]},{family:"Inconsolata",variants:["regular","700"]},{family:"Nunito",variants:["regular","italic","200","200italic","300","300italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"PT Serif",variants:["regular","italic","700","700italic"]},{family:"Cabin Sketch",variants:["regular","700"]},{family:"Righteous",variants:["regular"]},{family:"Amatic SC",variants:["regular","700"]},{family:"Droid Sans",variants:["regular","700"]},{family:"Fira Mono",variants:["regular","500","700"]},{family:"Quattrocento",variants:["regular","700"]},{family:"Archivo Black",variants:["regular"]},{family:"PT Sans Narrow",variants:["regular","700"]},{family:"Pacifico Latin",variants:["regular"]}]},Pa=et.items.filter(a=>a.variants.length>=3).map(a=>a.family),Pe=new Set,Qt=a=>Pe.has(a),ea=a=>{Pe.add(a)},ta=(a,r)=>new Promise(o=>{var n;if(!a||(typeof r!="string"&&(r=null),r=r||"400",r&&["100","200","300","400","500","600","700","800","900"].includes(r)&&(a=`${a}:${r}`),Qt(a)))return o(a);ea(a),(n=window.WebFont)==null||n.load({google:{families:[a],crossOrigin:"anonymous"},active:o(a)})}),Oa=a=>{const r=[{value:"400",label:"Regular"}];if(!a)return r;const o=et.items.find(n=>n.family===a);return o?o.variants.filter(n=>!n.includes("italic")).map(n=>{switch(n){case"regular":return{value:"400",label:"Regular"};case"100":return{value:"100",label:"Thin"};case"200":return{value:"200",label:"Extra Light"};case"300":return{value:"300",label:"Light"};case"400":return{value:"400",label:"Regular"};case"500":return{value:"500",label:"Medium"};case"600":return{value:"600",label:"Semi Bold"};case"700":return{value:"700",label:"Bold"};case"800":return{value:"800",label:"Extra Bold"};case"900":return{value:"900",label:"Black"};default:return{value:n,label:n}}}):r};function Aa(a){var o;const r=(o=a.match(/font-family: ([^;"]+)["|;]/g))==null?void 0:o.map(n=>n.replace(/font-family: ([^;"]+)["|;]/,"$1"));r&&r.forEach(n=>{ta(n,null)})}const Ve={developerMode:!0,activeControl:"mouse-pointer",textControlType:"dynamic",mode:M.EDITING,sensors:{},activeSensor:null,blockNodeElement:{},layerElement:{},activeMovingElement:{draggableElementId:null,droppableElementId:null},activeMovingLayer:{draggableLayerId:null,droppableLayerId:null},visiblePages:[],cursor:"url('/images/mouse-pointer.svg'), default !important",isWebFontActive:!1,isDrawing:!1,doctype:null,currentDoc:null,isPDFSetupMode:!1,isHeaderFooterAuto:!0,isPreviewMode:!1,currentFonts:["Inter"],printHeaderFonts:null,printBodyFonts:null,printFooterFonts:null,rawMeta:null,metaFields:[],docData:{},dynamicData:[],imageDocFields:[],snapPoints:[],snapEdges:[],propertiesContainer:new Object,openDynamicModal:null,datacontrols:{documentControl:null,tableControl:null},isMoveStart:!1,isDropped:!1,isAltKey:!1,isShiftKey:!1,lastCloned:null,currentDrawListener:null,isMoved:!1,isHiddenFieldsVisible:!1,lastCreatedElement:null,screenStyleSheet:null,printStyleSheet:null,toolbarWidth:44,printDesignName:"",isLayerPanelEnabled:!1,extendComponent:{},page:{currentPageSize:"A4",height:1122.519685,width:793.7007874,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,headerHeight:0,footerHeight:0,headerHeightWithMargin:0,footerHeightWithMargin:0,UOM:"px",pdfPrintDPI:96,fonts:{}},pageData:{},globalData:{},controls:{Text:{icon:"textTool",control:y.TEXT,aria_label:"Text (T)",id:"text",cursor:"url('/assets/print_designer/images/add-text.svg') 10 10, text",isDisabled:!1,draggable:!0},Rectangle:{icon:"rectangleTool",control:y.CONTAINER,aria_label:"Rectangle (R)",id:"rectangle",cursor:"url('/assets/print_designer/images/add-rectangle.svg') 6 6, crosshair",isDisabled:!1,draggable:!0},Image:{icon:"imageTool",control:y.IMAGE,aria_label:"Image (I)",id:"image",cursor:"url('/assets/print_designer/images/add-image.svg') 6 6, crosshair",isDisabled:!1,draggable:!0},Table:{icon:"tableTool",control:y.TABLE,aria_label:"Table (A)",id:"table",cursor:"url('/assets/print_designer/images/add-table.svg') 6 6, crosshair",isDisabled:!1,draggable:!0}},editableElementId:null,selectedElementIds:[],selectedElements:[],hoveredElementId:null,canvasBuilder:{scale:1,translateX:0,translateY:0,scaling:!1,panning:!1,moving:!1,nodeContainer:null,containerLayout:null,nodeCanvas:null,nodeCanvasLayout:null,nodeOverlay:null}},aa={elements:[{id:L(),..._(y.SECTION)}],headers:{id:L(),..._("container-header-footer"),name:"Headers",showToAllSection:!0,sectionIndex:[]},footers:{id:L(),..._("container-header-footer"),name:"Footers",showToAllSection:!0,sectionIndex:[]},watermark:{id:L(),..._("watermark"),usingWatermark:!0,previewWatermark:!1,showToAllSection:!0,sectionIndex:[]}},qe={data:aa},tt=Nt(),na=a=>{const r=ve({developerMode:!1,pageData:{},globalData:{},extendComponent:{},pageSettings:Ve.page,elementsData:qe.data},a),[o,n]=be(r,["developerMode","globalData","pageData","extendComponent","pageSettings","elementsData"]),[e,l]=je({...Ve,get selectedElements(){return this.selectedElementIds.map(t=>J(t)).filter(t=>!!t)}}),[d,h]=je(qe),[C,E]=re(!1),m=Xt([()=>{if(C()){ge(e.page);const t=structuredClone(We(e.page));return()=>l("page",De(t))}},()=>{if(C()){ge(d.data);const t=structuredClone(We(d.data));return()=>{h("data",De(t)),Y([],t.elements),Y([0],t.footers.content),Y([0],t.headers.content),Y([0],t.watermark.content)}}}]),N=(t,i=1)=>{let s=ke({inputString:t,defaultInputUnit:"px",convertionUnit:e.page.UOM});if(!s.error)return parseFloat(s.value.toFixed(i))},G=(t,i=e.page.UOM,s=1)=>{let c=ke({inputString:t,defaultInputUnit:i,convertionUnit:"px"});if(!c.error)return parseFloat(c.value.toFixed(s))},z=(t,i=e.page.UOM,s=1)=>{const c=ke({inputString:t,defaultInputUnit:"px",convertionUnit:i});return(c.value?c.value.toFixed(s):0)+` ${c.unit}`},$=(t,i=e.page.UOM,s=!1,c,u=1)=>s||c?`${t||0} ${c?" "+c:""}`:z(t||0,i,u),R=t=>{l("mode",t)},f=()=>{switch(e.mode){case M.HEADER:return K();case M.FOOTER:return j();case M.EDITING:return P();default:return{}}},P=()=>(e.mode,{height:N(e.page.height-(e.page.marginTop+e.page.marginBottom))+e.page.UOM,width:N(e.page.width-(e.page.marginLeft+e.page.marginRight))+e.page.UOM}),K=()=>({height:N(e.page.headerHeight)+e.page.UOM,width:N(e.page.width-e.page.marginLeft-e.page.marginRight)+e.page.UOM}),j=()=>({height:N(e.page.footerHeight)+e.page.UOM,width:N(e.page.width-e.page.marginLeft-e.page.marginRight)+e.page.UOM}),W=()=>{h("data","elements",t=>[...t,{id:L(),..._(y.SECTION)}])},D=t=>{l("canvasBuilder",{...e.canvasBuilder,...t})},U=(t,i)=>{l("canvasBuilder",t,i)},J=(t,i)=>e.blockNodeElement[t]||null,x=(t=[])=>{switch(e.mode){case M.HEADER:return["data","headers",...t.length>0?t.slice(1):t];case M.FOOTER:return["data","footers",...t.length>0?t.slice(1):t];case M.WATERMARK:return["data","watermark",...t.length>0?t.slice(1):t];case M.EDITING:return["data","elements",...t];default:return[]}},X=(t,i)=>{h(...x(t),"styles",s=>({...s,...i}))},A=(t,i)=>{const s=e.blockNodeElement[t];s&&X(s.data.path,i)},T=(t,i,s)=>{h(...x(t),i,s)},ie=({id:t,node:i,layout:s,data:c,isRoot:u,isContainer:g,isText:p,isImage:b,isTable:w,isRepeater:S,isChart:H,getStyle:F,getIcon:q,getAttribute:Lt,getClasses:Dt,getDataKey:Be})=>{const ze={id:t,node:i,layout:s,data:c,isRoot:u,isContainer:g,isText:p,isImage:b,isRepeater:S,isTable:w,isChart:H,getStyle:F,getIcon:q,getAttribute:Lt,getClasses:Dt,getDataKey:Be,_pendingCleanup:!1};e.blockNodeElement[t]||Object.defineProperties(ze,{setStyle:{enumerable:!0,configurable:!0,get:()=>(Z,le)=>{A(t,{[Z]:le})}},updateStyles:{enumerable:!0,configurable:!0,get:()=>Z=>{A(t,Z)}},setAttribute:{enumerable:!0,configurable:!0,get:()=>(Z,le)=>{T([...c.path,"attributes"],Z,le)}},setClasses:{enumerable:!0,configurable:!0,get:()=>Z=>{T(c.path,"classes",Z)}},setDataKey:{enumerable:!0,configurable:!0,get:()=>(Z,le)=>{I(()=>{Be("type")||T(c.path,"dataKey",{key:"",type:b?"attribute":"key",property:b?"src":"innerHTML"}),T([...c.path,"dataKey"],Z,le)})}}}),I(()=>{l("blockNodeElement",t,ze)})},de=t=>{k(()=>e.blockNodeElement[t])&&(l("blockNodeElement",t,"_pendingCleanup",!0),queueMicrotask(()=>we(t)))},we=t=>{if(e.blockNodeElement[t]&&e.blockNodeElement[t]._pendingCleanup){const i=e.selectedElementIds.includes(t);I(()=>{i&&l("selectedElementIds",s=>s.filter(c=>c!=t)),l("blockNodeElement",t,void 0)})}},ue=t=>{de(t.id),Ae(t.id),t.content.length&&t.content.forEach(i=>{ue(i)})},nt=t=>{E(!1);const i=e.blockNodeElement[t];if(i){let s=null;if(i.isRoot)i.isRoot&&e.mode===M.EDITING&&d.data.elements.length>1&&h("data","elements",c=>{const u=c.filter(g=>g.id===i.id?(s=g,!1):!0);return Y([],u),u});else{const c=i.data.path.slice(0,i.data.path.length-2);I(()=>{i.isRoot||T(c,"content",u=>{const g=u.filter(p=>p.id===i.id?(s=p,!1):!0);return Y(c,g),g})})}s&&ue(s)}E(!0)},Oe=(t,i=!1)=>{i?l("selectedElementIds",s=>[...s,t]):l("selectedElementIds",[t])},rt=t=>e.selectedElementIds.includes(t),it=t=>{rt(t)?l("selectedElementIds",i=>[...i.splice(i.indexOf(t),1)]):Oe(t,!0)},lt=()=>{I(()=>{l("selectedElementIds",[]),l("editableElementId",null)})},ot=(t,i)=>{i&&i.shiftKey?it(t):Oe(t)},st=(t,i)=>{l("hoveredElementId",t),i==null||i.stopPropagation()},ct=t=>{l("hoveredElementId",null),t==null||t.stopPropagation()},dt=({id:t,node:i,layout:s,data:c})=>{const u=e.layerElement[t],g={id:t,node:i,layout:s,data:c,_pendingCleanup:!1};let p;if(!u)Object.defineProperties(g,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:p||{}},transform:{enumerable:!0,configurable:!0,get:()=>{const b=Object.values(e.layerElement[t].transformers);return b.sort((w,S)=>w.order-S.order),b.reduce((w,S)=>S.callback(w),Ut())}},transformed:{enumerable:!0,configurable:!0,get:()=>Yt(e.layerElement[t].layout,e.layerElement[t].transform)}});else if(e.activeMovingLayer.draggableLayerId===t){const b="addDraggable-existing-offset",w={x:u.layout.x-s.x,y:u.layout.y-s.y},S=u.transformers[b],H=S?S.callback(w):w;p={id:b,order:100,callback:F=>({x:F.x+H.x,y:F.y+H.y})},Le(()=>Ce("layer",t,b))}I(()=>{l("layerElement",t,g),p&&Ie("layer",t,p)}),e.activeMovingLayer.draggableLayerId&&me()},Ae=t=>{k(()=>e.layerElement[t])&&(l("layerElement",t,"_pendingCleanup",!0),queueMicrotask(()=>ut(t)))},ut=t=>{var i;if((i=e.layerElement[t])!=null&&i._pendingCleanup){const s=e.activeMovingLayer.draggableLayerId===t||e.activeMovingLayer.droppableLayerId===t;I(()=>{s&&(l("activeMovingLayer","draggableLayerId",null),l("activeMovingLayer","droppableLayerId",null)),l("layerElement",t,void 0)})}},mt=({id:t,activators:i})=>{l("sensors",t,{id:t,activators:i,coordinates:{origin:{x:0,y:0},current:{x:0,y:0},get delta(){return{x:e.sensors[t].coordinates.current.x-e.sensors[t].coordinates.origin.x,y:e.sensors[t].coordinates.current.y-e.sensors[t].coordinates.origin.y}}}})},gt=t=>{if(!k(()=>e.sensors[t])){console.warn(`Cannot remove nonexistent sensor with id: ${t}`);return}const i=e.activeSensor===t;I(()=>{i&&l("activeSensor",null),l("sensors",t,void 0)})},pt=(t,i)=>{I(()=>{l("sensors",t,"coordinates",{origin:{...i},current:{...i}}),l("activeSensor",t)})},ft=t=>{const i=e.activeSensor;if(!i){console.warn("Cannot move sensor when no sensor active.");return}l("sensors",i,"coordinates","current",{...t})},ht=()=>{l("activeSensor",null)},yt=(t,i,s)=>{const c={};for(const g of Object.values(e.sensors))if(g)for(const[p,b]of Object.entries(g.activators))c[p]??(c[p]=[]),c[p].push({sensor:g,activator:b});const u={};for(const g in c){let p=g;s&&(p=`on${g}`),u[p]=b=>{for(const{activator:w}of c[g]){if(e.activeSensor)break;w(b,t,i)}}}return u},Y=(t,i)=>{I(()=>{const s=new WeakMap;i.forEach((c,u)=>{var p;const g=e.blockNodeElement[c.id];if(g){let b=[];t.length?b=[...t,"content",u]:b=[u],l("blockNodeElement",c.id,"data","index",u),l("blockNodeElement",c.id,"data","path",b);const w=g.layout;s.has(g.node)||s.set(g.node,ee(g.node));const S=s.get(g.node);Ue(w,S)||l("blockNodeElement",g.id,"layout",S),(p=c.content)!=null&&p.length&&Y(b,c.content)}})})},Fe=(t,i)=>{let s=!1;const c=t.layout;if(i){i.has(t.node)||i.set(t.node,ee(t.node));const u=i.get(t.node);Ue(c,u)||(l("layerElement",t.id,"layout",u),s=!0)}else l("layerElement",t.id,"layout",ee(t.node));return s},me=()=>{let t=!1;const i=Object.values(e.layerElement);return I(()=>{const s=new WeakMap;for(const c of i)c&&(t=Fe(c,s))}),t},Te=t=>{const i=e.activeMovingLayer.draggableLayerId||"",s=e.layerElement[i];if(s){let c=k(()=>Object.values(e.layerElement));if(s&&!s.data.parentId&&(c=c.filter(u=>!u.data.parentId)),c=c.filter(u=>e.activeMovingLayer.draggableLayerId!==u.id&&!u.data.parentIds.includes(i)),t==="layer"&&e.activeMovingLayer.draggableLayerId&&s){let u=Ge(e.layerElement[e.activeMovingLayer.draggableLayerId],c.filter(p=>[y.CONTAINER,y.SECTION].includes(p.data.type)),{activeDroppableId:e.activeMovingLayer.droppableLayerId});if(u!=null&&u.id){const p=Ge(e.layerElement[e.activeMovingLayer.draggableLayerId],c.filter(b=>b.data.parentIds.includes(u.id)),{activeDroppableId:e.activeMovingLayer.droppableLayerId});if(p){if(s.data.parentId==p.data.parentId)u=p;else if(e.layerElement[u.id].data.childrenIds.indexOf(p.id)===e.layerElement[u.id].data.childrenIds.length-1){const w=s.transformed.center.y>p.transformed.center.y,S=p.transformed.x-s.transformed.x;if(!w||S<12)u=p;else{const H=p.data.parentIds.length-Math.min(Math.floor(S/12),p.data.parentIds.length),F=p.data.parentIds[H],q=e.layerElement[F];parent&&(u=q)}}}}let g=u?u.id:null;e.activeMovingLayer.droppableLayerId!==g&&l("activeMovingLayer","droppableLayerId",g)}}},Ie=(t,i,s)=>{if(t==="layer"){if(!k(()=>e.layerElement[i])){console.warn(`Cannot add transformer to nonexistent ${t} with id: ${i}`);return}l("layerElement",i,"transformers",s.id,s)}},Ce=(t,i,s)=>{if(t==="layer"){if(!k(()=>e.layerElement[i]))return;if(!k(()=>e.layerElement[i].transformers[s])){console.warn(`Cannot remove from ${t} with id ${i}, nonexistent transformer with id: ${s}`);return}l("layerElement",i,"transformers",s,void 0)}},vt=(t,i)=>{var s,c;if(E(!1),t&&i){const u=(s=t==null?void 0:t.data)==null?void 0:s.parentId,g=u&&i.data.type==y.SECTION?i.id:(c=i==null?void 0:i.data)==null?void 0:c.parentId;let p=[],b=[];if(u&&(p=e.blockNodeElement[u].data.path),g&&(b=e.blockNodeElement[g].data.path),!u&&!g){const w=e.blockNodeElement[t.id].data.index,S=e.blockNodeElement[i.id].data.index;I(()=>{h(...x([]),H=>{const F=Ye(H,w,S);return Y([],F),F})})}else if(u===g){const w=e.blockNodeElement[t.id].data.index,S=e.blockNodeElement[i.id].data.index;I(()=>{T(p,"content",H=>{const F=Ye(H,w,S);return Y(p,F),F})})}else{let w=0;u&&i.data.type!==y.SECTION&&(w=e.blockNodeElement[i.id].data.index),I(()=>{let S=null;T(p,"content",H=>{const F=H.filter(q=>q.id===t.id?(S=q,!1):!0);return Y(p,F),F}),S&&g&&(b=e.blockNodeElement[g].data.path,T(b,"content",F=>{const q=[...F.slice(0,w),S,...F.slice(w)];return Y(b,q),q}))})}}E(!0)},bt=(t,i)=>{const s={id:"sensorMove",order:0,callback:c=>{const u=e.activeSensor;if(u){const g=k(()=>e.sensors[u]);return{x:c.x+g.coordinates.delta.x,y:c.y+g.coordinates.delta.y}}return c}};i==="layer"&&(I(()=>{U("moving",!0),l("activeMovingLayer","draggableLayerId",t),Ie(i,t,s)}),me()),Te(i)},Et=t=>{const i=k(()=>e.activeMovingLayer.draggableLayerId);t=="layer"&&(I(()=>{i!==null&&Ce("layer",i,"sensorMove"),l("activeMovingLayer",["draggableLayerId","droppableLayerId"],null),U("moving",!1)}),me())},xt=t=>{Q(()=>{const i=e.activeMovingLayer.draggableLayerId||"",s=k(()=>e.layerElement[i]);s&&t&&k(()=>t({draggable:s}))})},$e=t=>{Q(()=>{const i=e.activeMovingLayer.draggableLayerId||"",s=k(()=>e.layerElement[i]);s&&t&&(Object.values(s.transform),k(()=>t({draggable:s})))})},St=t=>{Q(()=>{const i=e.activeMovingLayer.draggableLayerId||"",s=e.activeMovingLayer.droppableLayerId||"",c=k(()=>e.layerElement[i]),u=k(()=>e.layerElement[s]||null);c&&t&&k(()=>t({draggable:c,droppable:u}))})},Le=t=>{Q(({previousDraggable:i,previousDroppable:s})=>{const c=e.activeMovingLayer.draggableLayerId||"",u=e.activeMovingLayer.droppableLayerId||"",g=k(()=>e.layerElement[c]),p=k(()=>e.layerElement[u]||null);return!g&&i&&t&&k(()=>t({draggable:i,droppable:s})),{previousDraggable:g,previousDroppable:p}},{previousDraggable:null,previousDroppable:null})};$e(()=>Te("layer")),Le(({draggable:t,droppable:i})=>vt(t,i)),Q(()=>{I(()=>{l("developerMode",o.developerMode),l("globalData",t=>({...t,...o.globalData})),l("pageData",t=>({...t,...o.pageData})),l("extendComponent",t=>({...t,...o.extendComponent}))})}),Q(()=>{E(!1),I(()=>{l("page",t=>({...t,...o.pageSettings})),["elements","headers","footers","watermark"].forEach(t=>{o.elementsData[t]&&h("data",t,De(o.elementsData[t]))})}),E(!0)});const wt=(t,i)=>{E(!1);const s=e.blockNodeElement[t];if(s&&s.data.path.length>6){const c=s.data.path.slice(0,s.data.path.length-2),u=c[c.length-1],g=s.data.path.slice(0,s.data.path.length-6);I(()=>{s.isRoot||T(g,"content",p=>{let b=structuredClone(p);return b=b.map(w=>(w.originalElement=="thead"?w.content=w.content.map((S,H)=>{if(H===u){const F=i==="left"?s.data.index:s.data.index+1;S.content=[...S.content.slice(0,F),{id:L(),..._("simple-table-child"),name:"Table Cell",originalElement:"th",styles:{"text-align":"center","vertical-align":"top","padding-top":"10px","padding-bottom":"10px",color:"#333333","font-weight":"medium","font-size":"inherit"},content:[{id:L(),..._(y.TEXT),innerHTML:"New",styles:{"font-size":"11px",height:"fit-content","min-width":"10px",width:"fit-content","max-width":"unset",display:"inline-block"}}]},...S.content.slice(F)]}return S}):w.originalElement=="tbody"&&(w.content=w.content.map(S=>{const H=i==="left"?s.data.index:s.data.index+1;return S.content=[...S.content.slice(0,H),{id:L(),..._("simple-table-child"),name:"Table Cell",originalElement:"td",styles:{"text-align":"center","vertical-align":"top","padding-top":"10px","padding-bottom":"10px",color:"#333333","font-weight":"normal","font-size":"inherit"},content:[{id:L(),..._(y.TEXT),innerHTML:"New",styles:{"font-size":"11px",height:"fit-content","min-width":"10px",width:"fit-content","max-width":"unset",display:"inline-block"}}]},...S.content.slice(H)],S})),w)),Y(g,b),b})})}E(!0)},He=t=>{const i=structuredClone(t);return i.id=L(),i.content&&(i.content=i.content.map(s=>He(s))),i},Tt=t=>{E(!1);const i=e.blockNodeElement[t];if(i&&!i.isRoot){const s=i.data.path.slice(0,i.data.path.length-2);I(()=>{T(s,"content",c=>{let u=structuredClone(c);return u=u.reduce((g,p)=>{const b=[p];return p.id===i.id&&b.push(He(p)),[...g,...b]},[]),Y(s,u),u})})}E(!0)};Q(()=>{ge(e.page),ge(d.data),k(()=>r.onUpdate)&&k(()=>r.onUpdate)({pageSettings:{...k(()=>e.page),fonts:Array.from(Pe).reduce((t,i)=>{var c;const s=i.split(":");return{...t,[s[0]]:{weight:[...((c=t[s[0]])==null?void 0:c.weight)||[],s[1]].sort(),italic:[]}}},{})},elementsData:k(()=>d.data)})});const It={setDocumentState:l,setElementState:h,getPageStyle:f,getPageSettings:P,updateSectionMode:R,convertToPageUOM:N,uomFormattedValue:z,styleFormattedValue:$,convertToPX:G,createNewSection:W,addCanvasBuilder:D,setCanvasProps:U,addNodeElement:ie,removeNodeElement:de,deleteElement:nt,addSelectedElement:ot,clearSelectionElement:lt,updateElementPropertyByPath:T,addHoveredElement:st,removeHoveredElement:ct,addLayer:dt,removeLayer:Ae,addSensor:mt,removeSensor:gt,sensorStart:pt,sensorMove:ft,sensorEnd:ht,dragStart:bt,dragEnd:Et,recomputeLayers:me,recomputedLayer:Fe,detectCollisions:Te,draggableActivators:yt,addTransformer:Ie,removeTransformer:Ce,onDragStart:xt,onDragMove:$e,onDragEnd:Le,onDragOver:St,addColumnToTable:wt,duplicateElement:Tt,openImageGallery:r.onOpenImageGalery,history:{canUndo:m.canUndo,canRedo:m.canRedo,undo:m.undo,redo:m.redo,pause:()=>{k(()=>E(!1))},resume:()=>{k(()=>E(!0))}}},Ct=[{documentState:e,elementState:d},It];return ce(()=>{window.WebFont||function(t){var i=t.createElement("script"),s=t.scripts[0];i.src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js",i.async=!0,s.parentNode.insertBefore(i,s),i.onload=()=>l("isWebFontActive",!0)}(document)}),v(tt.Provider,{value:Ct,get children(){return n.children}})},ne=()=>{const a=Rt(tt);if(!a)throw new Error("Cannot ReportTemplateDesign outside provider");return a},ra=(a,r,o={})=>{const[n,{setElementState:e,clearSelectionElement:l,updateElementPropertyByPath:d}]=ne(),[h,C]=re(!1),[E,m]=re(null);function N(f){C(!1),f.preventDefault()}function G(f){C(!0),f.preventDefault()}function z(f){var P,K,j;try{C(!1),f.stopPropagation();let W=(P=f.dataTransfer)==null?void 0:P.getData("componentType"),D=_(W);const U=(K=f.dataTransfer)==null?void 0:K.getData("extendedComponent");U&&(W="extendedComponent",D=JSON.parse(U));let J=document.elementFromPoint(f.x,f.y),x=[];const X=((j=J.dataset)==null?void 0:j.blockId)||"",A=n.documentState.blockNodeElement[X];W&&D&&A&&(A.isContainer||A.isRoot)&&A.data.path&&(x=A.data.path,A.isContainer&&W===y.CONTAINER&&(D.styles={...D.styles,background:_t(Math.ceil(Math.random()*100)),width:`${A.layout.width/((A.node.children.length||0)+2)}px`},A.setStyle("flex-direction","row")),n.documentState.mode===M.HEADER?e("data","headers",...x.slice(1),"content",T=>[...T,{...D,id:L()}]):n.documentState.mode===M.FOOTER?e("data","footers",...x.slice(1),"content",T=>[...T,{...D,id:L()}]):n.documentState.mode===M.WATERMARK?e("data","watermark",...x.slice(1),"content",T=>[...T,{...D,id:L()}]):e("data","elements",...x,"content",T=>[...T,{...D,id:L()}]))}catch(W){console.log("something went wrong",W)}}const $=f=>{const P=document.elementFromPoint(f.clientX,f.clientY);P!=null&&P.classList.contains("canvas-page")&&l()};return ce(()=>{const f=E();f&&(f.addEventListener("dragleave",N),f.addEventListener("dragover",G),f.addEventListener("drop",z),f.addEventListener("click",$))}),Me(()=>{const f=E();f&&(f.removeEventListener("dragleave",N),f.removeEventListener("dragover",G),f.removeEventListener("drop",z),f.removeEventListener("click",$))}),Object.defineProperties(f=>{m(f)},{ref:{enumerable:!0,value:m},isOverDropZone:{enumerable:!0,get:h}})},at=()=>{const[a,{clearSelectionElement:r,history:o}]=ne(),n={clearSelection:()=>{r()},getSelectedElements:()=>a.documentState.selectedElements||[],getFirstSelectedElement:()=>a.documentState.selectedElements[0],getStyle:e=>{let l;return a.documentState.selectedElements.forEach(d=>{l=d.getStyle(e)}),l||""},setStyle:(e,l)=>{o.pause(),I(()=>{a.documentState.selectedElements.forEach(d=>{d.setStyle(e,l)})}),o.resume()},getAttribute:e=>{let l="__initial__";return a.documentState.selectedElements.forEach(d=>{l==="__initial__"?l=d.getAttribute(e):l!==d.getAttribute(e)&&(l="Mixed")}),l},setAttribute:(e,l)=>{o.pause(),a.documentState.selectedElements.forEach(d=>{d.setAttribute(e,l)}),o.resume()},isElementSelected:()=>(a.documentState.selectedElements.length||0)>0,multipleBlocksSelected:()=>n.isElementSelected()&&a.documentState.selectedElements.length>1,isText:()=>n.isElementSelected()&&n.getFirstSelectedElement().isText,isContainer:()=>n.isElementSelected()&&n.getFirstSelectedElement().isContainer,isImage:()=>n.isElementSelected()&&n.getFirstSelectedElement().isImage,isRoot(){return n.isElementSelected()&&n.getFirstSelectedElement().isRoot},isTable(){return n.isElementSelected()&&(n.getFirstSelectedElement().isTable||n.getFirstSelectedElement().getAttribute("data-table-component"))},setClasses:e=>{o.pause(),a.documentState.selectedElements.forEach(l=>{l.setClasses(e)}),o.resume()},setDataKey:(e,l)=>{a.documentState.selectedElements.forEach(d=>{d.setDataKey(e,l)})},getDataKey:e=>n.isElementSelected()&&n.getFirstSelectedElement().getDataKey(e),isRepeater(){return n.isElementSelected()&&n.getFirstSelectedElement().isRepeater()}};return n};var ia=ae('<div><div class="select-none group absolute flex justify-center hover:opacity-80 items-center bg-transparent hover:bg-gray-100 z-[100] top-0 bottom-0 left-0 right-0 transition"><p class="hidden group-hover:block text-gray-900 transition text-base font-medium">');const Ze=a=>{const[r,o]=be(a,["class","children","type"]);return(()=>{var n=ia(),e=n.firstChild,l=e.firstChild;return Re(n,ve({get class(){return te("relative cursor-pointer overflow-hidden",r.class)}},o),!1,!0),O(l,()=>`Double Click to edit ${r.type}`),O(n,()=>r.children,null),n})()};var la=ae('<div class="pointer-events-none absolute bottom-0 left-0 right-0 top-0 z-50 bg-cyan-200 opacity-20 shadow-sm">'),oa=ae('<div><div class="canvas-page relative bg-white h-full"><div>');const fe=Ee(()=>xe(()=>import("./recursive-element-Bp8HnL5h.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),he=a=>{const[r,o]=be(a,["class","details","index"]),[n,{getPageStyle:e,updateSectionMode:l}]=ne(),d=()=>n.elementState.data.headers,h=()=>n.elementState.data.footers,C=()=>n.elementState.data.watermark,E=()=>n.documentState.pageData;if(r.details.type!==y.SECTION)return!1;const m=ra(r.index,r.details.id,r.details),N=at(),G=()=>n.documentState.mode=="header"?{height:B(n.documentState.page.headerHeight+n.documentState.page.marginTop),width:B(n.documentState.page.width),"padding-top":B(n.documentState.page.marginTop),"padding-left":B(n.documentState.page.marginLeft)}:n.documentState.mode=="footer"?{height:B(n.documentState.page.footerHeight+n.documentState.page.marginBottom),width:B(n.documentState.page.width),"padding-bottom":B(n.documentState.page.marginBottom),"padding-left":B(n.documentState.page.marginLeft)}:{height:B(n.documentState.page.height),width:B(n.documentState.page.width),"padding-top":B(n.documentState.page.marginTop),"padding-left":B(n.documentState.page.marginLeft)},z=()=>n.documentState.mode=="header"?{height:B(n.documentState.page.headerHeight+n.documentState.page.marginTop)}:n.documentState.mode=="footer"?{height:B(n.documentState.page.footerHeight)}:{height:`calc(100% - ${B((r.details.attributes["data-page-footer"]?n.documentState.page.footerHeight:0)+(r.details.attributes["data-page-header"]?n.documentState.page.headerHeight:0))})`};return(()=>{var $=oa(),R=$.firstChild,f=R.firstChild;return ye(m,$,()=>m),Re($,ve({get class(){return te("canvas-page my-[50px] relative shadow-lg  font-inter",r.class,N.isElementSelected()||[M.PREVIEW,M.PRINT].includes(n.documentState.mode)?"bg-white":"bg-yellow-50")}},o,{get style(){return{"pointer-events":"auto",...G()}}}),!1,!0),O($,v(V,{get when(){return m.isOverDropZone},get children(){return la()}}),R),O(R,v(V,{get when(){return n.documentState.page.headerHeight>0&&n.documentState.mode===M.EDITING&&r.details.attributes["data-page-header"]},get children(){return v(Ze,{type:"Header",get style(){return{height:B(n.documentState.page.headerHeight)}},onDblClick:()=>l(M.HEADER),get children(){return v(fe,{get details(){return d()},index:0,parentPath:[],preview:!0,get pageData(){return E()}})}})}}),f),O(f,v(fe,{get details(){return r.details},get index(){return r.index},parentPath:[],get pageData(){return E()}})),O(R,v(V,{get when(){return n.documentState.page.footerHeight>0&&n.documentState.mode===M.EDITING&&r.details.attributes["data-page-footer"]},get children(){return v(Ze,{type:"Footer",get style(){return{height:B(n.documentState.page.footerHeight)}},onDblClick:()=>l(M.FOOTER),get children(){return v(fe,{get details(){return h()},index:0,parentPath:[],preview:!0,get pageData(){return E()}})}})}}),null),O(R,v(V,{get when(){return C().usingWatermark&&C().previewWatermark&&n.documentState.mode===M.EDITING&&r.details.attributes["data-page-watermark"]},get children(){return v(fe,{get details(){return C()},index:0,parentPath:[],preview:!0,get pageData(){return E()}})}}),null),Se(P=>{var K=e(),j=z();return P.e=Xe(R,K,P.e),P.t=Xe(f,j,P.t),P},{e:void 0,t:void 0}),$})()},Je={min:.1,max:10},sa=()=>{const[a,{setCanvasProps:r,addCanvasBuilder:o,clearSelectionElement:n}]=ne(),[e,l]=re(null),[d,h]=re(null),[C,E]=re(null),m=()=>a.documentState.canvasBuilder,N=()=>{r("nodeCanvasLayout",ee(e()))},G=()=>{r("containerLayout",ee(d()))},z=x=>{const X=document.elementFromPoint(x.clientX,x.clientY);X!=null&&X.classList.contains("canvas-section")&&n()};ce(()=>{var x;d()&&e()&&(o({nodeContainer:d(),nodeCanvas:e(),containerLayout:ee(d()),nodeCanvasLayout:ee(e()),nodeOverlay:C()}),D(),(x=d())==null||x.addEventListener("click",z))}),Me(()=>{var x;(x=d())==null||x.removeEventListener("click",z)});let $,R=0,f=0,P=0,K=0,j=!1;const W=x=>{if($&&clearTimeout($),se(x)){if(!j){I(()=>{r("scaling",!0),N()});const A=m().nodeCanvasLayout.left+m().nodeCanvasLayout.width/2,T=m().nodeCanvasLayout.top+m().nodeCanvasLayout.height/2;R=(x.clientX-A)/m().scale,f=(x.clientY-T)/m().scale,P=x.clientX,K=x.clientY,j=!0;let ie=()=>{j=!1};d().addEventListener("mousemove",ie,{once:!0})}let X=m().scale-x.deltaY*8e-4*m().scale;X=Math.min(Math.max(X,Je.min),Je.max),r("scale",X),I(()=>{N();const A=m().nodeCanvasLayout.left+m().nodeCanvasLayout.width/2,T=m().nodeCanvasLayout.top+m().nodeCanvasLayout.height/2,ie=A+R*X,de=T+f*X,we=P-ie,ue=K-de;r("translateX",m().translateX+we/X),r("translateY",m().translateY+ue/X)})}else I(()=>{r("panning",!0),j=!1,r("translateX",m().translateX-x.deltaX/m().scale),r("translateY",m().translateY-x.deltaY/m().scale)});$=setTimeout(()=>{I(()=>{r("scaling",!1),r("panning",!1)})},200)},D=()=>{m().nodeContainer.addEventListener("wheel",x=>{x.preventDefault(),requestAnimationFrame(()=>W(x))},{passive:!1})},U=async()=>{I(()=>{N(),G();const A=m().containerLayout.width,T=m().nodeCanvasLayout.width/m().scale;r("scale",A/(T+150*2)),r("translateX",0),r("translateY",0)}),I(()=>{const A=m().scale;N();const T=m().containerLayout.top-m().nodeCanvasLayout.top+0*A;T!==0&&r("translateY",T/A)})};return Object.defineProperties(x=>{h(x)},{ref:{enumerable:!0,value:h},canvasRef:{enumerable:!0,value:l},overlayRef:{enumerable:!0,value:E},setScaleAndTranslate:{enumerable:!0,value:()=>U()},canvasProps:{enumerable:!0,value:m()}})};var Qe=ae('<div class="select-none flex gap-3 justify-center items-center">'),ca=ae('<div><div class="overlay absolute"id=overlay></div><div></div><div class="fixed bottom-[50px] left-[50%] z-50 flex gap-x-2 -translate-x-[50%] cursor-default items-center justify-center gap-1 rounded-md bg-slate-800 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm dark:bg-zinc-900 dark:text-zinc-400"><div class="cursor-pointer ml-1">');const da=a=>{const[r,o]=be(a,["class"]),n=sa(),[e,{updateSectionMode:l,createNewSection:d,history:h}]=ne(),C=()=>e.elementState.data,E=()=>e.elementState.data.headers,m=()=>e.elementState.data.footers,N=()=>e.elementState.data.watermark,G=()=>Math.round(n.canvasProps.scale*100)+"%";return Q(()=>{e.documentState.mode,setTimeout(()=>{k(n.setScaleAndTranslate)},200)}),(()=>{var z=ca(),$=z.firstChild,R=$.nextSibling,f=R.nextSibling,P=f.firstChild,K=n.ref;typeof K=="function"?ye(K,z):n.ref=z,Re(z,ve(o,{get class(){return te("canvas-section",r.class)}}),!1,!0);var j=n.overlayRef;typeof j=="function"?ye(j,$):n.overlayRef=$;var W=n.canvasRef;return typeof W=="function"?ye(W,R):n.canvasRef=R,R.style.setProperty("transform-origin","top-center"),O(R,v(V,{get when(){return e.documentState.mode===M.EDITING},get children(){return[v(Ot,{get each(){return C().elements},children:(D,U)=>v(he,{details:D,get index(){return U()}})}),(()=>{var D=Qe();return O(D,v(pe,{variant:"buttonToolbar",class:"shadow-lg hover:bg-slate-50",onClick:d,get children(){return[v(At,{class:"h-5 w-5"})," Add Section"]}})),D})()]}}),null),O(R,v(V,{get when(){return e.documentState.mode===M.HEADER},get children(){return v(he,{get details(){return E()},index:0})}}),null),O(R,v(V,{get when(){return e.documentState.mode===M.FOOTER},get children(){return v(he,{get details(){return m()},index:0})}}),null),O(R,v(V,{get when(){return e.documentState.mode===M.WATERMARK},get children(){return v(he,{get details(){return N()},index:0})}}),null),O(R,v(V,{get when(){return e.documentState.mode!==M.EDITING},get children(){var D=Qe();return O(D,v(pe,{variant:"buttonToolbar",onClick:()=>l(M.EDITING),class:"shadow-lg hover:bg-slate-50",get children(){return[v(Ft,{class:"h-5 w-5"})," Close"]}})),D}}),null),O(f,G,P),P.$$click=()=>n.setScaleAndTranslate(),O(P,v($t,{class:"size-6"})),O(f,v(pe,{get disabled(){return!h.canUndo()},variant:"buttonToolbar",onClick:()=>h.undo(),size:"icon",class:"rounded-md size-6 ml-4 hover:bg-slate-400",get children(){return v(Ht,{class:"size-5"})}}),null),O(f,v(pe,{get disabled(){return!h.canRedo()},variant:"buttonToolbar",onClick:()=>h.redo(),size:"icon",class:"rounded-md size-6 hover:bg-slate-400",get children(){return v(Bt,{class:"size-5"})}}),null),Se(D=>{var U=te("canvas-section z-0 absolute flex-1"),J=`scale(${n==null?void 0:n.canvasProps.scale}) translate(${n.canvasProps.translateX}px, ${n.canvasProps.translateY}px)`;return U!==D.e&&Ne(R,D.e=U),J!==D.t&&((D.t=J)!=null?R.style.setProperty("transform",J):R.style.removeProperty("transform")),D},{e:void 0,t:void 0}),z})()};Pt(["click"]);const ua=()=>{const[,{deleteElement:a,clearSelectionElement:r,history:o}]=ne(),n=at();function e(d){const h=d.target,C=h.isContentEditable,E=h.tagName==="INPUT"||h.tagName==="TEXTAREA";return C||E}const l=d=>{if(!(d.key==="s"&&se(d))&&!(d.key==="p"&&se(d))&&!e(d)){if(d.key==="z"&&se(d)&&!d.shiftKey&&o.canUndo()){o.undo(),d.preventDefault();return}if(d.key==="z"&&d.shiftKey&&se(d)&&o.canRedo()){o.redo(),d.preventDefault();return}if((d.key==="Backspace"||d.key==="Delete")&&n.isElementSelected()){I(()=>{for(const h of n.getSelectedElements())a(h.id)}),r(),d.stopPropagation();return}if(d.key==="Escape"){r();return}}};ce(()=>{document.addEventListener("keydown",l)}),Me(()=>document.removeEventListener("keydown",l))};var ma=ae("<div id=main-reporting-design-layout>");Ee(()=>xe(()=>import("./toolbar-Bfz8Pb69.js"),__vite__mapDeps([11,1,2,9,4,10])));const ga=Ee(()=>xe(()=>import("./layer-panel-CcW3Nyjs.js"),__vite__mapDeps([12,1,2,3,4,13,5,6,7,14,15,9,10]))),pa=Ee(()=>xe(()=>import("./setting-panel-CuZnH76l.js"),__vite__mapDeps([16,1,2,9,4,6,7,17,3,14,10])));function fa(a){const[,{setDocumentState:r}]=ne();return ce(()=>{const o=document.createElement("style");o.title="print-designer-stylesheet",o.setAttribute("rel","stylesheet"),document.head.appendChild(o);for(let n=document.styleSheets.length-1;n>=0;n--)document.styleSheets[n].title=="print-designer-stylesheet"?r(["screenStyleSheet"],document.styleSheets[n]):document.styleSheets[n].title=="page-print-designer-stylesheet"&&r(["printStyleSheet"],document.styleSheets[n])}),ua(),(()=>{var o=ma();return O(o,v(ga,{class:"border-r border-gray-200"}),null),O(o,v(da,{get class(){return te("flex-1 p-0 mt-0","overflow-hidden flex relative justify-center bg-gray-100 h-full")}}),null),O(o,v(pa,{}),null),Se(()=>Ne(o,te("report-design-main-layout h-screen flex justify-content m-0 font-inter",a.class))),o})()}var ha=ae("<div>");function ya(){const a=zt();return jt({key:a.sessionI,defaultValue:{globalData:{},pageData:{},elementData:[]}}),v(V,{when:!0,get children(){var r=ha();return O(r,v(na,{get children(){return v(fa,{class:"h-full w-full rounded"})}})),Se(()=>Ne(r,te("relative overflow-y-hidden p-5 bg-gray-50 h-[calc(100vh-10px)] smoth-scroll"))),r}})}const Fa=Object.freeze(Object.defineProperty({__proto__:null,default:ya},Symbol.toStringTag,{value:"Module"}));export{y as E,Da as H,Zt as P,M as S,Ra as a,B as b,Ca as c,ka as d,ee as e,La as f,Ia as g,at as h,Pa as i,Oa as j,Jt as k,Ke as l,Na as m,Ut as n,ke as o,_a as p,Aa as q,Ma as r,ta as s,Ta as t,ne as u,Fa as v};
