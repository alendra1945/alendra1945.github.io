import{at as w,l as z,au as d,L as E,a6 as O,f as S,av as m,W as l,g,aw as R,ax as L,as as M,ay as A}from"./index-Cafb-DjT.js";function C(t){const s={...t},n={...t},o={},a=e=>{let r=o[e];if(!r){if(!O())return s[e];o[e]=r=S(s[e],{internal:!0}),delete s[e]}return r[0]()};for(const e in t)Object.defineProperty(n,e,{get:()=>a(e),enumerable:!0});const i=(e,r)=>{const c=o[e];if(c)return c[1](r);e in s&&(s[e]=d(r,[s[e]]))};return[n,(e,r)=>{if(w(e)){const c=z(()=>Object.entries(d(e,n)));E(()=>{for(const[u,f]of c)i(u,()=>f)})}else i(e,r);return n}]}function j(t,s){const n=new ResizeObserver(t);return l(n.disconnect.bind(n)),{observe:o=>n.observe(o,s),unobserve:n.unobserve.bind(n)}}function N(t,s,n){const o=new WeakMap,{observe:a,unobserve:i}=j(e=>{for(const r of e){const{contentRect:c,target:u}=r,f=Math.round(c.width),v=Math.round(c.height),b=o.get(u);(!b||b.width!==f||b.height!==v)&&(s(c,u,r),o.set(u,{width:f,height:v}))}},n);g(e=>{const r=R(L(M(t)));return A(r,e,a,i),r},[])}var p={width:null,height:null};function h(t){if(!t)return{...p};const{width:s,height:n}=t.getBoundingClientRect();return{width:s,height:n}}function W(t){const s=typeof t=="function",[n,o]=C(m.context||s?p:h(t)),a=new ResizeObserver(([i])=>o(h(i.target)));return l(()=>a.disconnect()),s?g(()=>{const i=t();i&&(o(h(i)),a.observe(i),l(()=>a.unobserve(i)))}):(a.observe(t),l(()=>a.unobserve(t))),n}export{N as a,W as c};
