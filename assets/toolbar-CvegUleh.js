import{e as S,g as z,W as R,c as s,m as E,Q as J,a5 as pe,S as K,a6 as ge,a7 as fe,f as A,k as V,n as me,p as he,b as Z,i as h,t as ee,a8 as ve,a9 as be,aa as Te,ab as we,ac as ye,ad as Ce,ae as Pe,af as De}from"./index-DhydKnRP.js";import{P as te,a as oe,D as xe,c as Oe,s as Se,b as ke,B as Ie}from"./button-DOW7-XBW.js";import{_ as Re,m as ne,g as j,a as Ee,c as Ae,P as $e,b as U,i as Le,d as _e,e as D,u as Fe,C as d,L as $}from"./pdf-annotate-try-B1lHKnOM.js";import"./container-C3qi2OK9.js";import"./animate.es-CJ9iIyw4.js";import"./velocity.es-CI47LKMS.js";import"./use-local-storage-CH-ZvHM0.js";var He={};Re(He,{Arrow:()=>te,Content:()=>W,Portal:()=>N,Root:()=>q,Tooltip:()=>ze,Trigger:()=>G});var re=me();function M(){const o=he(re);if(o===void 0)throw new Error("[kobalte]: `useTooltipContext` must be used within a `Tooltip` component");return o}function W(o){const a=M(),r=ne({id:a.generateId("content")},o),[i,n]=S(r,["ref","style"]);return z(()=>R(a.registerContentId(n.id))),s(K,{get when(){return a.contentPresent()},get children(){return s(oe.Positioner,{get children(){return s(xe,E({ref(t){var e=J(u=>{a.setContentRef(u)},i.ref);typeof e=="function"&&e(t)},role:"tooltip",disableOutsidePointerEvents:!1,get style(){return pe({"--kb-tooltip-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},i.style)},onFocusOutside:t=>t.preventDefault(),onDismiss:()=>a.hideTooltip(!0)},()=>a.dataset(),n))}})}})}function N(o){const a=M();return s(K,{get when(){return a.contentPresent()},get children(){return s(ge,o)}})}function Be(o,a,r){const i=o.split("-")[0],n=a.getBoundingClientRect(),t=r.getBoundingClientRect(),e=[],u=n.left+n.width/2,f=n.top+n.height/2;switch(i){case"top":e.push([n.left,f]),e.push([t.left,t.bottom]),e.push([t.left,t.top]),e.push([t.right,t.top]),e.push([t.right,t.bottom]),e.push([n.right,f]);break;case"right":e.push([u,n.top]),e.push([t.left,t.top]),e.push([t.right,t.top]),e.push([t.right,t.bottom]),e.push([t.left,t.bottom]),e.push([u,n.bottom]);break;case"bottom":e.push([n.left,f]),e.push([t.left,t.top]),e.push([t.left,t.bottom]),e.push([t.right,t.bottom]),e.push([t.right,t.top]),e.push([n.right,f]);break;case"left":e.push([u,n.top]),e.push([t.right,t.top]),e.push([t.left,t.top]),e.push([t.left,t.bottom]),e.push([t.right,t.bottom]),e.push([u,n.bottom]);break}return e}var C={},Ue=0,x=!1,m,I,O;function q(o){const a=`tooltip-${fe()}`,r=`${++Ue}`,i=ne({id:a,openDelay:700,closeDelay:300,skipDelayDuration:300},o),[n,t]=S(i,["id","open","defaultOpen","onOpenChange","disabled","triggerOnFocusOnly","openDelay","closeDelay","skipDelayDuration","ignoreSafeArea","forceMount"]);let e;const[u,f]=A(),[T,k]=A(),[P,L]=A(),[_,F]=A(t.placement),p=Oe({open:()=>n.open,defaultOpen:()=>n.defaultOpen,onOpenChange:l=>{var g;return(g=n.onOpenChange)==null?void 0:g.call(n,l)}}),{present:H}=Se({show:()=>n.forceMount||p.isOpen(),element:()=>P()??null}),c=()=>{C[r]=y},w=()=>{for(const l in C)l!==r&&(C[l](!0),delete C[l])},y=(l=!1)=>{l||n.closeDelay&&n.closeDelay<=0?(window.clearTimeout(e),e=void 0,p.close()):e||(e=window.setTimeout(()=>{e=void 0,p.close()},n.closeDelay)),window.clearTimeout(m),m=void 0,n.skipDelayDuration&&n.skipDelayDuration>=0&&(O=window.setTimeout(()=>{window.clearTimeout(O),O=void 0},n.skipDelayDuration)),x&&(window.clearTimeout(I),I=window.setTimeout(()=>{delete C[r],I=void 0,x=!1},n.closeDelay))},B=()=>{clearTimeout(e),e=void 0,w(),c(),x=!0,p.open(),window.clearTimeout(m),m=void 0,window.clearTimeout(I),I=void 0,window.clearTimeout(O),O=void 0},ae=()=>{w(),c(),!p.isOpen()&&!m&&!x?m=window.setTimeout(()=>{m=void 0,x=!0,B()},n.openDelay):p.isOpen()||B()},ie=(l=!1)=>{!l&&n.openDelay&&n.openDelay>0&&!e&&!O?ae():B()},se=()=>{window.clearTimeout(m),m=void 0,x=!1},Q=()=>{window.clearTimeout(e),e=void 0},X=l=>U(T(),l)||U(P(),l),le=l=>{const g=T(),v=P();if(!(!g||!v))return Be(l,g,v)},Y=l=>{const g=l.target;if(X(g)){Q();return}if(!n.ignoreSafeArea){const v=le(_());if(v&&Le(_e(l),v)){Q();return}}e||y()};z(()=>{if(!p.isOpen())return;const l=j();l.addEventListener("pointermove",Y,!0),R(()=>{l.removeEventListener("pointermove",Y,!0)})}),z(()=>{const l=T();if(!l||!p.isOpen())return;const g=ue=>{const de=ue.target;U(de,l)&&y(!0)},v=Ee();v.addEventListener("scroll",g,{capture:!0}),R(()=>{v.removeEventListener("scroll",g,{capture:!0})})}),R(()=>{clearTimeout(e),C[r]&&delete C[r]});const ce={dataset:V(()=>({"data-expanded":p.isOpen()?"":void 0,"data-closed":p.isOpen()?void 0:""})),isOpen:p.isOpen,isDisabled:()=>n.disabled??!1,triggerOnFocusOnly:()=>n.triggerOnFocusOnly??!1,contentId:u,contentPresent:H,openTooltip:ie,hideTooltip:y,cancelOpening:se,generateId:Ae(()=>i.id),registerContentId:ke(f),isTargetOnTooltip:X,setTriggerRef:k,setContentRef:L};return s(re.Provider,{value:ce,get children(){return s(oe,E({anchorRef:T,contentRef:P,onCurrentPlacementChange:F},t))}})}function G(o){let a;const r=M(),[i,n]=S(o,["ref","onPointerEnter","onPointerLeave","onPointerDown","onClick","onFocus","onBlur"]);let t=!1,e=!1,u=!1;const f=()=>{t=!1},T=()=>{!r.isOpen()&&(e||u)&&r.openTooltip(u)},k=c=>{r.isOpen()&&!e&&!u&&r.hideTooltip(c)},P=c=>{D(c,i.onPointerEnter),!(c.pointerType==="touch"||r.triggerOnFocusOnly()||r.isDisabled()||c.defaultPrevented)&&(e=!0,T())},L=c=>{D(c,i.onPointerLeave),c.pointerType!=="touch"&&(e=!1,u=!1,r.isOpen()?k():r.cancelOpening())},_=c=>{D(c,i.onPointerDown),t=!0,j(a).addEventListener("pointerup",f,{once:!0})},F=c=>{D(c,i.onClick),e=!1,u=!1,k(!0)},p=c=>{D(c,i.onFocus),!(r.isDisabled()||c.defaultPrevented||t)&&(u=!0,T())},H=c=>{D(c,i.onBlur);const w=c.relatedTarget;r.isTargetOnTooltip(w)||(e=!1,u=!1,k(!0))};return R(()=>{j(a).removeEventListener("pointerup",f)}),s($e,E({as:"button",ref(c){var w=J(y=>{r.setTriggerRef(y),a=y},i.ref);typeof w=="function"&&w(c)},get"aria-describedby"(){return V(()=>!!r.isOpen())()?r.contentId():void 0},onPointerEnter:P,onPointerLeave:L,onPointerDown:_,onClick:F,onFocus:p,onBlur:H},()=>r.dataset(),n))}var ze=Object.assign(q,{Arrow:te,Content:W,Portal:N,Trigger:G});const je=G,Me=o=>s(q,E({gutter:4},o)),We=o=>{const[a,r]=S(o,["class"]);return s(N,{get children(){return s(W,E({get class(){return Z("z-50 origin-[var(--kb-popover-content-transform-origin)] overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95",a.class)}},r))}})};var Ne=ee('<p class="text-[10px] capitalize">');const qe=o=>{const[a,{placement:r,overflowPadding:i,arrowPadding:n,detachedPadding:t}]=S(o,["class","children","label"]);return s(Me,{placement:r,openDelay:200,overflowPadding:i,arrowPadding:n,detachedPadding:t,get children(){return[s(je,{class:"outline-none",as:"div",get children(){return a.children}}),s(We,{get class(){return Z("text-white font-bold !bg-black border-none px-4 !py-1 rounded-lg",a.class)},get children(){var e=Ne();return h(e,()=>a.label.toLowerCase()),e}})]}})},b=o=>{const[a,{icon:r,onClick:i}]=S(o,["isActive","isDisabled"]);return s(qe,{get label(){return o.label},placement:"right",get children(){return s(Ie,{get disabled(){return a.isDisabled},onClick:i,size:"icon",get variant(){return a.isActive?"activeToolbar":"buttonToolbar"},class:"rounded-md h-8 w-8",get children(){return s(r,{class:"h-4 w-4"})}})}})};var Ge=ee('<div class="sticky left-[40px] w-fit top-[50%] -translate-y-[50%] -translate-x-1/2 h-[60px] px-2 py-1 flex flex-col gap-y-2 justify-center items-center"><div class="bg-white rounded-md p-1 flex flex-col gap-y-1 justify-center shadow-md"></div><div class="bg-white rounded-md p-1 flex flex-col gap-y-1 justify-center shadow-md">');const tt=o=>{const[,{history:a}]=Fe();return(()=>{var r=Ge(),i=r.firstChild,n=i.nextSibling;return h(i,s(b,{label:"select",icon:ve,onClick:()=>o.setCanvasState("mode",d.None),get isActive(){return o.canvasState.mode==d.None||o.canvasState.mode==d.Translating||o.canvasState.mode==d.SelectionNet||o.canvasState.mode==d.Pressing||o.canvasState.mode==d.Resizing}}),null),h(i,s(b,{label:"Highlight",icon:be,onClick:()=>{o.setCanvasState("mode",d.Hightlight)},get isActive(){return o.canvasState.mode==d.Hightlight}}),null),h(i,s(b,{label:"Rectangle",icon:Te,onClick:()=>{o.setCanvasState("mode",d.Inserting),o.setCanvasState("layerType",$.Rectangle)},get isActive(){return o.canvasState.mode==d.Inserting&&o.canvasState.layerType==$.Rectangle}}),null),h(i,s(b,{label:"Pencil",icon:we,onClick:()=>{o.setCanvasState("mode",d.Pencil)},get isActive(){return o.canvasState.mode==d.Pencil}}),null),h(i,s(b,{label:"Text",icon:ye,onClick:()=>{o.setCanvasState("mode",d.Inserting),o.setCanvasState("layerType",$.Text)},get isActive(){return o.canvasState.mode==d.Inserting&&o.canvasState.layerType==$.Text}}),null),h(i,s(b,{label:"eraser",icon:Ce,onClick:()=>{o.setCanvasState("mode",d.Eraser)},get isActive(){return o.canvasState.mode==d.Eraser}}),null),h(n,s(b,{label:"Undo",get isDisabled(){return!a.canUndo()},icon:Pe,get onClick(){return a.undo}}),null),h(n,s(b,{label:"Redo",get isDisabled(){return!a.canRedo()},icon:De,get onClick(){return a.redo}}),null),r})()};export{tt as default};
