import{f as V,i as P,c as f,a as E,b as M,d as K,S as k,j as Z,t as F,L as N,$ as se,g as _,W as ie,o as re,u as ae,e as de,k as ce,F as ue}from"./index-JAmVxnob.js";import{C as ge,d as he,a as ye,b as me,c as ve}from"./context-menu-DefCyAsD.js";import{u as A,P as W,b as u,d as x,r as R,e as oe,h as pe}from"./reporting-designer-try-DlhyvfJv.js";import{u as be}from"./use-supported-DfFQDpaB.js";import"./T4C3DMHT-D76ZL_ho.js";import"./index-Cspn8q05.js";import"./index-AxBFuKLQ.js";import"./index-vFhn2TLg.js";import"./button-Czybck0e.js";import"./use-local-storage-Dn1wHuvy.js";var J=F("<div>"),q=F('<div class="m-auto text-sm text-white">'),fe=F('<div><div class="padding-handler pointer-events-none absolute flex w-full bg-rose-200"></div><div class="padding-handler pointer-events-none absolute bottom-0 flex w-full bg-rose-200"></div><div class="padding-handler pointer-events-none absolute left-0 flex h-full bg-rose-200"></div><div class="padding-handler pointer-events-none absolute right-0 flex h-full bg-rose-200">');const we=y=>{const[b,{history:C}]=A(),[v,H]=V(!1),r=()=>y.block,n=()=>b.documentState.canvasBuilder,$=a=>(r().getStyle("padding-right"),r().getStyle("padding-top"),r().getStyle("padding-bottom"),r().getStyle("padding-left"),r().getStyle("padding"),R(getComputedStyle(r().node)[`padding${a}`])*n().scale),z=()=>$("Top"),X=()=>$("Bottom"),T=()=>$("Left"),O=()=>$("Right"),B=()=>u(x(1*n().scale,1,2)),S=()=>{const a=x(16*n().scale,8,32),h=x(4*n().scale,2,8);return{width:a,height:h,bottom:`clamp(-20px, calc(-6px * ${n().scale}), -8px)`,left:`calc(50% - ${a/2}px)`}},L=()=>{const a=x(16*n().scale,8,32),h=x(4*n().scale,2,8);return{width:a,height:h,top:`clamp(-20px, calc(-6px * ${n().scale}), -8px)`,left:`calc(50% - ${a/2}px)`}},Y=()=>{const a=x(4*n().scale,2,8),h=x(16*n().scale,8,32);return{width:a,height:h,right:`clamp(-20px, calc(-6px * ${n().scale}), -8px)`,top:`calc(50% - ${h/2}px)`}},D=()=>{const a=x(4*n().scale,2,8),h=x(16*n().scale,8,32);return{width:a,height:h,left:`clamp(-20px, calc(-6px * ${n().scale}), -8px)`,top:`calc(50% - ${h/2}px)`}},i=(a,h)=>{if(a.stopPropagation(),y.disableHandlers)return;H(!0);const p=a.clientY,w=a.clientX,o=a.target,e=R(r().getStyles["padding-top"])||5,t=R(r().getStyles["padding-bottom"])||5,g=R(r().getStyles["padding-left"])||5,l=R(r().getStyles["padding-right"])||5,d=document.body.style.cursor;document.body.style.cursor=window.getComputedStyle(o).cursor;const c=s=>{C.pause(),s.stopPropagation(),N(()=>{let m=0,I=null;h===W.Top?(m=Math.max(e+s.clientY-p,0),r().setStyle("padding-top",u(m)),I="y"):h===W.Bottom?(m=Math.max(t+p-s.clientY,0),r().setStyle("padding-bottom",u(m)),I="y"):h===W.Left?(m=Math.max(g+s.clientX-w,0),r().setStyle("padding-left",u(m)),I="x"):h===W.Right&&(m=Math.max(l+w-s.clientX,0),r().setStyle("padding-right",u(m)),I="x"),s.altKey?I==="y"?(r().setStyle("padding-top",u(m)),r().setStyle("padding-bottom",u(m))):I==="x"&&(r().setStyle("padding-left",u(m)),r().setStyle("padding-right",u(m))):s.shiftKey&&(r().setStyle("padding-top",u(m)),r().setStyle("padding-bottom",u(m)),r().setStyle("padding-left",u(m)),r().setStyle("padding-right",u(m)))}),s.preventDefault(),s.stopPropagation()};document.addEventListener("mousemove",c),document.addEventListener("mouseup",s=>{C.resume(),document.body.style.cursor=d,document.removeEventListener("mousemove",c),H(!1),s.preventDefault()},{once:!0})};return(()=>{var a=fe(),h=a.firstChild,p=h.nextSibling,w=p.nextSibling,o=w.nextSibling;return a.$$click=e=>e.stopPropagation(),P(h,f(k,{get when(){return n().scale>.5},get children(){var e=J();return e.$$mousedown=t=>i(t,W.Top),E(t=>{var g=M("pointer-events-auto absolute left-[50%] rounded-full border-2 border-rose-500 bg-rose-200 hover:scale-125",{"cursor-ns-resize":!y.disableHandlers,hidden:v()}),l=B(),d=S().bottom,c=S().left,s=u(S().height),m=u(S().width);return g!==t.e&&K(e,t.e=g),l!==t.t&&((t.t=l)!=null?e.style.setProperty("border-width",l):e.style.removeProperty("border-width")),d!==t.a&&((t.a=d)!=null?e.style.setProperty("bottom",d):e.style.removeProperty("bottom")),c!==t.o&&((t.o=c)!=null?e.style.setProperty("left",c):e.style.removeProperty("left")),s!==t.i&&((t.i=s)!=null?e.style.setProperty("height",s):e.style.removeProperty("height")),m!==t.n&&((t.n=m)!=null?e.style.setProperty("width",m):e.style.removeProperty("width")),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e}}),null),P(h,f(k,{get when(){return v()},get children(){var e=q();return P(e,()=>r().getStyles["padding-top"]),e}}),null),P(p,f(k,{get when(){return n().scale>.5},get children(){var e=J();return e.$$mousedown=t=>i(t,W.Bottom),E(t=>{var g=M("pointer-events-auto absolute left-[50%] rounded-full border-2 border-rose-500 bg-rose-200 hover:scale-125",{"cursor-ns-resize":!y.disableHandlers,hidden:v()}),l=B(),d=L().top,c=L().left,s=u(L().height),m=u(L().width);return g!==t.e&&K(e,t.e=g),l!==t.t&&((t.t=l)!=null?e.style.setProperty("border-width",l):e.style.removeProperty("border-width")),d!==t.a&&((t.a=d)!=null?e.style.setProperty("top",d):e.style.removeProperty("top")),c!==t.o&&((t.o=c)!=null?e.style.setProperty("left",c):e.style.removeProperty("left")),s!==t.i&&((t.i=s)!=null?e.style.setProperty("height",s):e.style.removeProperty("height")),m!==t.n&&((t.n=m)!=null?e.style.setProperty("width",m):e.style.removeProperty("width")),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e}}),null),P(p,f(k,{get when(){return v()},get children(){var e=q();return P(e,()=>r().getStyles["padding-bottom"]),e}}),null),P(w,f(k,{get when(){return n().scale>.5},get children(){var e=J();return e.$$mousedown=t=>i(t,W.Left),E(t=>{var g=M("pointer-events-auto absolute top-[50%] rounded-full border-2 border-rose-500 bg-rose-200 hover:scale-125",{"cursor-ew-resize":!y.disableHandlers,hidden:v()}),l=B(),d=Y().right,c=Y().top,s=u(Y().height),m=u(Y().width);return g!==t.e&&K(e,t.e=g),l!==t.t&&((t.t=l)!=null?e.style.setProperty("border-width",l):e.style.removeProperty("border-width")),d!==t.a&&((t.a=d)!=null?e.style.setProperty("right",d):e.style.removeProperty("right")),c!==t.o&&((t.o=c)!=null?e.style.setProperty("top",c):e.style.removeProperty("top")),s!==t.i&&((t.i=s)!=null?e.style.setProperty("height",s):e.style.removeProperty("height")),m!==t.n&&((t.n=m)!=null?e.style.setProperty("width",m):e.style.removeProperty("width")),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e}}),null),P(w,f(k,{get when(){return v()},get children(){var e=q();return P(e,()=>r().getStyles["padding-left"]),e}}),null),P(o,f(k,{get when(){return n().scale>.5},get children(){var e=J();return e.$$mousedown=t=>i(t,W.Right),E(t=>{var g=M("pointer-events-auto absolute top-[50%] rounded-full border-2 border-rose-500 bg-rose-200 hover:scale-125",{"cursor-ew-resize":!y.disableHandlers,hidden:v()}),l=B(),d=D().left,c=D().top,s=u(D().height),m=u(D().width);return g!==t.e&&K(e,t.e=g),l!==t.t&&((t.t=l)!=null?e.style.setProperty("border-width",l):e.style.removeProperty("border-width")),d!==t.a&&((t.a=d)!=null?e.style.setProperty("left",d):e.style.removeProperty("left")),c!==t.o&&((t.o=c)!=null?e.style.setProperty("top",c):e.style.removeProperty("top")),s!==t.i&&((t.i=s)!=null?e.style.setProperty("height",s):e.style.removeProperty("height")),m!==t.n&&((t.n=m)!=null?e.style.setProperty("width",m):e.style.removeProperty("width")),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e}}),null),P(o,f(k,{get when(){return v()},get children(){var e=q();return P(e,()=>r().getStyles["padding-right"]),e}}),null),E(e=>{var t=M("group",{"opacity-40":!v(),"opacity-70":v()}),g=u(z()),l=u(X()),d=u(T()),c=u(O());return t!==e.e&&K(a,e.e=t),g!==e.t&&((e.t=g)!=null?h.style.setProperty("height",g):h.style.removeProperty("height")),l!==e.a&&((e.a=l)!=null?p.style.setProperty("height",l):p.style.removeProperty("height")),d!==e.o&&((e.o=d)!=null?w.style.setProperty("width",d):w.style.removeProperty("width")),c!==e.i&&((e.i=c)!=null?o.style.setProperty("width",c):o.style.removeProperty("width")),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),a})()};Z(["click","mousedown"]);var Pe=F('<span class="resize-dimensions absolute bottom-[-40px] right-[-40px] flex h-8 w-30 items-center justify-center whitespace-nowrap rounded-full bg-gray-600 p-2 text-sm text-white opacity-80"> <!> '),Se=F('<div class="pointer-events-auto absolute bottom-0 right-[-2px] top-0 w-2 border-none bg-transparent cursor-ew-resize">'),xe=F('<div class="pointer-events-auto absolute bottom-[-2px] left-0 right-0 h-2 border-none bg-transparent cursor-ns-resize">'),ke=F('<div class="pointer-events-auto absolute bottom-[-5px] right-[-5px] h-[12px] w-[12px] cursor-nwse-resize rounded-full border-[2.5px] border-blue-400 bg-white">');const Ce=y=>{const[b,{styleFormattedValue:C,history:v}]=A(),[H,r]=V(!1),n=()=>y.block,$=()=>b.documentState.canvasBuilder,z=(i,a,h)=>{var w;const p=((w=n().node.parentElement)==null?void 0:w.offsetWidth)||0;if(h!=null&&h.includes("%")){const o=i/p*100,e=a/p*100,t=x(Math.abs(Math.round(e+o)),0,100);n().setStyle("width",`${t}%`)}else{const o=x(Math.round(a+i),0,p);n().setStyle("width",`${o}px`)}},X=(i,a,h)=>{var w;const p=((w=n().node.parentElement)==null?void 0:w.offsetHeight)||0;if(h!=null&&h.includes("%")){const o=i/p*100,e=a/p*100,t=x(Math.abs(Math.round(e+o)),0,100);n().setStyle("height",`${t}%`)}else{const o=x(Math.round(a+i),0,p);n().setStyle("height",`${o}px`)}},T=(i,a)=>{const h=x(Math.round(a+.5*i),10,300);n().setStyle("font-size",u(h))},O=i=>{i.stopPropagation();const a=i.clientX,h=n().node.offsetHeight,p=n().node.offsetWidth,w=n().getStyle("width"),o=n().getStyle("height"),e=D()||0,t=document.body.style.cursor;document.body.style.cursor=window.getComputedStyle(i.target).cursor,r(!0);const g=l=>{v.pause(),N(()=>{const d=(l.clientX-a)/$().scale;if(n().isText&&!n().hasChildren())return T(d,e),l.preventDefault();z(d,p,w),l.shiftKey&&X(d,h,o),l.preventDefault()})};document.addEventListener("mousemove",g),document.addEventListener("mouseup",l=>{document.body.style.cursor=t,document.removeEventListener("mousemove",g),l.preventDefault(),r(!1),v.resume()},{once:!0})},B=i=>{i.stopPropagation();const a=i.clientY,h=n().node.offsetHeight,p=n().node.offsetWidth,w=n().getStyle("width"),o=n().getStyle("height"),e=D()||0,t=document.body.style.cursor;document.body.style.cursor=window.getComputedStyle(i.target).cursor,r(!0);const g=l=>{v.pause(),N(()=>{const d=(l.clientY-a)/$().scale;if(n().isText&&!n().hasChildren())return T(d,e),l.preventDefault();X(d,h,o),l.shiftKey&&z(d,p,w)}),l.preventDefault()};document.addEventListener("mousemove",g),document.addEventListener("mouseup",l=>{document.body.style.cursor=t,document.removeEventListener("mousemove",g),l.preventDefault(),r(!1),v.resume()},{once:!0})},S=i=>{i.stopPropagation();const a=i.clientX,h=i.clientY,p=n().node.offsetHeight,w=n().node.offsetWidth,o=n().getStyle("width"),e=n().getStyle("height"),t=document.body.style.cursor,g=D()||0;document.body.style.cursor=window.getComputedStyle(i.target).cursor,r(!0);const l=d=>{v.pause(),N(()=>{const c=(d.clientX-a)/$().scale,s=(d.clientY-h)/$().scale;if(n().isText&&!n().hasChildren())return T(s,g),d.preventDefault();z(c,w,o),X(d.shiftKey?c:s,p,e)}),d.preventDefault()};document.addEventListener("mousemove",l),document.addEventListener("mouseup",d=>{document.body.style.cursor=t,document.removeEventListener("mousemove",l),d.preventDefault(),r(!1),v.resume()},{once:!0})},L=()=>(n().getStyle("width"),C(getComputedStyle(n().node).getPropertyValue("width"),b.documentState.page.UOM,!1,"",0)),Y=()=>(n().getStyle("height"),C(getComputedStyle(n().node).getPropertyValue("height"),b.documentState.page.UOM,!1,"",0)),D=()=>(n().getStyle("font-size"),Math.round(R(getComputedStyle(n().node).getPropertyValue("font-size"))));return[f(k,{get when(){return H()},get children(){var i=Pe(),a=i.firstChild,h=a.nextSibling;return h.nextSibling,P(i,L,a),P(i,f(se,{class:"size-5"}),h),P(i,Y,null),i}}),(()=>{var i=Se();return i.$$mousedown=O,i})(),(()=>{var i=xe();return i.$$mousedown=B,i})(),f(k,{get when(){return!H()},get children(){var i=ke();return i.$$mousedown=S,i}})]};Z(["mousedown"]);const He=y=>typeof y=="function"?y():y,$e=(y,b)=>{const[C,v]=V(oe(y)),H=be(()=>window&&"MutationObserver"in window);let r;const n=()=>{v(oe(y))};_(()=>{const z=He(y);!H()||!window||!z||(n(),r=new MutationObserver($),r.observe(z,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["style","class"],characterData:!0}),ie(()=>{r&&(r.disconnect(),r=void 0)}))});const $=()=>{n()};return _(()=>{b.style.width=u(C().width,!1),b.style.height=u(C().height,!1),b.style.top=u(C().top,!1),b.style.left=u(C().left,!1)}),n};var Le=F('<div class="absolute left-2 top-2 w-fit rounded-full bg-zinc-800 px-3 py-2 text-xs text-white opacity-60"v-show=updating>'),Re=F("<div>");const ze=y=>{const[b,{history:C}]=A(),v=()=>y.block,H=()=>b.documentState.canvasBuilder;let r;const n=window.getComputedStyle(v().node),$=parseInt(n.width,10),z=parseInt(n.height,10),X=v().node.getBoundingClientRect(),T=Math.min(X.height,X.width)/2,O=Math.min(z,$)/2,B=()=>parseInt(v().getStyle("border-radius")||"0",10)||0;let S=10,L=10;const[Y,D]=V(!1),[i,a]=V(10),[h,p]=V(10),w=t=>{const g=t.clientX,l=t.clientY,d=window.getComputedStyle(r),c=parseInt(d.height,10),s=parseInt(d.width,10);let m=g,I=l;D(!0);const ee=U=>{C.pause(),N(()=>{U.preventDefault();const ne=U.clientX-m,le=U.clientY-I,te=(ne+le)/2*2;te<0&&(L=-(c/2),S=-(s/2));let j=Math.round(R(v().getStyle("border-radius"))+te);j=Math.max(0,Math.min(j,O)),o(j),v().setStyle("border-radius",`${j}px`)}),m=U.clientX,I=U.clientY};document.addEventListener("mousemove",ee),document.addEventListener("mouseup",U=>{U.preventDefault(),R(v().getStyle("border-radius"))<10&&N(()=>{p(10),a(10)}),D(!1),C.resume(),document.removeEventListener("mousemove",ee)},{once:!0}),t.stopPropagation()},o=t=>{const g=window.getComputedStyle(r),l=parseInt(g.height,10),d=parseInt(g.width,10),c=t/O;N(()=>{a(Math.max(L,T*c-l/2)),p(Math.max(S,T*c-d/2))})},e=()=>{H().scale,v().getStyle("height"),v().getStyle("width");const t=v().node.getBoundingClientRect();return R(t.height)>=25&&R(t.width)>=25};return re(()=>{o(B())}),(()=>{var t=Re();t.$$mousedown=l=>w(l);var g=r;return typeof g=="function"?ae(g,t):r=t,P(t,f(k,{get when(){return Y()},get children(){var l=Le();return P(l,B),l}})),E(l=>{var d=M("border-radius-resize pointer-events-auto absolute left-2 top-2 h-[10px] w-[10px] cursor-pointer rounded-full border-2 border-blue-400 bg-white",{hidden:H().scale<.4||!e()}),c=u(i()),s=u(h());return d!==l.e&&K(t,l.e=d),c!==l.t&&((l.t=c)!=null?t.style.setProperty("top",c):t.style.removeProperty("top")),s!==l.a&&((l.a=s)!=null?t.style.setProperty("left",s):t.style.removeProperty("left")),l},{e:void 0,t:void 0,a:void 0}),t})()};Z(["mousedown"]);var G=F("<div>"),Q=F('<div class="m-auto text-sm text-yellow-900">'),Te=F('<div><div class="margin-handler pointer-events-none absolute flex w-full bg-yellow-100"></div><div class="margin-handler pointer-events-none absolute bottom-0 flex w-full bg-yellow-100"></div><div class="margin-handler pointer-events-none absolute left-0 flex h-full bg-yellow-100"></div><div class="margin-handler pointer-events-none absolute right-0 flex h-full bg-yellow-100">');const Be=y=>{const[b,{history:C}]=A(),[v,H]=V(!1),r=()=>y.block,n=()=>b.documentState.canvasBuilder,$=()=>{r().getStyle("margin-top"),r().getStyle("display"),r().getStyle("margin");let i=window.getComputedStyle(r().node).marginTop;return R(i)*n().scale},z=()=>u(x(1*n().scale,1,2)),X=()=>{r().getStyle("margin-bottom"),r().getStyle("display"),r().getStyle("margin");let i=window.getComputedStyle(r().node).marginBottom;return R(i)*n().scale},T=()=>{r().getStyle("margin-left"),r().getStyle("display"),r().getStyle("margin");let i=window.getComputedStyle(r().node).marginLeft;return R(i)*n().scale},O=()=>{r().getStyle("margin-right"),r().getStyle("display"),r().getStyle("margin");let i=window.getComputedStyle(r().node).marginRight;return R(i)*n().scale},B=()=>{const i=x(16*n().scale,8,32),a=x(4*n().scale,2,8);return{width:i,height:a,bottom:`clamp(0px, calc(4px * ${n().scale}), 12px)`,left:`calc(50% - ${i/2}px)`}},S=()=>{const i=x(16*n().scale,8,32),a=x(4*n().scale,2,8);return{width:i,height:a,bottom:`clamp(-16px, calc(-8px * ${n().scale}), 2px)`,left:`calc(50% - ${i/2}px)`}},L=()=>{const i=x(4*n().scale,2,8),a=x(16*n().scale,8,32);return{width:i,height:a,right:`clamp(0px, calc(4px * ${n().scale}), 12px)`,top:`calc(50% - ${a/2}px)`}},Y=()=>{const i=x(4*n().scale,2,8),a=x(16*n().scale,8,32);return{width:i,height:a,right:`clamp(-16px, calc(-8px * ${n().scale}), 2px)`,top:`calc(50% - ${a/2}px)`}},D=(i,a)=>{if(y.disableHandlers)return;H(!0);const h=i.clientY,p=i.clientX,w=i.target,o=R(r().getStyles["margin-top"])||0,e=R(r().getStyles["margin-bottom"])||0,t=R(r().getStyles["margin-left"])||0,g=R(r().getStyles["margin-right"])||0,l=document.body.style.cursor;document.body.style.cursor=window.getComputedStyle(w).cursor;const d=c=>{C.pause(),c.stopPropagation(),N(()=>{let s=0,m=null;a===W.Top?(s=Math.max(o+c.clientY-h,0),r().setStyle("margin-top",u(s)),m="y"):a===W.Bottom?(s=Math.max(e+c.clientY-h,0),r().setStyle("margin-bottom",u(s)),m="y"):a===W.Left?(s=Math.max(t+c.clientX-p,0),r().setStyle("margin-left",u(s)),m="x"):a===W.Right&&(s=Math.max(g+c.clientX-p,0),r().setStyle("margin-right",u(s)),m="x"),c.shiftKey?(r().setStyle("margin-top",u(s)),r().setStyle("margin-bottom",u(s)),r().setStyle("margin-left",u(s)),r().setStyle("margin-right",u(s))):c.altKey&&(m==="y"?(r().setStyle("margin-top",u(s)),r().setStyle("margin-bottom",u(s))):m==="x"&&(r().setStyle("margin-left",u(s)),r().setStyle("margin-right",u(s))))}),c.preventDefault()};document.addEventListener("mousemove",d),document.addEventListener("mouseup",c=>{C.resume(),document.body.style.cursor=l,document.removeEventListener("mousemove",d),H(!1),c.preventDefault()},{once:!0})};return(()=>{var i=Te(),a=i.firstChild,h=a.nextSibling,p=h.nextSibling,w=p.nextSibling;return i.$$click=o=>o.preventDefault(),P(a,f(k,{get when(){return n().scale>.5},get children(){var o=G();return o.$$mousedown=e=>D(e,W.Top),E(e=>{var t=M("pointer-events-auto absolute left-[50%] rounded-full border-2 border-yellow-800 bg-yellow-400 hover:scale-125",{"cursor-ns-resize":!y.disableHandlers,hidden:v()}),g=z(),l=B().bottom,d=B().left,c=u(B().height),s=u(B().width);return t!==e.e&&K(o,e.e=t),g!==e.t&&((e.t=g)!=null?o.style.setProperty("border-width",g):o.style.removeProperty("border-width")),l!==e.a&&((e.a=l)!=null?o.style.setProperty("bottom",l):o.style.removeProperty("bottom")),d!==e.o&&((e.o=d)!=null?o.style.setProperty("left",d):o.style.removeProperty("left")),c!==e.i&&((e.i=c)!=null?o.style.setProperty("height",c):o.style.removeProperty("height")),s!==e.n&&((e.n=s)!=null?o.style.setProperty("width",s):o.style.removeProperty("width")),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),o}}),null),P(a,f(k,{get when(){return v()},get children(){var o=Q();return P(o,()=>r().getStyles["margin-top"]||"auto"),o}}),null),P(h,f(k,{get when(){return n().scale>.5},get children(){var o=G();return o.$$mousedown=e=>D(e,W.Bottom),E(e=>{var t=M("pointer-events-auto absolute left-[50%] rounded-full border-2 border-yellow-800 bg-yellow-400 hover:scale-125",{"cursor-ns-resize":!y.disableHandlers,hidden:v()}),g=z(),l=S().bottom,d=S().left,c=u(S().height),s=u(S().width);return t!==e.e&&K(o,e.e=t),g!==e.t&&((e.t=g)!=null?o.style.setProperty("border-width",g):o.style.removeProperty("border-width")),l!==e.a&&((e.a=l)!=null?o.style.setProperty("bottom",l):o.style.removeProperty("bottom")),d!==e.o&&((e.o=d)!=null?o.style.setProperty("left",d):o.style.removeProperty("left")),c!==e.i&&((e.i=c)!=null?o.style.setProperty("height",c):o.style.removeProperty("height")),s!==e.n&&((e.n=s)!=null?o.style.setProperty("width",s):o.style.removeProperty("width")),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),o}}),null),P(h,f(k,{get when(){return v()},get children(){var o=Q();return P(o,()=>r().getStyles["margin-bottom"]||"auto"),o}}),null),P(p,f(k,{get when(){return n().scale>.5},get children(){var o=G();return o.$$mousedown=e=>D(e,W.Left),E(e=>{var t=M("pointer-events-auto absolute top-[50%] rounded-full border-2 border-yellow-800 bg-yellow-400 hover:scale-125",{"cursor-ew-resize":!y.disableHandlers,hidden:v()}),g=z(),l=L().right,d=L().top,c=u(L().height),s=u(L().width);return t!==e.e&&K(o,e.e=t),g!==e.t&&((e.t=g)!=null?o.style.setProperty("border-width",g):o.style.removeProperty("border-width")),l!==e.a&&((e.a=l)!=null?o.style.setProperty("right",l):o.style.removeProperty("right")),d!==e.o&&((e.o=d)!=null?o.style.setProperty("top",d):o.style.removeProperty("top")),c!==e.i&&((e.i=c)!=null?o.style.setProperty("height",c):o.style.removeProperty("height")),s!==e.n&&((e.n=s)!=null?o.style.setProperty("width",s):o.style.removeProperty("width")),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),o}}),null),P(p,f(k,{get when(){return v()},get children(){var o=Q();return P(o,()=>r().getStyles["margin-left"]||"auto"),o}}),null),P(w,f(k,{get when(){return n().scale>.5},get children(){var o=G();return o.$$mousedown=e=>D(e,W.Right),E(e=>{var t=M("pointer-events-auto absolute top-[50%] rounded-full border-2 border-yellow-800 bg-yellow-400 hover:scale-125",{"cursor-ew-resize":!y.disableHandlers,hidden:v()}),g=z(),l=Y().right,d=Y().top,c=u(Y().height),s=u(Y().width);return t!==e.e&&K(o,e.e=t),g!==e.t&&((e.t=g)!=null?o.style.setProperty("border-width",g):o.style.removeProperty("border-width")),l!==e.a&&((e.a=l)!=null?o.style.setProperty("right",l):o.style.removeProperty("right")),d!==e.o&&((e.o=d)!=null?o.style.setProperty("top",d):o.style.removeProperty("top")),c!==e.i&&((e.i=c)!=null?o.style.setProperty("height",c):o.style.removeProperty("height")),s!==e.n&&((e.n=s)!=null?o.style.setProperty("width",s):o.style.removeProperty("width")),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),o}}),null),P(w,f(k,{get when(){return v()},get children(){var o=Q();return P(o,()=>r().getStyles["margin-right"]||"auto"),o}}),null),E(o=>{var e=M("group",{"opacity-40":!v(),"opacity-70":v()}),t=u($()),g=`calc(0% - ${u($())})`,l=u(X()),d=`calc(0% - ${u(X())})`,c=u(T()),s=`calc(0% - ${u(T())})`,m=u(O()),I=`calc(0% - ${u(O())})`;return e!==o.e&&K(i,o.e=e),t!==o.t&&((o.t=t)!=null?a.style.setProperty("height",t):a.style.removeProperty("height")),g!==o.a&&((o.a=g)!=null?a.style.setProperty("top",g):a.style.removeProperty("top")),l!==o.o&&((o.o=l)!=null?h.style.setProperty("height",l):h.style.removeProperty("height")),d!==o.i&&((o.i=d)!=null?h.style.setProperty("bottom",d):h.style.removeProperty("bottom")),c!==o.n&&((o.n=c)!=null?p.style.setProperty("width",c):p.style.removeProperty("width")),s!==o.s&&((o.s=s)!=null?p.style.setProperty("left",s):p.style.removeProperty("left")),m!==o.h&&((o.h=m)!=null?w.style.setProperty("width",m):w.style.removeProperty("width")),I!==o.r&&((o.r=I)!=null?w.style.setProperty("right",I):w.style.removeProperty("right")),o},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),i})()};Z(["click","mousedown"]);function De({key:y,defaultValue:b}){const C=sessionStorage.getItem(y),v=C!==null?JSON.parse(C):b,[H,r]=V(v);return _(()=>{sessionStorage.setItem(y,JSON.stringify(H()))}),[H,r]}function Ne(y){const[b]=de(y,["block"]),[,{deleteElement:C,duplicateElement:v,addColumnToTable:H}]=A(),r=pe(),[n,$]=De({key:"copiedElementStyle",defaultValue:{elementId:"",style:{}}}),z=()=>{$({elementId:y.block.id.toString(),style:y.block.getStyles})},X=()=>{y.block.updateStyles(n().style)};let T;re(()=>{$e(b.block.node,T)});const O=S=>{y.block.isEditable()||(b.block.isText&&T.classList.add("pointer-events-none"),b.block.handleClick(S))},B=[{label:"Copy Style",action:z},{label:"Paste Style",action:X,condition:()=>!!(n().elementId&&n().elementId.toString()!==b.block.id)},{label:"Duplicate",action:()=>{v(b.block.id)},condition:()=>!y.block.isRoot&&!y.block.isRepeater&&!["thead","tbody"].includes(y.block.getTag())},{label:"Repeat Element",action:()=>{y.block.setRepeater(!0)},condition:()=>!y.block.isRoot&&!y.block.isRepeater&&!["thead","tbody"].includes(y.block.getTag())},{label:"Insert Column Left",action:()=>{H(y.block.id,"left")},condition:()=>y.block.getTag()==="th"},{label:"Insert Column Right",action:()=>{H(y.block.id,"right")},condition:()=>y.block.getTag()==="th"},{label:"Delete Column",action:()=>{C(b.block.id)},condition:()=>y.block.getTag()==="th"},{label:"Delete",action:()=>{C(b.block.id)},condition:()=>!y.block.isRoot}];return f(ve,{get children(){return[f(ge,{as:"div",ref(S){var L=T;typeof L=="function"?L(S):T=S},get class(){return M("fixed z-[15] box-content select-none ring-2 ring-inset",b.block.isRoot?"pointer-events-none ring-yellow-400":"ring-inset")},get"aria-selected"(){return b.block.isActiveElement},onClick:O,get onDblClick(){return b.block.handleDoubleClick},get children(){return f(k,{get when(){return ce(()=>!b.block.isEditable())()&&!r.multipleBlocksSelected()},get children(){return[f(we,{get block(){return b.block}}),f(k,{get when(){return!b.block.isRoot},get children(){return[f(Be,{get block(){return b.block}}),f(ze,{get block(){return b.block}}),f(Ce,{get block(){return b.block}})]}})]}})}}),f(k,{get when(){return!b.block.isRoot},get children(){return f(he,{get children(){return f(ye,{class:"w-48 focus-visible:outline-0",get children(){return f(ue,{each:B,children:S=>f(k,{get when(){return!S.condition||S.condition()},get children(){return f(me,{onSelect:()=>S.action(),get children(){return S.label}})}})})}})}})}})]}})}export{Ne as default};
