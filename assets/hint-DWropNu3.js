import{e as k,g as A,W as x,c as p,m as E,a7 as X,ao as ae,S as Y,ap as le,aq as ce,f as I,k as J,n as pe,p as ue,b as K,i as de,t as fe}from"./index-CONonrmZ.js";import{P as N,a as Q,D as ge,c as he,s as me,b as ve}from"./index-DrStG47M.js";import{_ as Te,x as V,y as H,z as we,A as be,D as Pe,E as $,F as ye,G as De,H as P}from"./index-Dn2xiQBh.js";var Oe={};Te(Oe,{Arrow:()=>N,Content:()=>z,Portal:()=>U,Root:()=>W,Tooltip:()=>ke,Trigger:()=>M});var Z=pe();function B(){const a=ue(Z);if(a===void 0)throw new Error("[kobalte]: `useTooltipContext` must be used within a `Tooltip` component");return a}function z(a){const i=B(),n=V({id:i.generateId("content")},a),[l,o]=k(n,["ref","style"]);return A(()=>x(i.registerContentId(o.id))),p(Y,{get when(){return i.contentPresent()},get children(){return p(Q.Positioner,{get children(){return p(ge,E({ref(t){var e=X(c=>{i.setContentRef(c)},l.ref);typeof e=="function"&&e(t)},role:"tooltip",disableOutsidePointerEvents:!1,get style(){return ae({"--kb-tooltip-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},l.style)},onFocusOutside:t=>t.preventDefault(),onDismiss:()=>i.hideTooltip(!0)},()=>i.dataset(),o))}})}})}function U(a){const i=B();return p(Y,{get when(){return i.contentPresent()},get children(){return p(le,a)}})}function Ce(a,i,n){const l=a.split("-")[0],o=i.getBoundingClientRect(),t=n.getBoundingClientRect(),e=[],c=o.left+o.width/2,f=o.top+o.height/2;switch(l){case"top":e.push([o.left,f]),e.push([t.left,t.bottom]),e.push([t.left,t.top]),e.push([t.right,t.top]),e.push([t.right,t.bottom]),e.push([o.right,f]);break;case"right":e.push([c,o.top]),e.push([t.left,t.top]),e.push([t.right,t.top]),e.push([t.right,t.bottom]),e.push([t.left,t.bottom]),e.push([c,o.bottom]);break;case"bottom":e.push([o.left,f]),e.push([t.left,t.top]),e.push([t.left,t.bottom]),e.push([t.right,t.bottom]),e.push([t.right,t.top]),e.push([o.right,f]);break;case"left":e.push([c,o.top]),e.push([t.right,t.top]),e.push([t.left,t.top]),e.push([t.left,t.bottom]),e.push([t.right,t.bottom]),e.push([c,o.bottom]);break}return e}var w={},xe=0,y=!1,g,C,D;function W(a){const i=`tooltip-${ce()}`,n=`${++xe}`,l=V({id:i,openDelay:700,closeDelay:300,skipDelayDuration:300},a),[o,t]=k(l,["id","open","defaultOpen","onOpenChange","disabled","triggerOnFocusOnly","openDelay","closeDelay","skipDelayDuration","ignoreSafeArea","forceMount"]);let e;const[c,f]=I(),[m,O]=I(),[b,R]=I(),[S,L]=I(t.placement),u=he({open:()=>o.open,defaultOpen:()=>o.defaultOpen,onOpenChange:r=>{var d;return(d=o.onOpenChange)==null?void 0:d.call(o,r)}}),{present:F}=me({show:()=>o.forceMount||u.isOpen(),element:()=>b()??null}),s=()=>{w[n]=T},v=()=>{for(const r in w)r!==n&&(w[r](!0),delete w[r])},T=(r=!1)=>{r||o.closeDelay&&o.closeDelay<=0?(window.clearTimeout(e),e=void 0,u.close()):e||(e=window.setTimeout(()=>{e=void 0,u.close()},o.closeDelay)),window.clearTimeout(g),g=void 0,o.skipDelayDuration&&o.skipDelayDuration>=0&&(D=window.setTimeout(()=>{window.clearTimeout(D),D=void 0},o.skipDelayDuration)),y&&(window.clearTimeout(C),C=window.setTimeout(()=>{delete w[n],C=void 0,y=!1},o.closeDelay))},_=()=>{clearTimeout(e),e=void 0,v(),s(),y=!0,u.open(),window.clearTimeout(g),g=void 0,window.clearTimeout(C),C=void 0,window.clearTimeout(D),D=void 0},ee=()=>{v(),s(),!u.isOpen()&&!g&&!y?g=window.setTimeout(()=>{g=void 0,y=!0,_()},o.openDelay):u.isOpen()||_()},te=(r=!1)=>{!r&&o.openDelay&&o.openDelay>0&&!e&&!D?ee():_()},oe=()=>{window.clearTimeout(g),g=void 0,y=!1},q=()=>{window.clearTimeout(e),e=void 0},G=r=>$(m(),r)||$(b(),r),ne=r=>{const d=m(),h=b();if(!(!d||!h))return Ce(r,d,h)},j=r=>{const d=r.target;if(G(d)){q();return}if(!o.ignoreSafeArea){const h=ne(S());if(h&&ye(De(r),h)){q();return}}e||T()};A(()=>{if(!u.isOpen())return;const r=H();r.addEventListener("pointermove",j,!0),x(()=>{r.removeEventListener("pointermove",j,!0)})}),A(()=>{const r=m();if(!r||!u.isOpen())return;const d=se=>{const ie=se.target;$(ie,r)&&T(!0)},h=we();h.addEventListener("scroll",d,{capture:!0}),x(()=>{h.removeEventListener("scroll",d,{capture:!0})})}),x(()=>{clearTimeout(e),w[n]&&delete w[n]});const re={dataset:J(()=>({"data-expanded":u.isOpen()?"":void 0,"data-closed":u.isOpen()?void 0:""})),isOpen:u.isOpen,isDisabled:()=>o.disabled??!1,triggerOnFocusOnly:()=>o.triggerOnFocusOnly??!1,contentId:c,contentPresent:F,openTooltip:te,hideTooltip:T,cancelOpening:oe,generateId:be(()=>l.id),registerContentId:ve(f),isTargetOnTooltip:G,setTriggerRef:O,setContentRef:R};return p(Z.Provider,{value:re,get children(){return p(Q,E({anchorRef:m,contentRef:b,onCurrentPlacementChange:L},t))}})}function M(a){let i;const n=B(),[l,o]=k(a,["ref","onPointerEnter","onPointerLeave","onPointerDown","onClick","onFocus","onBlur"]);let t=!1,e=!1,c=!1;const f=()=>{t=!1},m=()=>{!n.isOpen()&&(e||c)&&n.openTooltip(c)},O=s=>{n.isOpen()&&!e&&!c&&n.hideTooltip(s)},b=s=>{P(s,l.onPointerEnter),!(s.pointerType==="touch"||n.triggerOnFocusOnly()||n.isDisabled()||s.defaultPrevented)&&(e=!0,m())},R=s=>{P(s,l.onPointerLeave),s.pointerType!=="touch"&&(e=!1,c=!1,n.isOpen()?O():n.cancelOpening())},S=s=>{P(s,l.onPointerDown),t=!0,H(i).addEventListener("pointerup",f,{once:!0})},L=s=>{P(s,l.onClick),e=!1,c=!1,O(!0)},u=s=>{P(s,l.onFocus),!(n.isDisabled()||s.defaultPrevented||t)&&(c=!0,m())},F=s=>{P(s,l.onBlur);const v=s.relatedTarget;n.isTargetOnTooltip(v)||(e=!1,c=!1,O(!0))};return x(()=>{H(i).removeEventListener("pointerup",f)}),p(Pe,E({as:"button",ref(s){var v=X(T=>{n.setTriggerRef(T),i=T},l.ref);typeof v=="function"&&v(s)},get"aria-describedby"(){return J(()=>!!n.isOpen())()?n.contentId():void 0},onPointerEnter:b,onPointerLeave:R,onPointerDown:S,onClick:L,onFocus:u,onBlur:F},()=>n.dataset(),o))}var ke=Object.assign(W,{Arrow:N,Content:z,Portal:U,Trigger:M});const Ee=M,Ie=a=>p(W,E({gutter:4},a)),Re=a=>{const[i,n]=k(a,["class"]);return p(U,{get children(){return p(z,E({get class(){return K("z-50 origin-[var(--kb-popover-content-transform-origin)] overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95",i.class)}},n))}})};var Se=fe('<p class="text-[10px] capitalize">');const Ae=a=>{const[i,{placement:n,overflowPadding:l,arrowPadding:o,detachedPadding:t}]=k(a,["class","children","label"]);return p(Ie,{placement:n,openDelay:200,overflowPadding:l,arrowPadding:o,detachedPadding:t,get children(){return[p(Ee,{class:"outline-none",as:"div",get children(){return i.children}}),p(Re,{get class(){return K("text-white font-bold !bg-black border-none px-4 !py-1 rounded-lg",i.class)},get children(){var e=Se();return de(e,()=>i.label.toLowerCase()),e}})]}})};export{Ae as H};
